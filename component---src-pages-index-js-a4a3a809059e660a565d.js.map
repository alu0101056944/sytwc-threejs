{"version":3,"file":"component---src-pages-index-js-a4a3a809059e660a565d.js","mappings":"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","sources":["webpack://sytwc-threejs/./node_modules/camelcase/index.js","webpack://sytwc-threejs/../src/image-utils.ts","webpack://sytwc-threejs/../src/components/hooks.ts","webpack://sytwc-threejs/../src/components/layout-wrapper.tsx","webpack://sytwc-threejs/../src/components/picture.tsx","webpack://sytwc-threejs/../src/components/placeholder.tsx","webpack://sytwc-threejs/../src/components/main-image.tsx","webpack://sytwc-threejs/../src/components/gatsby-image.server.tsx","webpack://sytwc-threejs/../src/components/gatsby-image.browser.tsx","webpack://sytwc-threejs/../src/components/static-image.server.tsx","webpack://sytwc-threejs/../src/components/static-image.tsx","webpack://sytwc-threejs/./src/templates/tabs.js","webpack://sytwc-threejs/./node_modules/three/examples/jsm/utils/BufferGeometryUtils.js","webpack://sytwc-threejs/./node_modules/three/examples/jsm/loaders/GLTFLoader.js","webpack://sytwc-threejs/./src/templates/main-animation.js","webpack://sytwc-threejs/./src/templates/content-and-sidebar.js","webpack://sytwc-threejs/./static/sytwc-threejs/fetch_innerhtml.js","webpack://sytwc-threejs/./static/sytwc-threejs/model_innerhtml.js","webpack://sytwc-threejs/./src/templates/first-gl-block.js","webpack://sytwc-threejs/./node_modules/three/examples/jsm/controls/OrbitControls.js","webpack://sytwc-threejs/./src/templates/second-gl-block.js","webpack://sytwc-threejs/./static/sytwc-threejs/kpi_innerhtml.js","webpack://sytwc-threejs/./src/pages/index.js"],"sourcesContent":["'use strict';\n\nconst UPPERCASE = /[\\p{Lu}]/u;\nconst LOWERCASE = /[\\p{Ll}]/u;\nconst LEADING_CAPITAL = /^[\\p{Lu}](?![\\p{Lu}])/gu;\nconst IDENTIFIER = /([\\p{Alpha}\\p{N}_]|$)/u;\nconst SEPARATORS = /[_.\\- ]+/;\n\nconst LEADING_SEPARATORS = new RegExp('^' + SEPARATORS.source);\nconst SEPARATORS_AND_IDENTIFIER = new RegExp(SEPARATORS.source + IDENTIFIER.source, 'gu');\nconst NUMBERS_AND_IDENTIFIER = new RegExp('\\\\d+' + IDENTIFIER.source, 'gu');\n\nconst preserveCamelCase = (string, toLowerCase, toUpperCase) => {\n\tlet isLastCharLower = false;\n\tlet isLastCharUpper = false;\n\tlet isLastLastCharUpper = false;\n\n\tfor (let i = 0; i < string.length; i++) {\n\t\tconst character = string[i];\n\n\t\tif (isLastCharLower && UPPERCASE.test(character)) {\n\t\t\tstring = string.slice(0, i) + '-' + string.slice(i);\n\t\t\tisLastCharLower = false;\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = true;\n\t\t\ti++;\n\t\t} else if (isLastCharUpper && isLastLastCharUpper && LOWERCASE.test(character)) {\n\t\t\tstring = string.slice(0, i - 1) + '-' + string.slice(i - 1);\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = false;\n\t\t\tisLastCharLower = true;\n\t\t} else {\n\t\t\tisLastCharLower = toLowerCase(character) === character && toUpperCase(character) !== character;\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = toUpperCase(character) === character && toLowerCase(character) !== character;\n\t\t}\n\t}\n\n\treturn string;\n};\n\nconst preserveConsecutiveUppercase = (input, toLowerCase) => {\n\tLEADING_CAPITAL.lastIndex = 0;\n\n\treturn input.replace(LEADING_CAPITAL, m1 => toLowerCase(m1));\n};\n\nconst postProcess = (input, toUpperCase) => {\n\tSEPARATORS_AND_IDENTIFIER.lastIndex = 0;\n\tNUMBERS_AND_IDENTIFIER.lastIndex = 0;\n\n\treturn input.replace(SEPARATORS_AND_IDENTIFIER, (_, identifier) => toUpperCase(identifier))\n\t\t.replace(NUMBERS_AND_IDENTIFIER, m => toUpperCase(m));\n};\n\nconst camelCase = (input, options) => {\n\tif (!(typeof input === 'string' || Array.isArray(input))) {\n\t\tthrow new TypeError('Expected the input to be `string | string[]`');\n\t}\n\n\toptions = {\n\t\tpascalCase: false,\n\t\tpreserveConsecutiveUppercase: false,\n\t\t...options\n\t};\n\n\tif (Array.isArray(input)) {\n\t\tinput = input.map(x => x.trim())\n\t\t\t.filter(x => x.length)\n\t\t\t.join('-');\n\t} else {\n\t\tinput = input.trim();\n\t}\n\n\tif (input.length === 0) {\n\t\treturn '';\n\t}\n\n\tconst toLowerCase = options.locale === false ?\n\t\tstring => string.toLowerCase() :\n\t\tstring => string.toLocaleLowerCase(options.locale);\n\tconst toUpperCase = options.locale === false ?\n\t\tstring => string.toUpperCase() :\n\t\tstring => string.toLocaleUpperCase(options.locale);\n\n\tif (input.length === 1) {\n\t\treturn options.pascalCase ? toUpperCase(input) : toLowerCase(input);\n\t}\n\n\tconst hasUpperCase = input !== toLowerCase(input);\n\n\tif (hasUpperCase) {\n\t\tinput = preserveCamelCase(input, toLowerCase, toUpperCase);\n\t}\n\n\tinput = input.replace(LEADING_SEPARATORS, '');\n\n\tif (options.preserveConsecutiveUppercase) {\n\t\tinput = preserveConsecutiveUppercase(input, toLowerCase);\n\t} else {\n\t\tinput = toLowerCase(input);\n\t}\n\n\tif (options.pascalCase) {\n\t\tinput = toUpperCase(input.charAt(0)) + input.slice(1);\n\t}\n\n\treturn postProcess(input, toUpperCase);\n};\n\nmodule.exports = camelCase;\n// TODO: Remove this for the next major release\nmodule.exports.default = camelCase;\n","import camelCase from \"camelcase\"\nimport type { IGatsbyImageData } from \"./index\"\n\nconst DEFAULT_PIXEL_DENSITIES = [0.25, 0.5, 1, 2]\nexport const DEFAULT_BREAKPOINTS = [750, 1080, 1366, 1920]\nexport const EVERY_BREAKPOINT = [\n  320, 654, 768, 1024, 1366, 1600, 1920, 2048, 2560, 3440, 3840, 4096,\n]\nconst DEFAULT_FLUID_WIDTH = 800\nconst DEFAULT_FIXED_WIDTH = 800\nconst DEFAULT_ASPECT_RATIO = 4 / 3\n\nexport type Fit = \"cover\" | \"fill\" | \"inside\" | \"outside\" | \"contain\"\n\nexport type Layout = \"fixed\" | \"fullWidth\" | \"constrained\"\nexport type ImageFormat = \"jpg\" | \"png\" | \"webp\" | \"avif\" | \"auto\" | \"\"\n\n/**\n * The minimal required reporter, as we don't want to import it from gatsby-cli\n */\nexport interface IReporter {\n  warn(message: string): void\n}\n\nexport interface ISharpGatsbyImageArgs {\n  layout?: Layout\n  formats?: Array<ImageFormat>\n  placeholder?: \"tracedSVG\" | \"dominantColor\" | \"blurred\" | \"none\"\n  tracedSVGOptions?: Record<string, unknown>\n  width?: number\n  height?: number\n  aspectRatio?: number\n  sizes?: string\n  quality?: number\n  transformOptions?: {\n    fit?: Fit\n    cropFocus?: number | string\n    duotone?: {\n      highlight: string\n      shadow: string\n      opacity?: number\n    }\n    grayscale?: boolean\n    rotate?: number\n    trim?: number\n  }\n  jpgOptions?: Record<string, unknown>\n  pngOptions?: Record<string, unknown>\n  webpOptions?: Record<string, unknown>\n  avifOptions?: Record<string, unknown>\n  blurredOptions?: { width?: number; toFormat?: ImageFormat }\n  breakpoints?: Array<number>\n  outputPixelDensities?: Array<number>\n  backgroundColor?: string\n}\n\nexport interface IImageSizeArgs {\n  width?: number\n  height?: number\n  layout?: Layout\n  filename: string\n  outputPixelDensities?: Array<number>\n  breakpoints?: Array<number>\n  fit?: Fit\n  reporter?: IReporter\n  sourceMetadata: { width: number; height: number }\n}\n\nexport interface IImageSizes {\n  sizes: Array<number>\n  presentationWidth: number\n  presentationHeight: number\n  aspectRatio: number\n  unscaledWidth: number\n}\n\nexport interface IImage {\n  src: string\n  width: number\n  height: number\n  format: ImageFormat\n}\n\nexport interface IGatsbyImageHelperArgs {\n  pluginName: string\n  generateImageSource: (\n    filename: string,\n    width: number,\n    height: number,\n    format: ImageFormat,\n    fit?: Fit,\n    options?: Record<string, unknown>\n  ) => IImage\n  layout?: Layout\n  formats?: Array<ImageFormat>\n  filename: string\n  placeholderURL?: string\n  width?: number\n  height?: number\n  sizes?: string\n  reporter?: IReporter\n  sourceMetadata?: { width: number; height: number; format: ImageFormat }\n  fit?: Fit\n  options?: Record<string, unknown>\n  breakpoints?: Array<number>\n  backgroundColor?: string\n  aspectRatio?: number\n}\n\nconst warn = (message: string): void => console.warn(message)\n\nconst sortNumeric = (a: number, b: number): number => a - b\n\nexport const getSizes = (width: number, layout: Layout): string | undefined => {\n  switch (layout) {\n    // If screen is wider than the max size, image width is the max size,\n    // otherwise it's the width of the screen\n    case `constrained`:\n      return `(min-width: ${width}px) ${width}px, 100vw`\n\n    // Image is always the same width, whatever the size of the screen\n    case `fixed`:\n      return `${width}px`\n\n    // Image is always the width of the screen\n    case `fullWidth`:\n      return `100vw`\n\n    default:\n      return undefined\n  }\n}\n\nexport const getSrcSet = (images: Array<IImage>): string =>\n  images.map(image => `${image.src} ${image.width}w`).join(`,\\n`)\n\nexport function formatFromFilename(filename: string): ImageFormat | undefined {\n  const dot = filename.lastIndexOf(`.`)\n  if (dot !== -1) {\n    const ext = filename.slice(dot + 1)\n    if (ext === `jpeg`) {\n      return `jpg`\n    }\n    if (ext.length === 3 || ext.length === 4) {\n      return ext as ImageFormat\n    }\n  }\n  return undefined\n}\n\nexport function setDefaultDimensions(\n  args: IGatsbyImageHelperArgs\n): IGatsbyImageHelperArgs {\n  let {\n    layout = `constrained`,\n    width,\n    height,\n    sourceMetadata,\n    breakpoints,\n    aspectRatio,\n    formats = [`auto`, `webp`],\n  } = args\n  formats = formats.map(format => format.toLowerCase() as ImageFormat)\n  layout = camelCase(layout) as Layout\n\n  if (width && height) {\n    return { ...args, formats, layout, aspectRatio: width / height }\n  }\n  if (sourceMetadata.width && sourceMetadata.height && !aspectRatio) {\n    aspectRatio = sourceMetadata.width / sourceMetadata.height\n  }\n\n  if (layout === `fullWidth`) {\n    width = width || sourceMetadata.width || breakpoints[breakpoints.length - 1]\n    height = height || Math.round(width / (aspectRatio || DEFAULT_ASPECT_RATIO))\n  } else {\n    if (!width) {\n      if (height && aspectRatio) {\n        width = height * aspectRatio\n      } else if (sourceMetadata.width) {\n        width = sourceMetadata.width\n      } else if (height) {\n        width = Math.round(height / DEFAULT_ASPECT_RATIO)\n      } else {\n        width = DEFAULT_FIXED_WIDTH\n      }\n    }\n\n    if (aspectRatio && !height) {\n      height = Math.round(width / aspectRatio)\n    } else if (!aspectRatio) {\n      aspectRatio = width / height\n    }\n  }\n  return { ...args, width, height, aspectRatio, layout, formats }\n}\n\n/**\n * Use this for getting an image for the blurred placeholder. This ensures the\n * aspect ratio and crop match the main image\n */\nexport function getLowResolutionImageURL(\n  args: IGatsbyImageHelperArgs,\n  width = 20\n): string {\n  args = setDefaultDimensions(args)\n  const { generateImageSource, filename, aspectRatio } = args\n  return generateImageSource(\n    filename,\n    width,\n    Math.round(width / aspectRatio),\n    args.sourceMetadata.format || `jpg`,\n    args.fit,\n    args.options\n  )?.src\n}\n\nexport function generateImageData(\n  args: IGatsbyImageHelperArgs\n): IGatsbyImageData {\n  args = setDefaultDimensions(args)\n\n  let {\n    pluginName,\n    sourceMetadata,\n    generateImageSource,\n    layout,\n    fit,\n    options,\n    width,\n    height,\n    filename,\n    reporter = { warn },\n    backgroundColor,\n    placeholderURL,\n  } = args\n\n  if (!pluginName) {\n    reporter.warn(\n      `[gatsby-plugin-image] \"generateImageData\" was not passed a plugin name`\n    )\n  }\n\n  if (typeof generateImageSource !== `function`) {\n    throw new Error(`generateImageSource must be a function`)\n  }\n\n  if (!sourceMetadata || (!sourceMetadata.width && !sourceMetadata.height)) {\n    // No metadata means we let the CDN handle max size etc, aspect ratio etc\n    sourceMetadata = {\n      width,\n      height,\n      format: sourceMetadata?.format || formatFromFilename(filename) || `auto`,\n    }\n  } else if (!sourceMetadata.format) {\n    sourceMetadata.format = formatFromFilename(filename)\n  }\n\n  const formats = new Set<ImageFormat>(args.formats)\n\n  if (formats.size === 0 || formats.has(`auto`) || formats.has(``)) {\n    formats.delete(`auto`)\n    formats.delete(``)\n    formats.add(sourceMetadata.format)\n  }\n\n  if (formats.has(`jpg`) && formats.has(`png`)) {\n    reporter.warn(\n      `[${pluginName}] Specifying both 'jpg' and 'png' formats is not supported. Using 'auto' instead`\n    )\n    if (sourceMetadata.format === `jpg`) {\n      formats.delete(`png`)\n    } else {\n      formats.delete(`jpg`)\n    }\n  }\n\n  const imageSizes = calculateImageSizes({ ...args, sourceMetadata })\n\n  const result: IGatsbyImageData[\"images\"] = {\n    sources: [],\n  }\n\n  let sizes = args.sizes\n  if (!sizes) {\n    sizes = getSizes(imageSizes.presentationWidth, layout)\n  }\n\n  formats.forEach(format => {\n    const images = imageSizes.sizes\n      .map(size => {\n        const imageSrc = generateImageSource(\n          filename,\n          size,\n          Math.round(size / imageSizes.aspectRatio),\n          format,\n          fit,\n          options\n        )\n        if (\n          !imageSrc?.width ||\n          !imageSrc.height ||\n          !imageSrc.src ||\n          !imageSrc.format\n        ) {\n          reporter.warn(\n            `[${pluginName}] The resolver for image ${filename} returned an invalid value.`\n          )\n          return undefined\n        }\n        return imageSrc\n      })\n      .filter(Boolean)\n\n    if (format === `jpg` || format === `png` || format === `auto`) {\n      const unscaled =\n        images.find(img => img.width === imageSizes.unscaledWidth) || images[0]\n\n      if (unscaled) {\n        result.fallback = {\n          src: unscaled.src,\n          srcSet: getSrcSet(images),\n          sizes,\n        }\n      }\n    } else {\n      result.sources?.push({\n        srcSet: getSrcSet(images),\n        sizes,\n        type: `image/${format}`,\n      })\n    }\n  })\n\n  const imageProps: Partial<IGatsbyImageData> = {\n    images: result,\n    layout,\n    backgroundColor,\n  }\n\n  if (placeholderURL) {\n    imageProps.placeholder = { fallback: placeholderURL }\n  }\n\n  switch (layout) {\n    case `fixed`:\n      imageProps.width = imageSizes.presentationWidth\n      imageProps.height = imageSizes.presentationHeight\n      break\n\n    case `fullWidth`:\n      imageProps.width = 1\n      imageProps.height = 1 / imageSizes.aspectRatio\n      break\n\n    case `constrained`:\n      imageProps.width = args.width || imageSizes.presentationWidth || 1\n      imageProps.height = (imageProps.width || 1) / imageSizes.aspectRatio\n  }\n\n  return imageProps as IGatsbyImageData\n}\n\nconst dedupeAndSortDensities = (values: Array<number>): Array<number> =>\n  Array.from(new Set([1, ...values])).sort(sortNumeric)\n\nexport function calculateImageSizes(args: IImageSizeArgs): IImageSizes {\n  const {\n    width,\n    height,\n    filename,\n    layout = `constrained`,\n    sourceMetadata: imgDimensions,\n    reporter = { warn },\n    breakpoints = DEFAULT_BREAKPOINTS,\n  } = args\n\n  // check that all dimensions provided are positive\n  const userDimensions = { width, height }\n  const erroneousUserDimensions = Object.entries(userDimensions).filter(\n    ([_, size]) => typeof size === `number` && size < 1\n  )\n  if (erroneousUserDimensions.length) {\n    throw new Error(\n      `Specified dimensions for images must be positive numbers (> 0). Problem dimensions you have are ${erroneousUserDimensions\n        .map(dim => dim.join(`: `))\n        .join(`, `)}`\n    )\n  }\n\n  if (layout === `fixed`) {\n    return fixedImageSizes(args)\n  } else if (layout === `constrained`) {\n    return responsiveImageSizes(args)\n  } else if (layout === `fullWidth`) {\n    return responsiveImageSizes({ breakpoints, ...args })\n  } else {\n    reporter.warn(\n      `No valid layout was provided for the image at ${filename}. Valid image layouts are fixed, fullWidth, and constrained. Found ${layout}`\n    )\n    return {\n      sizes: [imgDimensions.width],\n      presentationWidth: imgDimensions.width,\n      presentationHeight: imgDimensions.height,\n      aspectRatio: imgDimensions.width / imgDimensions.height,\n      unscaledWidth: imgDimensions.width,\n    }\n  }\n}\nexport function fixedImageSizes({\n  filename,\n  sourceMetadata: imgDimensions,\n  width,\n  height,\n  fit = `cover`,\n  outputPixelDensities = DEFAULT_PIXEL_DENSITIES,\n  reporter = { warn },\n}: IImageSizeArgs): IImageSizes {\n  let aspectRatio = imgDimensions.width / imgDimensions.height\n  // Sort, dedupe and ensure there's a 1\n  const densities = dedupeAndSortDensities(outputPixelDensities)\n\n  // If both are provided then we need to check the fit\n  if (width && height) {\n    const calculated = getDimensionsAndAspectRatio(imgDimensions, {\n      width,\n      height,\n      fit,\n    })\n    width = calculated.width\n    height = calculated.height\n    aspectRatio = calculated.aspectRatio\n  }\n\n  if (!width) {\n    if (!height) {\n      width = DEFAULT_FIXED_WIDTH\n    } else {\n      width = Math.round(height * aspectRatio)\n    }\n  } else if (!height) {\n    height = Math.round(width / aspectRatio)\n  }\n\n  const originalWidth = width // will use this for presentationWidth, don't want to lose it\n  const isTopSizeOverriden =\n    imgDimensions.width < width || imgDimensions.height < (height as number)\n\n  // If the image is smaller than requested, warn the user that it's being processed as such\n  // print out this message with the necessary information before we overwrite it for sizing\n  if (isTopSizeOverriden) {\n    const fixedDimension = imgDimensions.width < width ? `width` : `height`\n    reporter.warn(`\nThe requested ${fixedDimension} \"${\n      fixedDimension === `width` ? width : height\n    }px\" for the image ${filename} was larger than the actual image ${fixedDimension} of ${\n      imgDimensions[fixedDimension]\n    }px. If possible, replace the current image with a larger one.`)\n\n    if (fixedDimension === `width`) {\n      width = imgDimensions.width\n      height = Math.round(width / aspectRatio)\n    } else {\n      height = imgDimensions.height\n      width = height * aspectRatio\n    }\n  }\n\n  const sizes = densities\n    .filter(size => size >= 1) // remove smaller densities because fixed images don't need them\n    .map(density => Math.round(density * (width as number)))\n    .filter(size => size <= imgDimensions.width)\n\n  return {\n    sizes,\n    aspectRatio,\n    presentationWidth: originalWidth,\n    presentationHeight: Math.round(originalWidth / aspectRatio),\n    unscaledWidth: width,\n  }\n}\n\nexport function responsiveImageSizes({\n  sourceMetadata: imgDimensions,\n  width,\n  height,\n  fit = `cover`,\n  outputPixelDensities = DEFAULT_PIXEL_DENSITIES,\n  breakpoints,\n  layout,\n}: IImageSizeArgs): IImageSizes {\n  let sizes\n  let aspectRatio = imgDimensions.width / imgDimensions.height\n  // Sort, dedupe and ensure there's a 1\n  const densities = dedupeAndSortDensities(outputPixelDensities)\n\n  // If both are provided then we need to check the fit\n  if (width && height) {\n    const calculated = getDimensionsAndAspectRatio(imgDimensions, {\n      width,\n      height,\n      fit,\n    })\n    width = calculated.width\n    height = calculated.height\n    aspectRatio = calculated.aspectRatio\n  }\n\n  // Case 1: width of height were passed in, make sure it isn't larger than the actual image\n  width = width && Math.min(width, imgDimensions.width)\n  height = height && Math.min(height, imgDimensions.height)\n\n  // Case 2: neither width or height were passed in, use default size\n  if (!width && !height) {\n    width = Math.min(DEFAULT_FLUID_WIDTH, imgDimensions.width)\n    height = width / aspectRatio\n  }\n\n  // if it still hasn't been found, calculate width from the derived height.\n  // TS isn't smart enough to realise the type for height has been narrowed here\n  if (!width) {\n    width = (height as number) * aspectRatio\n  }\n\n  const originalWidth = width\n  const isTopSizeOverriden =\n    imgDimensions.width < width || imgDimensions.height < (height as number)\n  if (isTopSizeOverriden) {\n    width = imgDimensions.width\n    height = imgDimensions.height\n  }\n\n  width = Math.round(width)\n\n  if (breakpoints?.length > 0) {\n    sizes = breakpoints.filter(size => size <= imgDimensions.width)\n\n    // If a larger breakpoint has been filtered-out, add the actual image width instead\n    if (\n      sizes.length < breakpoints.length &&\n      !sizes.includes(imgDimensions.width)\n    ) {\n      sizes.push(imgDimensions.width)\n    }\n  } else {\n    sizes = densities.map(density => Math.round(density * (width as number)))\n    sizes = sizes.filter(size => size <= imgDimensions.width)\n  }\n\n  // ensure that the size passed in is included in the final output\n  if (layout === `constrained` && !sizes.includes(width)) {\n    sizes.push(width)\n  }\n  sizes = sizes.sort(sortNumeric)\n  return {\n    sizes,\n    aspectRatio,\n    presentationWidth: originalWidth,\n    presentationHeight: Math.round(originalWidth / aspectRatio),\n    unscaledWidth: width,\n  }\n}\n\nexport function getDimensionsAndAspectRatio(\n  dimensions,\n  options\n): { width: number; height: number; aspectRatio: number } {\n  // Calculate the eventual width/height of the image.\n  const imageAspectRatio = dimensions.width / dimensions.height\n\n  let width = options.width\n  let height = options.height\n\n  switch (options.fit) {\n    case `fill`: {\n      width = options.width ? options.width : dimensions.width\n      height = options.height ? options.height : dimensions.height\n      break\n    }\n    case `inside`: {\n      const widthOption = options.width\n        ? options.width\n        : Number.MAX_SAFE_INTEGER\n      const heightOption = options.height\n        ? options.height\n        : Number.MAX_SAFE_INTEGER\n\n      width = Math.min(widthOption, Math.round(heightOption * imageAspectRatio))\n      height = Math.min(\n        heightOption,\n        Math.round(widthOption / imageAspectRatio)\n      )\n      break\n    }\n    case `outside`: {\n      const widthOption = options.width ? options.width : 0\n      const heightOption = options.height ? options.height : 0\n\n      width = Math.max(widthOption, Math.round(heightOption * imageAspectRatio))\n      height = Math.max(\n        heightOption,\n        Math.round(widthOption / imageAspectRatio)\n      )\n      break\n    }\n\n    default: {\n      if (options.width && !options.height) {\n        width = options.width\n        height = Math.round(options.width / imageAspectRatio)\n      }\n\n      if (options.height && !options.width) {\n        width = Math.round(options.height * imageAspectRatio)\n        height = options.height\n      }\n    }\n  }\n\n  return {\n    width,\n    height,\n    aspectRatio: width / height,\n  }\n}\n","/* global GATSBY___IMAGE */\nimport { generateImageData, EVERY_BREAKPOINT } from \"../image-utils\"\nimport type { CSSProperties, HTMLAttributes, ImgHTMLAttributes } from \"react\"\nimport type { Node } from \"gatsby\"\nimport type { PlaceholderProps } from \"./placeholder\"\nimport type { MainImageProps } from \"./main-image\"\nimport type { IGatsbyImageData } from \"./gatsby-image.browser\"\nimport type {\n  IGatsbyImageHelperArgs,\n  Layout,\n  IImage,\n  ImageFormat,\n} from \"../image-utils\"\n\n// Native lazy-loading support: https://addyosmani.com/blog/lazy-loading/\nexport const hasNativeLazyLoadSupport = (): boolean =>\n  typeof HTMLImageElement !== `undefined` &&\n  `loading` in HTMLImageElement.prototype\n\nexport function gatsbyImageIsInstalled(): boolean {\n  return typeof GATSBY___IMAGE !== `undefined` && GATSBY___IMAGE\n}\n\nexport type IGatsbyImageDataParent<T = never> = T & {\n  gatsbyImageData: IGatsbyImageData\n}\nexport type IGatsbyImageParent<T = never> = T & {\n  gatsbyImage: IGatsbyImageData\n}\nexport type FileNode = Partial<Node> & {\n  childImageSharp?: IGatsbyImageDataParent<Partial<Node>>\n}\n\nconst isGatsbyImageData = (\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  node: IGatsbyImageData | any\n): node is IGatsbyImageData =>\n  //  check for a deep prop to be sure this is a valid gatsbyImageData object\n  Boolean(node?.images?.fallback?.src)\n\nconst isGatsbyImageDataParent = <T>(\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  node: IGatsbyImageDataParent<T> | any\n): node is IGatsbyImageDataParent<T> => Boolean(node?.gatsbyImageData)\n\nconst isGatsbyImageParent = <T>(\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  node: IGatsbyImageParent<T> | any\n): node is IGatsbyImageParent<T> => Boolean(node?.gatsbyImage)\n\nexport type ImageDataLike =\n  | FileNode\n  | IGatsbyImageDataParent\n  | IGatsbyImageParent\n  | IGatsbyImageData\n\nexport const getImage = (\n  node: ImageDataLike | null\n): IGatsbyImageData | undefined => {\n  // This checks both for gatsbyImageData and gatsbyImage\n  if (isGatsbyImageData(node)) {\n    return node\n  }\n  // gatsbyImageData GraphQL field\n  if (isGatsbyImageDataParent(node)) {\n    return node.gatsbyImageData\n  }\n  // gatsbyImage GraphQL field for Gatsby's Image CDN service\n  if (isGatsbyImageParent(node)) {\n    return node.gatsbyImage\n  }\n  return node?.childImageSharp?.gatsbyImageData\n}\n\nexport const getSrc = (node: ImageDataLike): string | undefined =>\n  getImage(node)?.images?.fallback?.src\n\nexport const getSrcSet = (node: ImageDataLike): string | undefined =>\n  getImage(node)?.images?.fallback?.srcSet\n\nexport function getWrapperProps(\n  width: number,\n  height: number,\n  layout: Layout\n): Pick<HTMLAttributes<HTMLElement>, \"className\" | \"style\"> & {\n  \"data-gatsby-image-wrapper\": string\n} {\n  const wrapperStyle: CSSProperties = {}\n\n  let className = `gatsby-image-wrapper`\n\n  // If the plugin isn't installed we need to apply the styles inline\n  if (!gatsbyImageIsInstalled()) {\n    wrapperStyle.position = `relative`\n    wrapperStyle.overflow = `hidden`\n  }\n\n  if (layout === `fixed`) {\n    wrapperStyle.width = width\n    wrapperStyle.height = height\n  } else if (layout === `constrained`) {\n    if (!gatsbyImageIsInstalled()) {\n      wrapperStyle.display = `inline-block`\n      wrapperStyle.verticalAlign = `top`\n    }\n    className = `gatsby-image-wrapper gatsby-image-wrapper-constrained`\n  }\n\n  return {\n    className,\n    \"data-gatsby-image-wrapper\": ``,\n    style: wrapperStyle,\n  }\n}\n\nexport interface IUrlBuilderArgs<OptionsType> {\n  width: number\n  height: number\n  baseUrl: string\n  format: ImageFormat\n  options: OptionsType\n}\nexport interface IGetImageDataArgs<OptionsType = Record<string, unknown>> {\n  baseUrl: string\n  /**\n   * For constrained and fixed images, the size of the image element\n   */\n  width?: number\n  height?: number\n  /**\n   * If available, pass the source image width and height\n   */\n  sourceWidth?: number\n  sourceHeight?: number\n  /**\n   * If only one dimension is passed, then this will be used to calculate the other.\n   */\n  aspectRatio?: number\n  layout?: Layout\n  /**\n   * Returns a URL based on the passed arguments. Should be a pure function\n   */\n  urlBuilder: (args: IUrlBuilderArgs<OptionsType>) => string\n\n  /**\n   * Should be a data URI\n   */\n  placeholderURL?: string\n  backgroundColor?: string\n  /**\n   * Used in error messages etc\n   */\n  pluginName?: string\n\n  /**\n   * If you do not support auto-format, pass an array of image types here\n   */\n  formats?: Array<ImageFormat>\n\n  breakpoints?: Array<number>\n\n  /**\n   * Passed to the urlBuilder function\n   */\n  options?: OptionsType\n}\n\n/**\n * Use this hook to generate gatsby-plugin-image data in the browser.\n */\nexport function getImageData<OptionsType>({\n  baseUrl,\n  urlBuilder,\n  sourceWidth,\n  sourceHeight,\n  pluginName = `getImageData`,\n  formats = [`auto`],\n  breakpoints,\n  options,\n  ...props\n}: IGetImageDataArgs<OptionsType>): IGatsbyImageData {\n  if (\n    !breakpoints?.length &&\n    (props.layout === `fullWidth` || (props.layout as string) === `FULL_WIDTH`)\n  ) {\n    breakpoints = EVERY_BREAKPOINT\n  }\n  const generateImageSource = (\n    baseUrl: string,\n    width: number,\n    height?: number,\n    format?: ImageFormat\n  ): IImage => {\n    return {\n      width,\n      height,\n      format,\n      src: urlBuilder({ baseUrl, width, height, options, format }),\n    }\n  }\n\n  const sourceMetadata: IGatsbyImageHelperArgs[\"sourceMetadata\"] = {\n    width: sourceWidth,\n    height: sourceHeight,\n    format: `auto`,\n  }\n\n  const args: IGatsbyImageHelperArgs = {\n    ...props,\n    pluginName,\n    generateImageSource,\n    filename: baseUrl,\n    formats,\n    breakpoints,\n    sourceMetadata,\n  }\n  return generateImageData(args)\n}\n\nexport function getMainProps(\n  isLoading: boolean,\n  isLoaded: boolean,\n  images: IGatsbyImageData[\"images\"],\n  loading?: \"eager\" | \"lazy\",\n  style: CSSProperties = {}\n): Partial<MainImageProps> {\n  // fallback when it's not configured in gatsby-config.\n  if (!gatsbyImageIsInstalled()) {\n    style = {\n      height: `100%`,\n      left: 0,\n      position: `absolute`,\n      top: 0,\n      transform: `translateZ(0)`,\n      transition: `opacity 250ms linear`,\n      width: `100%`,\n      willChange: `opacity`,\n      ...style,\n    }\n  }\n\n  const result = {\n    ...images,\n    loading,\n    shouldLoad: isLoading,\n    \"data-main-image\": ``,\n    style: {\n      ...style,\n      opacity: isLoaded ? 1 : 0,\n    },\n  }\n\n  return result\n}\n\nexport type PlaceholderImageAttrs = ImgHTMLAttributes<HTMLImageElement> &\n  Pick<PlaceholderProps, \"sources\" | \"fallback\"> & {\n    \"data-placeholder-image\"?: string\n  }\n\nexport function getPlaceholderProps(\n  placeholder: PlaceholderImageAttrs | undefined,\n  isLoaded: boolean,\n  layout: Layout,\n  width?: number,\n  height?: number,\n  backgroundColor?: string,\n  objectFit?: CSSProperties[\"objectFit\"],\n  objectPosition?: CSSProperties[\"objectPosition\"]\n): PlaceholderImageAttrs {\n  const wrapperStyle: CSSProperties = {}\n\n  if (backgroundColor) {\n    wrapperStyle.backgroundColor = backgroundColor\n\n    if (layout === `fixed`) {\n      wrapperStyle.width = width\n      wrapperStyle.height = height\n      wrapperStyle.backgroundColor = backgroundColor\n      wrapperStyle.position = `relative`\n    } else if (layout === `constrained`) {\n      wrapperStyle.position = `absolute`\n      wrapperStyle.top = 0\n      wrapperStyle.left = 0\n      wrapperStyle.bottom = 0\n      wrapperStyle.right = 0\n    } else if (layout === `fullWidth`) {\n      wrapperStyle.position = `absolute`\n      wrapperStyle.top = 0\n      wrapperStyle.left = 0\n      wrapperStyle.bottom = 0\n      wrapperStyle.right = 0\n    }\n  }\n\n  if (objectFit) {\n    wrapperStyle.objectFit = objectFit\n  }\n\n  if (objectPosition) {\n    wrapperStyle.objectPosition = objectPosition\n  }\n  const result: PlaceholderImageAttrs = {\n    ...placeholder,\n    \"aria-hidden\": true,\n    \"data-placeholder-image\": ``,\n    style: {\n      opacity: isLoaded ? 0 : 1,\n      transition: `opacity 500ms linear`,\n      ...wrapperStyle,\n    },\n  }\n\n  // fallback when it's not configured in gatsby-config.\n  if (!gatsbyImageIsInstalled()) {\n    result.style = {\n      height: `100%`,\n      left: 0,\n      position: `absolute`,\n      top: 0,\n      width: `100%`,\n    }\n  }\n\n  return result\n}\n\nexport interface IArtDirectedImage {\n  media: string\n  image: IGatsbyImageData\n}\n\n/**\n * Generate a Gatsby image data object with multiple, art-directed images that display at different\n * resolutions.\n *\n * @param defaultImage The image displayed when no media query matches.\n * It is also used for all other settings applied to the image, such as width, height and layout.\n * You should pass a className to the component with media queries to adjust the size of the container,\n * as this cannot be adjusted automatically.\n * @param artDirected Array of objects which each contains a `media` string which is a media query\n * such as `(min-width: 320px)`, and the image object to use when that query matches.\n */\nexport function withArtDirection(\n  defaultImage: IGatsbyImageData,\n  artDirected: Array<IArtDirectedImage>\n): IGatsbyImageData {\n  const { images, placeholder, ...props } = defaultImage\n  const output: IGatsbyImageData = {\n    ...props,\n    images: {\n      ...images,\n      sources: [],\n    },\n    placeholder: placeholder && {\n      ...placeholder,\n      sources: [],\n    },\n  }\n\n  artDirected.forEach(({ media, image }) => {\n    if (!media) {\n      if (process.env.NODE_ENV === `development`) {\n        console.warn(\n          \"[gatsby-plugin-image] All art-directed images passed to must have a value set for `media`. Skipping.\"\n        )\n      }\n      return\n    }\n\n    if (\n      image.layout !== defaultImage.layout &&\n      process.env.NODE_ENV === `development`\n    ) {\n      console.warn(\n        `[gatsby-plugin-image] Mismatched image layout: expected \"${defaultImage.layout}\" but received \"${image.layout}\". All art-directed images use the same layout as the default image`\n      )\n    }\n\n    output.images.sources.push(\n      ...image.images.sources.map(source => {\n        return { ...source, media }\n      }),\n      {\n        media,\n        srcSet: image.images.fallback.srcSet,\n      }\n    )\n\n    if (!output.placeholder) {\n      return\n    }\n\n    output.placeholder.sources.push({\n      media,\n      srcSet: image.placeholder.fallback,\n    })\n  })\n  output.images.sources.push(...images.sources)\n  if (placeholder?.sources) {\n    output.placeholder?.sources.push(...placeholder.sources)\n  }\n  return output\n}\n","import React, { Fragment, FunctionComponent, PropsWithChildren } from \"react\"\nimport terserMacro from \"../../macros/terser.macro\"\nimport { Layout } from \"../image-utils\"\n\nexport interface ILayoutWrapperProps {\n  layout: Layout\n  width: number\n  height: number\n}\n\nconst NativeScriptLoading: FunctionComponent = () => (\n  <script\n    type=\"module\"\n    dangerouslySetInnerHTML={{\n      __html: terserMacro`\nconst hasNativeLazyLoadSupport = typeof HTMLImageElement !== \"undefined\" && \"loading\" in HTMLImageElement.prototype;\nif (hasNativeLazyLoadSupport) {\n  const gatsbyImages = document.querySelectorAll('img[data-main-image]');\n  for (let mainImage of gatsbyImages) {\n    if (mainImage.dataset.src) {\n      mainImage.setAttribute('src', mainImage.dataset.src)\n      mainImage.removeAttribute('data-src')\n    }\n    if (mainImage.dataset.srcset) {\n      mainImage.setAttribute('srcset', mainImage.dataset.srcset)\n      mainImage.removeAttribute('data-srcset')\n    }\n\n    const sources = mainImage.parentNode.querySelectorAll('source[data-srcset]');\n    for (let source of sources) {\n      source.setAttribute('srcset', source.dataset.srcset)\n      source.removeAttribute('data-srcset')\n    }\n\n    if (mainImage.complete) {\n      mainImage.style.opacity = 1;\n\n      // also hide the placeholder\n      mainImage.parentNode.parentNode.querySelector('[data-placeholder-image]').style.opacity = 0;\n    }\n  }\n}\n`,\n    }}\n  />\n)\n\nexport function getSizer(\n  layout: Layout,\n  width: number,\n  height: number\n): string {\n  let sizer = ``\n  if (layout === `fullWidth`) {\n    sizer = `<div aria-hidden=\"true\" style=\"padding-top: ${\n      (height / width) * 100\n    }%;\"></div>`\n  }\n\n  if (layout === `constrained`) {\n    sizer = `<div style=\"max-width: ${width}px; display: block;\"><img alt=\"\" role=\"presentation\" aria-hidden=\"true\" src=\"data:image/svg+xml;charset=utf-8,%3Csvg%20height='${height}'%20width='${width}'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%3E%3C/svg%3E\" style=\"max-width: 100%; display: block; position: static;\"></div>`\n  }\n\n  return sizer\n}\n\nconst Sizer: FunctionComponent<ILayoutWrapperProps> = function Sizer({\n  layout,\n  width,\n  height,\n}) {\n  if (layout === `fullWidth`) {\n    return (\n      <div aria-hidden style={{ paddingTop: `${(height / width) * 100}%` }} />\n    )\n  }\n\n  if (layout === `constrained`) {\n    return (\n      <div style={{ maxWidth: width, display: `block` }}>\n        <img\n          alt=\"\"\n          role=\"presentation\"\n          aria-hidden=\"true\"\n          src={`data:image/svg+xml;charset=utf-8,%3Csvg%20height='${height}'%20width='${width}'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%3E%3C/svg%3E`}\n          style={{\n            maxWidth: `100%`,\n            display: `block`,\n            position: `static`,\n          }}\n        />\n      </div>\n    )\n  }\n\n  return null\n}\n\nexport const LayoutWrapper: FunctionComponent<\n  PropsWithChildren<ILayoutWrapperProps>\n> = function LayoutWrapper({ children, ...props }) {\n  return (\n    <Fragment>\n      <Sizer {...props} />\n      {children}\n\n      {SERVER ? <NativeScriptLoading /> : null}\n    </Fragment>\n  )\n}\n","import React, { FunctionComponent, ImgHTMLAttributes } from \"react\"\nimport * as PropTypes from \"prop-types\"\n\nexport interface IResponsiveImageProps {\n  sizes?: string\n  srcSet: string\n}\n\nexport type SourceProps = IResponsiveImageProps &\n  (\n    | {\n        media: string\n        type?: string\n      }\n    | {\n        media?: string\n        type: string\n      }\n  )\n\ntype FallbackProps = { src: string } & Partial<IResponsiveImageProps>\n\ntype ImageProps = ImgHTMLAttributes<HTMLImageElement> & {\n  src: string\n  alt: string\n  shouldLoad: boolean\n}\n\nexport type PictureProps = ImgHTMLAttributes<HTMLImageElement> & {\n  fallback?: FallbackProps\n  sources?: Array<SourceProps>\n  alt: string\n  shouldLoad?: boolean\n}\n\nconst Image: FunctionComponent<ImageProps> = function Image({\n  src,\n  srcSet,\n  loading,\n  alt = ``,\n  shouldLoad,\n  ...props\n}) {\n  return (\n    <img\n      {...props}\n      decoding=\"async\"\n      loading={loading}\n      src={shouldLoad ? src : undefined}\n      data-src={!shouldLoad ? src : undefined}\n      srcSet={shouldLoad ? srcSet : undefined}\n      data-srcset={!shouldLoad ? srcSet : undefined}\n      alt={alt}\n    />\n  )\n}\n\nexport const Picture: React.FC<PictureProps> = function Picture({\n  fallback,\n  sources = [],\n  shouldLoad = true,\n  ...props\n}) {\n  const sizes = props.sizes || fallback?.sizes\n  const fallbackImage = (\n    <Image {...props} {...fallback} sizes={sizes} shouldLoad={shouldLoad} />\n  )\n\n  if (!sources.length) {\n    return fallbackImage\n  }\n\n  return (\n    <picture>\n      {sources.map(({ media, srcSet, type }) => (\n        <source\n          key={`${media}-${type}-${srcSet}`}\n          type={type}\n          media={media}\n          srcSet={shouldLoad ? srcSet : undefined}\n          data-srcset={!shouldLoad ? srcSet : undefined}\n          sizes={sizes}\n        />\n      ))}\n      {fallbackImage}\n    </picture>\n  )\n}\n\nImage.propTypes = {\n  src: PropTypes.string.isRequired,\n  alt: PropTypes.string.isRequired,\n  sizes: PropTypes.string,\n  srcSet: PropTypes.string,\n  shouldLoad: PropTypes.bool,\n}\n\nPicture.displayName = `Picture`\nPicture.propTypes = {\n  alt: PropTypes.string.isRequired,\n  shouldLoad: PropTypes.bool,\n  fallback: PropTypes.exact({\n    src: PropTypes.string.isRequired,\n    srcSet: PropTypes.string,\n    sizes: PropTypes.string,\n  }),\n  sources: PropTypes.arrayOf(\n    PropTypes.oneOfType([\n      PropTypes.exact({\n        media: PropTypes.string.isRequired,\n        type: PropTypes.string,\n        sizes: PropTypes.string,\n        srcSet: PropTypes.string.isRequired,\n      }),\n      PropTypes.exact({\n        media: PropTypes.string,\n        type: PropTypes.string.isRequired,\n        sizes: PropTypes.string,\n        srcSet: PropTypes.string.isRequired,\n      }),\n    ])\n  ),\n}\n","import React, { FunctionComponent, ImgHTMLAttributes } from \"react\"\nimport * as PropTypes from \"prop-types\"\nimport { Picture, SourceProps } from \"./picture\"\n\nexport type PlaceholderProps = ImgHTMLAttributes<HTMLImageElement> & {\n  fallback?: string\n  sources?: Array<SourceProps>\n}\n\nexport const Placeholder: FunctionComponent<PlaceholderProps> =\n  function Placeholder({ fallback, ...props }) {\n    if (fallback) {\n      return (\n        <Picture\n          {...props}\n          fallback={{\n            src: fallback,\n          }}\n          aria-hidden\n          alt=\"\"\n        />\n      )\n    } else {\n      return <div {...props}></div>\n    }\n  }\n\nPlaceholder.displayName = `Placeholder`\nPlaceholder.propTypes = {\n  fallback: PropTypes.string,\n  sources: Picture.propTypes?.sources,\n  alt: function (props, propName, componentName): Error | null {\n    if (!props[propName]) {\n      return null\n    }\n\n    return new Error(\n      `Invalid prop \\`${propName}\\` supplied to \\`${componentName}\\`. Validation failed.`\n    )\n  },\n}\n","import React from \"react\"\nimport { Picture, PictureProps } from \"./picture\"\n\nexport type MainImageProps = PictureProps\n\nexport const MainImage: React.FC<PictureProps> = function MainImage(props) {\n  return (\n    <>\n      <Picture {...props} />\n      <noscript>\n        <Picture {...props} shouldLoad={true} />\n      </noscript>\n    </>\n  )\n}\n\nMainImage.displayName = `MainImage`\nMainImage.propTypes = Picture.propTypes\n","import React from \"react\"\nimport { getWrapperProps, getMainProps, getPlaceholderProps } from \"./hooks\"\nimport { Placeholder } from \"./placeholder\"\nimport { MainImage, MainImageProps } from \"./main-image\"\nimport { LayoutWrapper } from \"./layout-wrapper\"\nimport PropTypes from \"prop-types\"\nimport type { FunctionComponent, WeakValidationMap } from \"react\"\nimport type { GatsbyImageProps, IGatsbyImageData } from \"./gatsby-image.browser\"\n\nconst removeNewLines = (str: string): string => str.replace(/\\n/g, ``)\n\nexport const GatsbyImage: FunctionComponent<GatsbyImageProps> =\n  function GatsbyImage({\n    as = `div`,\n    className,\n    class: preactClass,\n    style,\n    image,\n    loading = `lazy`,\n    imgClassName,\n    imgStyle,\n    backgroundColor,\n    objectFit,\n    objectPosition,\n    ...props\n  }) {\n    if (!image) {\n      console.warn(`[gatsby-plugin-image] Missing image prop`)\n      return null\n    }\n\n    if (preactClass) {\n      className = preactClass\n    }\n\n    imgStyle = {\n      objectFit,\n      objectPosition,\n      backgroundColor,\n      ...imgStyle,\n    }\n\n    const {\n      width,\n      height,\n      layout,\n      images,\n      placeholder,\n      backgroundColor: placeholderBackgroundColor,\n    } = image\n\n    const {\n      style: wStyle,\n      className: wClass,\n      ...wrapperProps\n    } = getWrapperProps(width, height, layout)\n\n    const cleanedImages: IGatsbyImageData[\"images\"] = {\n      fallback: undefined,\n      sources: [],\n    }\n    if (images.fallback) {\n      cleanedImages.fallback = {\n        ...images.fallback,\n        srcSet: images.fallback.srcSet\n          ? removeNewLines(images.fallback.srcSet)\n          : undefined,\n      }\n    }\n\n    if (images.sources) {\n      cleanedImages.sources = images.sources.map(source => {\n        return {\n          ...source,\n          srcSet: removeNewLines(source.srcSet),\n        }\n      })\n    }\n\n    return React.createElement(\n      as,\n      {\n        ...wrapperProps,\n        style: {\n          ...wStyle,\n          ...style,\n          backgroundColor,\n        },\n        className: `${wClass}${className ? ` ${className}` : ``}`,\n      },\n      <LayoutWrapper layout={layout} width={width} height={height}>\n        <Placeholder\n          {...getPlaceholderProps(\n            placeholder,\n            false,\n            layout,\n            width,\n            height,\n            placeholderBackgroundColor,\n            objectFit,\n            objectPosition\n          )}\n        />\n\n        <MainImage\n          data-gatsby-image-ssr=\"\"\n          className={imgClassName}\n          {...(props as Omit<\n            MainImageProps,\n            \"images\" | \"fallback\" | \"onError\" | \"onLoad\"\n          >)}\n          // When eager is set we want to start the isLoading state on true (we want to load the img without react)\n          {...getMainProps(\n            loading === `eager`,\n            false,\n            cleanedImages,\n            loading,\n            imgStyle\n          )}\n        />\n      </LayoutWrapper>\n    )\n  }\n\nexport const altValidator: PropTypes.Validator<string> = (\n  props: GatsbyImageProps,\n  propName,\n  componentName,\n  ...rest\n): Error | undefined => {\n  if (!props.alt && props.alt !== ``) {\n    return new Error(\n      `The \"alt\" prop is required in ${componentName}. If the image is purely presentational then pass an empty string: e.g. alt=\"\". Learn more: https://a11y-style-guide.com/style-guide/section-media.html`\n    )\n  }\n\n  return PropTypes.string(props, propName, componentName, ...rest)\n}\n\nexport const propTypes = {\n  image: PropTypes.object.isRequired,\n  alt: altValidator,\n} as WeakValidationMap<GatsbyImageProps>\n","import {\n  createElement,\n  memo,\n  useMemo,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n} from \"react\"\nimport {\n  getWrapperProps,\n  gatsbyImageIsInstalled,\n  hasNativeLazyLoadSupport,\n} from \"./hooks\"\nimport { getSizer } from \"./layout-wrapper\"\nimport { propTypes } from \"./gatsby-image.server\"\nimport type {\n  FC,\n  ElementType,\n  FunctionComponent,\n  ImgHTMLAttributes,\n  CSSProperties,\n  ReactEventHandler,\n} from \"react\"\nimport type { renderImageToString } from \"./lazy-hydrate\"\nimport type { PlaceholderProps } from \"./placeholder\"\nimport type { MainImageProps } from \"./main-image\"\nimport type { Layout } from \"../image-utils\"\n\nconst imageCache = new Set<string>()\nlet renderImageToStringPromise\nlet renderImage: typeof renderImageToString | undefined\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport interface GatsbyImageProps\n  extends Omit<\n    ImgHTMLAttributes<HTMLImageElement>,\n    \"placeholder\" | \"onLoad\" | \"src\" | \"srcSet\" | \"width\" | \"height\"\n  > {\n  alt: string\n  as?: ElementType\n  className?: string\n  class?: string\n  imgClassName?: string\n  image: IGatsbyImageData\n  imgStyle?: CSSProperties\n  backgroundColor?: string\n  objectFit?: CSSProperties[\"objectFit\"]\n  objectPosition?: CSSProperties[\"objectPosition\"]\n  onLoad?: (props: { wasCached: boolean }) => void\n  onError?: ReactEventHandler<HTMLImageElement>\n  onStartLoad?: (props: { wasCached: boolean }) => void\n}\n\nexport interface IGatsbyImageData {\n  layout: Layout\n  width: number\n  height: number\n  backgroundColor?: string\n  images: Pick<MainImageProps, \"sources\" | \"fallback\">\n  placeholder?: Pick<PlaceholderProps, \"sources\" | \"fallback\">\n}\n\nconst GatsbyImageHydrator: FC<GatsbyImageProps> = function GatsbyImageHydrator({\n  as = `div`,\n  image,\n  style,\n  backgroundColor,\n  className,\n  class: preactClass,\n  onStartLoad,\n  onLoad,\n  onError,\n  ...props\n}) {\n  const { width, height, layout } = image\n  const {\n    style: wStyle,\n    className: wClass,\n    ...wrapperProps\n  } = getWrapperProps(width, height, layout)\n  const root = useRef<HTMLElement>()\n  const cacheKey = useMemo(() => JSON.stringify(image.images), [image.images])\n\n  // Preact uses class instead of className so we need to check for both\n  if (preactClass) {\n    className = preactClass\n  }\n\n  const sizer = getSizer(layout, width, height)\n\n  useEffect(() => {\n    if (!renderImageToStringPromise) {\n      renderImageToStringPromise = import(`./lazy-hydrate`).then(\n        ({ renderImageToString, swapPlaceholderImage }) => {\n          renderImage = renderImageToString\n\n          return {\n            renderImageToString,\n            swapPlaceholderImage,\n          }\n        }\n      )\n    }\n\n    // The plugin image component is a bit special where if it's server-side rendered, we add extra script tags to support lazy-loading without\n    // In this case we stop hydration but fire the correct events.\n    const ssrImage = root.current.querySelector(\n      `[data-gatsby-image-ssr]`\n    ) as HTMLImageElement\n    if (ssrImage && hasNativeLazyLoadSupport()) {\n      if (ssrImage.complete) {\n        // Trigger onStartload and onLoad events\n        onStartLoad?.({\n          wasCached: true,\n        })\n        onLoad?.({\n          wasCached: true,\n        })\n\n        // remove ssr key for state updates but add delay to not fight with native code snippt of gatsby-ssr\n        setTimeout(() => {\n          ssrImage.removeAttribute(`data-gatsby-image-ssr`)\n        }, 0)\n      } else {\n        onStartLoad?.({\n          wasCached: true,\n        })\n\n        ssrImage.addEventListener(`load`, function onLoadListener() {\n          ssrImage.removeEventListener(`load`, onLoadListener)\n\n          onLoad?.({\n            wasCached: true,\n          })\n          // remove ssr key for state updates but add delay to not fight with native code snippt of gatsby-ssr\n          setTimeout(() => {\n            ssrImage.removeAttribute(`data-gatsby-image-ssr`)\n          }, 0)\n        })\n      }\n\n      imageCache.add(cacheKey)\n\n      return\n    }\n\n    if (renderImage && imageCache.has(cacheKey)) {\n      return\n    }\n\n    let animationFrame\n    let cleanupCallback\n    renderImageToStringPromise.then(\n      ({ renderImageToString, swapPlaceholderImage }) => {\n        if (!root.current) {\n          return\n        }\n\n        root.current.innerHTML = renderImageToString({\n          isLoading: true,\n          isLoaded: imageCache.has(cacheKey),\n          image,\n          ...props,\n        })\n\n        if (!imageCache.has(cacheKey)) {\n          animationFrame = requestAnimationFrame(() => {\n            if (root.current) {\n              cleanupCallback = swapPlaceholderImage(\n                root.current,\n                cacheKey,\n                imageCache,\n                style,\n                onStartLoad,\n                onLoad,\n                onError\n              )\n            }\n          })\n        }\n      }\n    )\n\n    // eslint-disable-next-line consistent-return\n    return (): void => {\n      if (animationFrame) {\n        cancelAnimationFrame(animationFrame)\n      }\n      if (cleanupCallback) {\n        cleanupCallback()\n      }\n    }\n  }, [image])\n\n  // useLayoutEffect is ran before React commits to the DOM. This allows us to make sure our HTML is using our cached image version\n  useLayoutEffect(() => {\n    if (imageCache.has(cacheKey) && renderImage) {\n      root.current.innerHTML = renderImage({\n        isLoading: imageCache.has(cacheKey),\n        isLoaded: imageCache.has(cacheKey),\n        image,\n        ...props,\n      })\n\n      // Trigger onStartload and onLoad events\n      onStartLoad?.({\n        wasCached: true,\n      })\n      onLoad?.({\n        wasCached: true,\n      })\n    }\n  }, [image])\n\n  // By keeping all props equal React will keep the component in the DOM\n  return createElement(as, {\n    ...wrapperProps,\n    style: {\n      ...wStyle,\n      ...style,\n      backgroundColor,\n    },\n    className: `${wClass}${className ? ` ${className}` : ``}`,\n    ref: root,\n    dangerouslySetInnerHTML: {\n      __html: sizer,\n    },\n    suppressHydrationWarning: true,\n  })\n}\n\nexport const GatsbyImage: FunctionComponent<GatsbyImageProps> = memo(\n  function GatsbyImage(props) {\n    if (!props.image) {\n      if (process.env.NODE_ENV === `development`) {\n        console.warn(`[gatsby-plugin-image] Missing image prop`)\n      }\n\n      return null\n    }\n\n    if (!gatsbyImageIsInstalled() && process.env.NODE_ENV === `development`) {\n      console.warn(\n        `[gatsby-plugin-image] You're missing out on some cool performance features. Please add \"gatsby-plugin-image\" to your gatsby-config.js`\n      )\n    }\n\n    return createElement(GatsbyImageHydrator, props)\n  }\n)\n\nGatsbyImage.propTypes = propTypes\nGatsbyImage.displayName = `GatsbyImage`\n","import React, { FunctionComponent, ReactElement } from \"react\"\nimport {\n  altValidator,\n  GatsbyImage as GatsbyImageServer,\n} from \"./gatsby-image.server\"\nimport { GatsbyImageProps, IGatsbyImageData } from \"./gatsby-image.browser\"\nimport PropTypes from \"prop-types\"\nimport { ISharpGatsbyImageArgs } from \"../image-utils\"\n\nexport interface IStaticImageProps\n  extends Omit<GatsbyImageProps, \"image\">,\n    Omit<ISharpGatsbyImageArgs, \"backgroundColor\"> {\n  src: string\n  filename?: string\n}\n\n// These values are added by Babel. Do not add them manually\ninterface IPrivateProps {\n  __imageData?: IGatsbyImageData\n  __error?: string\n}\n\nexport function _getStaticImage(\n  GatsbyImage: FunctionComponent<GatsbyImageProps>\n): React.FC<IStaticImageProps & IPrivateProps> {\n  return function StaticImage({\n    src,\n    __imageData: imageData,\n    __error,\n    // We extract these because they're not meant to be passed-down to GatsbyImage\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    width,\n    height,\n    aspectRatio,\n    tracedSVGOptions,\n    placeholder,\n    formats,\n    quality,\n    transformOptions,\n    jpgOptions,\n    pngOptions,\n    webpOptions,\n    avifOptions,\n    blurredOptions,\n    breakpoints,\n    outputPixelDensities,\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    ...props\n  }): ReactElement {\n    if (__error) {\n      console.warn(__error)\n    }\n\n    if (imageData) {\n      return <GatsbyImage image={imageData} {...props} />\n    }\n    console.warn(`Image not loaded`, src)\n    if (!__error && process.env.NODE_ENV === `development`) {\n      console.warn(\n        `Please ensure that \"gatsby-plugin-image\" is included in the plugins array in gatsby-config.js, and that your version of gatsby is at least 2.24.78`\n      )\n    }\n    return null\n  }\n}\n\nconst StaticImage: React.FC<IStaticImageProps & IPrivateProps> =\n  _getStaticImage(GatsbyImageServer)\n\nconst checkDimensionProps: PropTypes.Validator<number> = (\n  props: IStaticImageProps & IPrivateProps,\n  propName: keyof IStaticImageProps & IPrivateProps,\n  ...rest\n) => {\n  if (\n    props.layout === `fullWidth` &&\n    (propName === `width` || propName === `height`) &&\n    props[propName]\n  ) {\n    return new Error(\n      `\"${propName}\" ${props[propName]} may not be passed when layout is fullWidth.`\n    )\n  }\n  return PropTypes.number(props, propName, ...rest)\n}\n\nconst validLayouts = new Set([`fixed`, `fullWidth`, `constrained`])\n\nexport const propTypes = {\n  src: PropTypes.string.isRequired,\n  alt: altValidator,\n  width: checkDimensionProps,\n  height: checkDimensionProps,\n  sizes: PropTypes.string,\n  layout: (props: IStaticImageProps & IPrivateProps): Error | undefined => {\n    if (props.layout === undefined) {\n      return undefined\n    }\n    if (validLayouts.has(props.layout)) {\n      return undefined\n    }\n\n    return new Error(\n      `Invalid value ${props.layout}\" provided for prop \"layout\". Defaulting to \"constrained\". Valid values are \"fixed\", \"fullWidth\" or \"constrained\".`\n    )\n  },\n}\n\nStaticImage.displayName = `StaticImage`\nStaticImage.propTypes = propTypes\n\nexport { StaticImage }\n","import {\n  GatsbyImage as GatsbyImageBrowser,\n  IGatsbyImageData,\n} from \"./gatsby-image.browser\"\nimport React from \"react\"\nimport {\n  _getStaticImage,\n  propTypes,\n  IStaticImageProps,\n} from \"./static-image.server\"\n// These values are added by Babel. Do not add them manually\ninterface IPrivateProps {\n  __imageData?: IGatsbyImageData\n  __error?: string\n}\n\nconst StaticImage: React.FC<IStaticImageProps & IPrivateProps> =\n  _getStaticImage(GatsbyImageBrowser)\n\nStaticImage.displayName = `StaticImage`\nStaticImage.propTypes = propTypes\n\nexport { StaticImage }\n","import { useState } from 'react';\r\nimport React from 'react';\r\n\r\n/**\r\n * allContent is expected to be an array of objects with title and content\r\n *    properties.\r\n */\r\nconst Tabs = ({allContent = [{title: 'default'}]}) => {\r\n  const [nameOfActiveTab, setNameOfActiveTab] = useState(allContent[0].title);\r\n  Tabs.buttonAmount ??= 0; // for keys\r\n\r\n  return (\r\n    <div className='tabsContainer'>\r\n      <nav>\r\n        {\r\n          allContent.map((content, index) => {\r\n                Tabs.buttonAmount++;\r\n                return <button\r\n                        className={nameOfActiveTab === content.title ? 'activeTab' : 'inactiveTab'}\r\n                        key={`${content.title}${index}${Tabs.buttonAmount}`}\r\n                        onClick={() => setNameOfActiveTab(content.title)}>\r\n                      {content.title}\r\n                    </button>\r\n              })\r\n        }\r\n      </nav>\r\n      <main>\r\n        {\r\n          allContent.filter(content => content.title === nameOfActiveTab)\r\n              .map(content => content.content)\r\n        }\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Tabs;\r\n","import {\n\tBufferAttribute,\n\tBufferGeometry,\n\tFloat32BufferAttribute,\n\tInstancedBufferAttribute,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tTrianglesDrawMode,\n\tVector3,\n} from 'three';\n\nfunction computeMikkTSpaceTangents( geometry, MikkTSpace, negateSign = true ) {\n\n\tif ( ! MikkTSpace || ! MikkTSpace.isReady ) {\n\n\t\tthrow new Error( 'BufferGeometryUtils: Initialized MikkTSpace library required.' );\n\n\t}\n\n\tif ( ! geometry.hasAttribute( 'position' ) || ! geometry.hasAttribute( 'normal' ) || ! geometry.hasAttribute( 'uv' ) ) {\n\n\t\tthrow new Error( 'BufferGeometryUtils: Tangents require \"position\", \"normal\", and \"uv\" attributes.' );\n\n\t}\n\n\tfunction getAttributeArray( attribute ) {\n\n\t\tif ( attribute.normalized || attribute.isInterleavedBufferAttribute ) {\n\n\t\t\tconst dstArray = new Float32Array( attribute.count * attribute.itemSize );\n\n\t\t\tfor ( let i = 0, j = 0; i < attribute.count; i ++ ) {\n\n\t\t\t\tdstArray[ j ++ ] = attribute.getX( i );\n\t\t\t\tdstArray[ j ++ ] = attribute.getY( i );\n\n\t\t\t\tif ( attribute.itemSize > 2 ) {\n\n\t\t\t\t\tdstArray[ j ++ ] = attribute.getZ( i );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn dstArray;\n\n\t\t}\n\n\t\tif ( attribute.array instanceof Float32Array ) {\n\n\t\t\treturn attribute.array;\n\n\t\t}\n\n\t\treturn new Float32Array( attribute.array );\n\n\t}\n\n\t// MikkTSpace algorithm requires non-indexed input.\n\n\tconst _geometry = geometry.index ? geometry.toNonIndexed() : geometry;\n\n\t// Compute vertex tangents.\n\n\tconst tangents = MikkTSpace.generateTangents(\n\n\t\tgetAttributeArray( _geometry.attributes.position ),\n\t\tgetAttributeArray( _geometry.attributes.normal ),\n\t\tgetAttributeArray( _geometry.attributes.uv )\n\n\t);\n\n\t// Texture coordinate convention of glTF differs from the apparent\n\t// default of the MikkTSpace library; .w component must be flipped.\n\n\tif ( negateSign ) {\n\n\t\tfor ( let i = 3; i < tangents.length; i += 4 ) {\n\n\t\t\ttangents[ i ] *= - 1;\n\n\t\t}\n\n\t}\n\n\t//\n\n\t_geometry.setAttribute( 'tangent', new BufferAttribute( tangents, 4 ) );\n\n\tif ( geometry !== _geometry ) {\n\n\t\tgeometry.copy( _geometry );\n\n\t}\n\n\treturn geometry;\n\n}\n\n/**\n * @param  {Array<BufferGeometry>} geometries\n * @param  {Boolean} useGroups\n * @return {BufferGeometry}\n */\nfunction mergeGeometries( geometries, useGroups = false ) {\n\n\tconst isIndexed = geometries[ 0 ].index !== null;\n\n\tconst attributesUsed = new Set( Object.keys( geometries[ 0 ].attributes ) );\n\tconst morphAttributesUsed = new Set( Object.keys( geometries[ 0 ].morphAttributes ) );\n\n\tconst attributes = {};\n\tconst morphAttributes = {};\n\n\tconst morphTargetsRelative = geometries[ 0 ].morphTargetsRelative;\n\n\tconst mergedGeometry = new BufferGeometry();\n\n\tlet offset = 0;\n\n\tfor ( let i = 0; i < geometries.length; ++ i ) {\n\n\t\tconst geometry = geometries[ i ];\n\t\tlet attributesCount = 0;\n\n\t\t// ensure that all geometries are indexed, or none\n\n\t\tif ( isIndexed !== ( geometry.index !== null ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// gather attributes, exit early if they're different\n\n\t\tfor ( const name in geometry.attributes ) {\n\n\t\t\tif ( ! attributesUsed.has( name ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. All geometries must have compatible attributes; make sure \"' + name + '\" attribute exists among all geometries, or in none of them.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif ( attributes[ name ] === undefined ) attributes[ name ] = [];\n\n\t\t\tattributes[ name ].push( geometry.attributes[ name ] );\n\n\t\t\tattributesCount ++;\n\n\t\t}\n\n\t\t// ensure geometries have the same number of attributes\n\n\t\tif ( attributesCount !== attributesUsed.size ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. Make sure all geometries have the same number of attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// gather morph attributes, exit early if they're different\n\n\t\tif ( morphTargetsRelative !== geometry.morphTargetsRelative ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. .morphTargetsRelative must be consistent throughout all geometries.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tfor ( const name in geometry.morphAttributes ) {\n\n\t\t\tif ( ! morphAttributesUsed.has( name ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '.  .morphAttributes must be consistent throughout all geometries.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif ( morphAttributes[ name ] === undefined ) morphAttributes[ name ] = [];\n\n\t\t\tmorphAttributes[ name ].push( geometry.morphAttributes[ name ] );\n\n\t\t}\n\n\t\tif ( useGroups ) {\n\n\t\t\tlet count;\n\n\t\t\tif ( isIndexed ) {\n\n\t\t\t\tcount = geometry.index.count;\n\n\t\t\t} else if ( geometry.attributes.position !== undefined ) {\n\n\t\t\t\tcount = geometry.attributes.position.count;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. The geometry must have either an index or a position attribute' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tmergedGeometry.addGroup( offset, count, i );\n\n\t\t\toffset += count;\n\n\t\t}\n\n\t}\n\n\t// merge indices\n\n\tif ( isIndexed ) {\n\n\t\tlet indexOffset = 0;\n\t\tconst mergedIndex = [];\n\n\t\tfor ( let i = 0; i < geometries.length; ++ i ) {\n\n\t\t\tconst index = geometries[ i ].index;\n\n\t\t\tfor ( let j = 0; j < index.count; ++ j ) {\n\n\t\t\t\tmergedIndex.push( index.getX( j ) + indexOffset );\n\n\t\t\t}\n\n\t\t\tindexOffset += geometries[ i ].attributes.position.count;\n\n\t\t}\n\n\t\tmergedGeometry.setIndex( mergedIndex );\n\n\t}\n\n\t// merge attributes\n\n\tfor ( const name in attributes ) {\n\n\t\tconst mergedAttribute = mergeAttributes( attributes[ name ] );\n\n\t\tif ( ! mergedAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the ' + name + ' attribute.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tmergedGeometry.setAttribute( name, mergedAttribute );\n\n\t}\n\n\t// merge morph attributes\n\n\tfor ( const name in morphAttributes ) {\n\n\t\tconst numMorphTargets = morphAttributes[ name ][ 0 ].length;\n\n\t\tif ( numMorphTargets === 0 ) break;\n\n\t\tmergedGeometry.morphAttributes = mergedGeometry.morphAttributes || {};\n\t\tmergedGeometry.morphAttributes[ name ] = [];\n\n\t\tfor ( let i = 0; i < numMorphTargets; ++ i ) {\n\n\t\t\tconst morphAttributesToMerge = [];\n\n\t\t\tfor ( let j = 0; j < morphAttributes[ name ].length; ++ j ) {\n\n\t\t\t\tmorphAttributesToMerge.push( morphAttributes[ name ][ j ][ i ] );\n\n\t\t\t}\n\n\t\t\tconst mergedMorphAttribute = mergeAttributes( morphAttributesToMerge );\n\n\t\t\tif ( ! mergedMorphAttribute ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the ' + name + ' morphAttribute.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tmergedGeometry.morphAttributes[ name ].push( mergedMorphAttribute );\n\n\t\t}\n\n\t}\n\n\treturn mergedGeometry;\n\n}\n\n/**\n * @param {Array<BufferAttribute>} attributes\n * @return {BufferAttribute}\n */\nfunction mergeAttributes( attributes ) {\n\n\tlet TypedArray;\n\tlet itemSize;\n\tlet normalized;\n\tlet gpuType = - 1;\n\tlet arrayLength = 0;\n\n\tfor ( let i = 0; i < attributes.length; ++ i ) {\n\n\t\tconst attribute = attributes[ i ];\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. InterleavedBufferAttributes are not supported.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\n\t\tif ( TypedArray !== attribute.array.constructor ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( itemSize === undefined ) itemSize = attribute.itemSize;\n\t\tif ( itemSize !== attribute.itemSize ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( normalized === undefined ) normalized = attribute.normalized;\n\t\tif ( normalized !== attribute.normalized ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( gpuType === - 1 ) gpuType = attribute.gpuType;\n\t\tif ( gpuType !== attribute.gpuType ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tarrayLength += attribute.array.length;\n\n\t}\n\n\tconst array = new TypedArray( arrayLength );\n\tlet offset = 0;\n\n\tfor ( let i = 0; i < attributes.length; ++ i ) {\n\n\t\tarray.set( attributes[ i ].array, offset );\n\n\t\toffset += attributes[ i ].array.length;\n\n\t}\n\n\tconst result = new BufferAttribute( array, itemSize, normalized );\n\tif ( gpuType !== undefined ) {\n\n\t\tresult.gpuType = gpuType;\n\n\t}\n\n\treturn result;\n\n}\n\n/**\n * @param {BufferAttribute}\n * @return {BufferAttribute}\n */\nexport function deepCloneAttribute( attribute ) {\n\n\tif ( attribute.isInstancedInterleavedBufferAttribute || attribute.isInterleavedBufferAttribute ) {\n\n\t\treturn deinterleaveAttribute( attribute );\n\n\t}\n\n\tif ( attribute.isInstancedBufferAttribute ) {\n\n\t\treturn new InstancedBufferAttribute().copy( attribute );\n\n\t}\n\n\treturn new BufferAttribute().copy( attribute );\n\n}\n\n/**\n * @param {Array<BufferAttribute>} attributes\n * @return {Array<InterleavedBufferAttribute>}\n */\nfunction interleaveAttributes( attributes ) {\n\n\t// Interleaves the provided attributes into an InterleavedBuffer and returns\n\t// a set of InterleavedBufferAttributes for each attribute\n\tlet TypedArray;\n\tlet arrayLength = 0;\n\tlet stride = 0;\n\n\t// calculate the length and type of the interleavedBuffer\n\tfor ( let i = 0, l = attributes.length; i < l; ++ i ) {\n\n\t\tconst attribute = attributes[ i ];\n\n\t\tif ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\n\t\tif ( TypedArray !== attribute.array.constructor ) {\n\n\t\t\tconsole.error( 'AttributeBuffers of different types cannot be interleaved' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tarrayLength += attribute.array.length;\n\t\tstride += attribute.itemSize;\n\n\t}\n\n\t// Create the set of buffer attributes\n\tconst interleavedBuffer = new InterleavedBuffer( new TypedArray( arrayLength ), stride );\n\tlet offset = 0;\n\tconst res = [];\n\tconst getters = [ 'getX', 'getY', 'getZ', 'getW' ];\n\tconst setters = [ 'setX', 'setY', 'setZ', 'setW' ];\n\n\tfor ( let j = 0, l = attributes.length; j < l; j ++ ) {\n\n\t\tconst attribute = attributes[ j ];\n\t\tconst itemSize = attribute.itemSize;\n\t\tconst count = attribute.count;\n\t\tconst iba = new InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, attribute.normalized );\n\t\tres.push( iba );\n\n\t\toffset += itemSize;\n\n\t\t// Move the data for each attribute into the new interleavedBuffer\n\t\t// at the appropriate offset\n\t\tfor ( let c = 0; c < count; c ++ ) {\n\n\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\n\n\t\t\t\tiba[ setters[ k ] ]( c, attribute[ getters[ k ] ]( c ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn res;\n\n}\n\n// returns a new, non-interleaved version of the provided attribute\nexport function deinterleaveAttribute( attribute ) {\n\n\tconst cons = attribute.data.array.constructor;\n\tconst count = attribute.count;\n\tconst itemSize = attribute.itemSize;\n\tconst normalized = attribute.normalized;\n\n\tconst array = new cons( count * itemSize );\n\tlet newAttribute;\n\tif ( attribute.isInstancedInterleavedBufferAttribute ) {\n\n\t\tnewAttribute = new InstancedBufferAttribute( array, itemSize, normalized, attribute.meshPerAttribute );\n\n\t} else {\n\n\t\tnewAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t}\n\n\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\tnewAttribute.setX( i, attribute.getX( i ) );\n\n\t\tif ( itemSize >= 2 ) {\n\n\t\t\tnewAttribute.setY( i, attribute.getY( i ) );\n\n\t\t}\n\n\t\tif ( itemSize >= 3 ) {\n\n\t\t\tnewAttribute.setZ( i, attribute.getZ( i ) );\n\n\t\t}\n\n\t\tif ( itemSize >= 4 ) {\n\n\t\t\tnewAttribute.setW( i, attribute.getW( i ) );\n\n\t\t}\n\n\t}\n\n\treturn newAttribute;\n\n}\n\n// deinterleaves all attributes on the geometry\nexport function deinterleaveGeometry( geometry ) {\n\n\tconst attributes = geometry.attributes;\n\tconst morphTargets = geometry.morphTargets;\n\tconst attrMap = new Map();\n\n\tfor ( const key in attributes ) {\n\n\t\tconst attr = attributes[ key ];\n\t\tif ( attr.isInterleavedBufferAttribute ) {\n\n\t\t\tif ( ! attrMap.has( attr ) ) {\n\n\t\t\t\tattrMap.set( attr, deinterleaveAttribute( attr ) );\n\n\t\t\t}\n\n\t\t\tattributes[ key ] = attrMap.get( attr );\n\n\t\t}\n\n\t}\n\n\tfor ( const key in morphTargets ) {\n\n\t\tconst attr = morphTargets[ key ];\n\t\tif ( attr.isInterleavedBufferAttribute ) {\n\n\t\t\tif ( ! attrMap.has( attr ) ) {\n\n\t\t\t\tattrMap.set( attr, deinterleaveAttribute( attr ) );\n\n\t\t\t}\n\n\t\t\tmorphTargets[ key ] = attrMap.get( attr );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @return {number}\n */\nfunction estimateBytesUsed( geometry ) {\n\n\t// Return the estimated memory used by this geometry in bytes\n\t// Calculate using itemSize, count, and BYTES_PER_ELEMENT to account\n\t// for InterleavedBufferAttributes.\n\tlet mem = 0;\n\tfor ( const name in geometry.attributes ) {\n\n\t\tconst attr = geometry.getAttribute( name );\n\t\tmem += attr.count * attr.itemSize * attr.array.BYTES_PER_ELEMENT;\n\n\t}\n\n\tconst indices = geometry.getIndex();\n\tmem += indices ? indices.count * indices.itemSize * indices.array.BYTES_PER_ELEMENT : 0;\n\treturn mem;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {number} tolerance\n * @return {BufferGeometry}\n */\nfunction mergeVertices( geometry, tolerance = 1e-4 ) {\n\n\ttolerance = Math.max( tolerance, Number.EPSILON );\n\n\t// Generate an index buffer if the geometry doesn't have one, or optimize it\n\t// if it's already available.\n\tconst hashToIndex = {};\n\tconst indices = geometry.getIndex();\n\tconst positions = geometry.getAttribute( 'position' );\n\tconst vertexCount = indices ? indices.count : positions.count;\n\n\t// next value for triangle indices\n\tlet nextIndex = 0;\n\n\t// attributes and new attribute arrays\n\tconst attributeNames = Object.keys( geometry.attributes );\n\tconst tmpAttributes = {};\n\tconst tmpMorphAttributes = {};\n\tconst newIndices = [];\n\tconst getters = [ 'getX', 'getY', 'getZ', 'getW' ];\n\tconst setters = [ 'setX', 'setY', 'setZ', 'setW' ];\n\n\t// Initialize the arrays, allocating space conservatively. Extra\n\t// space will be trimmed in the last step.\n\tfor ( let i = 0, l = attributeNames.length; i < l; i ++ ) {\n\n\t\tconst name = attributeNames[ i ];\n\t\tconst attr = geometry.attributes[ name ];\n\n\t\ttmpAttributes[ name ] = new BufferAttribute(\n\t\t\tnew attr.array.constructor( attr.count * attr.itemSize ),\n\t\t\tattr.itemSize,\n\t\t\tattr.normalized\n\t\t);\n\n\t\tconst morphAttr = geometry.morphAttributes[ name ];\n\t\tif ( morphAttr ) {\n\n\t\t\ttmpMorphAttributes[ name ] = new BufferAttribute(\n\t\t\t\tnew morphAttr.array.constructor( morphAttr.count * morphAttr.itemSize ),\n\t\t\t\tmorphAttr.itemSize,\n\t\t\t\tmorphAttr.normalized\n\t\t\t);\n\n\t\t}\n\n\t}\n\n\t// convert the error tolerance to an amount of decimal places to truncate to\n\tconst halfTolerance = tolerance * 0.5;\n\tconst exponent = Math.log10( 1 / tolerance );\n\tconst hashMultiplier = Math.pow( 10, exponent );\n\tconst hashAdditive = halfTolerance * hashMultiplier;\n\tfor ( let i = 0; i < vertexCount; i ++ ) {\n\n\t\tconst index = indices ? indices.getX( i ) : i;\n\n\t\t// Generate a hash for the vertex attributes at the current index 'i'\n\t\tlet hash = '';\n\t\tfor ( let j = 0, l = attributeNames.length; j < l; j ++ ) {\n\n\t\t\tconst name = attributeNames[ j ];\n\t\t\tconst attribute = geometry.getAttribute( name );\n\t\t\tconst itemSize = attribute.itemSize;\n\n\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\n\n\t\t\t\t// double tilde truncates the decimal value\n\t\t\t\thash += `${ ~ ~ ( attribute[ getters[ k ] ]( index ) * hashMultiplier + hashAdditive ) },`;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Add another reference to the vertex if it's already\n\t\t// used by another index\n\t\tif ( hash in hashToIndex ) {\n\n\t\t\tnewIndices.push( hashToIndex[ hash ] );\n\n\t\t} else {\n\n\t\t\t// copy data to the new index in the temporary attributes\n\t\t\tfor ( let j = 0, l = attributeNames.length; j < l; j ++ ) {\n\n\t\t\t\tconst name = attributeNames[ j ];\n\t\t\t\tconst attribute = geometry.getAttribute( name );\n\t\t\t\tconst morphAttr = geometry.morphAttributes[ name ];\n\t\t\t\tconst itemSize = attribute.itemSize;\n\t\t\t\tconst newarray = tmpAttributes[ name ];\n\t\t\t\tconst newMorphArrays = tmpMorphAttributes[ name ];\n\n\t\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\n\n\t\t\t\t\tconst getterFunc = getters[ k ];\n\t\t\t\t\tconst setterFunc = setters[ k ];\n\t\t\t\t\tnewarray[ setterFunc ]( nextIndex, attribute[ getterFunc ]( index ) );\n\n\t\t\t\t\tif ( morphAttr ) {\n\n\t\t\t\t\t\tfor ( let m = 0, ml = morphAttr.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\t\tnewMorphArrays[ m ][ setterFunc ]( nextIndex, morphAttr[ m ][ getterFunc ]( index ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\thashToIndex[ hash ] = nextIndex;\n\t\t\tnewIndices.push( nextIndex );\n\t\t\tnextIndex ++;\n\n\t\t}\n\n\t}\n\n\t// generate result BufferGeometry\n\tconst result = geometry.clone();\n\tfor ( const name in geometry.attributes ) {\n\n\t\tconst tmpAttribute = tmpAttributes[ name ];\n\n\t\tresult.setAttribute( name, new BufferAttribute(\n\t\t\ttmpAttribute.array.slice( 0, nextIndex * tmpAttribute.itemSize ),\n\t\t\ttmpAttribute.itemSize,\n\t\t\ttmpAttribute.normalized,\n\t\t) );\n\n\t\tif ( ! ( name in tmpMorphAttributes ) ) continue;\n\n\t\tfor ( let j = 0; j < tmpMorphAttributes[ name ].length; j ++ ) {\n\n\t\t\tconst tmpMorphAttribute = tmpMorphAttributes[ name ][ j ];\n\n\t\t\tresult.morphAttributes[ name ][ j ] = new BufferAttribute(\n\t\t\t\ttmpMorphAttribute.array.slice( 0, nextIndex * tmpMorphAttribute.itemSize ),\n\t\t\t\ttmpMorphAttribute.itemSize,\n\t\t\t\ttmpMorphAttribute.normalized,\n\t\t\t);\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tresult.setIndex( newIndices );\n\n\treturn result;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {number} drawMode\n * @return {BufferGeometry}\n */\nfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\tif ( drawMode === TrianglesDrawMode ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles.' );\n\t\treturn geometry;\n\n\t}\n\n\tif ( drawMode === TriangleFanDrawMode || drawMode === TriangleStripDrawMode ) {\n\n\t\tlet index = geometry.getIndex();\n\n\t\t// generate index if not present\n\n\t\tif ( index === null ) {\n\n\t\t\tconst indices = [];\n\n\t\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\t\tif ( position !== undefined ) {\n\n\t\t\t\tfor ( let i = 0; i < position.count; i ++ ) {\n\n\t\t\t\t\tindices.push( i );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setIndex( indices );\n\t\t\t\tindex = geometry.getIndex();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst numberOfTriangles = index.count - 2;\n\t\tconst newIndices = [];\n\n\t\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t\t// gl.TRIANGLE_FAN\n\n\t\t\tfor ( let i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// gl.TRIANGLE_STRIP\n\n\t\t\tfor ( let i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t\t}\n\n\t\t// build final geometry\n\n\t\tconst newGeometry = geometry.clone();\n\t\tnewGeometry.setIndex( newIndices );\n\t\tnewGeometry.clearGroups();\n\n\t\treturn newGeometry;\n\n\t} else {\n\n\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:', drawMode );\n\t\treturn geometry;\n\n\t}\n\n}\n\n/**\n * Calculates the morphed attributes of a morphed/skinned BufferGeometry.\n * Helpful for Raytracing or Decals.\n * @param {Mesh | Line | Points} object An instance of Mesh, Line or Points.\n * @return {Object} An Object with original position/normal attributes and morphed ones.\n */\nfunction computeMorphedAttributes( object ) {\n\n\tconst _vA = new Vector3();\n\tconst _vB = new Vector3();\n\tconst _vC = new Vector3();\n\n\tconst _tempA = new Vector3();\n\tconst _tempB = new Vector3();\n\tconst _tempC = new Vector3();\n\n\tconst _morphA = new Vector3();\n\tconst _morphB = new Vector3();\n\tconst _morphC = new Vector3();\n\n\tfunction _calculateMorphedAttributeData(\n\t\tobject,\n\t\tattribute,\n\t\tmorphAttribute,\n\t\tmorphTargetsRelative,\n\t\ta,\n\t\tb,\n\t\tc,\n\t\tmodifiedAttributeArray\n\t) {\n\n\t\t_vA.fromBufferAttribute( attribute, a );\n\t\t_vB.fromBufferAttribute( attribute, b );\n\t\t_vC.fromBufferAttribute( attribute, c );\n\n\t\tconst morphInfluences = object.morphTargetInfluences;\n\n\t\tif ( morphAttribute && morphInfluences ) {\n\n\t\t\t_morphA.set( 0, 0, 0 );\n\t\t\t_morphB.set( 0, 0, 0 );\n\t\t\t_morphC.set( 0, 0, 0 );\n\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tconst influence = morphInfluences[ i ];\n\t\t\t\tconst morph = morphAttribute[ i ];\n\n\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t_tempA.fromBufferAttribute( morph, a );\n\t\t\t\t_tempB.fromBufferAttribute( morph, b );\n\t\t\t\t_tempC.fromBufferAttribute( morph, c );\n\n\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t_morphA.addScaledVector( _tempA, influence );\n\t\t\t\t\t_morphB.addScaledVector( _tempB, influence );\n\t\t\t\t\t_morphC.addScaledVector( _tempC, influence );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA ), influence );\n\t\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB ), influence );\n\t\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC ), influence );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_vA.add( _morphA );\n\t\t\t_vB.add( _morphB );\n\t\t\t_vC.add( _morphC );\n\n\t\t}\n\n\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\tobject.applyBoneTransform( a, _vA );\n\t\t\tobject.applyBoneTransform( b, _vB );\n\t\t\tobject.applyBoneTransform( c, _vC );\n\n\t\t}\n\n\t\tmodifiedAttributeArray[ a * 3 + 0 ] = _vA.x;\n\t\tmodifiedAttributeArray[ a * 3 + 1 ] = _vA.y;\n\t\tmodifiedAttributeArray[ a * 3 + 2 ] = _vA.z;\n\t\tmodifiedAttributeArray[ b * 3 + 0 ] = _vB.x;\n\t\tmodifiedAttributeArray[ b * 3 + 1 ] = _vB.y;\n\t\tmodifiedAttributeArray[ b * 3 + 2 ] = _vB.z;\n\t\tmodifiedAttributeArray[ c * 3 + 0 ] = _vC.x;\n\t\tmodifiedAttributeArray[ c * 3 + 1 ] = _vC.y;\n\t\tmodifiedAttributeArray[ c * 3 + 2 ] = _vC.z;\n\n\t}\n\n\tconst geometry = object.geometry;\n\tconst material = object.material;\n\n\tlet a, b, c;\n\tconst index = geometry.index;\n\tconst positionAttribute = geometry.attributes.position;\n\tconst morphPosition = geometry.morphAttributes.position;\n\tconst morphTargetsRelative = geometry.morphTargetsRelative;\n\tconst normalAttribute = geometry.attributes.normal;\n\tconst morphNormal = geometry.morphAttributes.position;\n\n\tconst groups = geometry.groups;\n\tconst drawRange = geometry.drawRange;\n\tlet i, j, il, jl;\n\tlet group;\n\tlet start, end;\n\n\tconst modifiedPosition = new Float32Array( positionAttribute.count * positionAttribute.itemSize );\n\tconst modifiedNormal = new Float32Array( normalAttribute.count * normalAttribute.itemSize );\n\n\tif ( index !== null ) {\n\n\t\t// indexed buffer geometry\n\n\t\tif ( Array.isArray( material ) ) {\n\n\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\tgroup = groups[ i ];\n\n\t\t\t\tstart = Math.max( group.start, drawRange.start );\n\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\ta = index.getX( j );\n\t\t\t\t\tb = index.getX( j + 1 );\n\t\t\t\t\tc = index.getX( j + 2 );\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tpositionAttribute,\n\t\t\t\t\t\tmorphPosition,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedPosition\n\t\t\t\t\t);\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tnormalAttribute,\n\t\t\t\t\t\tmorphNormal,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedNormal\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tstart = Math.max( 0, drawRange.start );\n\t\t\tend = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\ta = index.getX( i );\n\t\t\t\tb = index.getX( i + 1 );\n\t\t\t\tc = index.getX( i + 2 );\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tpositionAttribute,\n\t\t\t\t\tmorphPosition,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedPosition\n\t\t\t\t);\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tnormalAttribute,\n\t\t\t\t\tmorphNormal,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedNormal\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t} else {\n\n\t\t// non-indexed buffer geometry\n\n\t\tif ( Array.isArray( material ) ) {\n\n\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\tgroup = groups[ i ];\n\n\t\t\t\tstart = Math.max( group.start, drawRange.start );\n\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\ta = j;\n\t\t\t\t\tb = j + 1;\n\t\t\t\t\tc = j + 2;\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tpositionAttribute,\n\t\t\t\t\t\tmorphPosition,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedPosition\n\t\t\t\t\t);\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tnormalAttribute,\n\t\t\t\t\t\tmorphNormal,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedNormal\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tstart = Math.max( 0, drawRange.start );\n\t\t\tend = Math.min( positionAttribute.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\ta = i;\n\t\t\t\tb = i + 1;\n\t\t\t\tc = i + 2;\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tpositionAttribute,\n\t\t\t\t\tmorphPosition,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedPosition\n\t\t\t\t);\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tnormalAttribute,\n\t\t\t\t\tmorphNormal,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedNormal\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tconst morphedPositionAttribute = new Float32BufferAttribute( modifiedPosition, 3 );\n\tconst morphedNormalAttribute = new Float32BufferAttribute( modifiedNormal, 3 );\n\n\treturn {\n\n\t\tpositionAttribute: positionAttribute,\n\t\tnormalAttribute: normalAttribute,\n\t\tmorphedPositionAttribute: morphedPositionAttribute,\n\t\tmorphedNormalAttribute: morphedNormalAttribute\n\n\t};\n\n}\n\nfunction mergeGroups( geometry ) {\n\n\tif ( geometry.groups.length === 0 ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge.' );\n\t\treturn geometry;\n\n\t}\n\n\tlet groups = geometry.groups;\n\n\t// sort groups by material index\n\n\tgroups = groups.sort( ( a, b ) => {\n\n\t\tif ( a.materialIndex !== b.materialIndex ) return a.materialIndex - b.materialIndex;\n\n\t\treturn a.start - b.start;\n\n\t} );\n\n\t// create index for non-indexed geometries\n\n\tif ( geometry.getIndex() === null ) {\n\n\t\tconst positionAttribute = geometry.getAttribute( 'position' );\n\t\tconst indices = [];\n\n\t\tfor ( let i = 0; i < positionAttribute.count; i += 3 ) {\n\n\t\t\tindices.push( i, i + 1, i + 2 );\n\n\t\t}\n\n\t\tgeometry.setIndex( indices );\n\n\t}\n\n\t// sort index\n\n\tconst index = geometry.getIndex();\n\n\tconst newIndices = [];\n\n\tfor ( let i = 0; i < groups.length; i ++ ) {\n\n\t\tconst group = groups[ i ];\n\n\t\tconst groupStart = group.start;\n\t\tconst groupLength = groupStart + group.count;\n\n\t\tfor ( let j = groupStart; j < groupLength; j ++ ) {\n\n\t\t\tnewIndices.push( index.getX( j ) );\n\n\t\t}\n\n\t}\n\n\tgeometry.dispose(); // Required to force buffer recreation\n\tgeometry.setIndex( newIndices );\n\n\t// update groups indices\n\n\tlet start = 0;\n\n\tfor ( let i = 0; i < groups.length; i ++ ) {\n\n\t\tconst group = groups[ i ];\n\n\t\tgroup.start = start;\n\t\tstart += group.count;\n\n\t}\n\n\t// merge groups\n\n\tlet currentGroup = groups[ 0 ];\n\n\tgeometry.groups = [ currentGroup ];\n\n\tfor ( let i = 1; i < groups.length; i ++ ) {\n\n\t\tconst group = groups[ i ];\n\n\t\tif ( currentGroup.materialIndex === group.materialIndex ) {\n\n\t\t\tcurrentGroup.count += group.count;\n\n\t\t} else {\n\n\t\t\tcurrentGroup = group;\n\t\t\tgeometry.groups.push( currentGroup );\n\n\t\t}\n\n\t}\n\n\treturn geometry;\n\n}\n\n\n/**\n * Modifies the supplied geometry if it is non-indexed, otherwise creates a new,\n * non-indexed geometry. Returns the geometry with smooth normals everywhere except\n * faces that meet at an angle greater than the crease angle.\n *\n * @param {BufferGeometry} geometry\n * @param {number} [creaseAngle]\n * @return {BufferGeometry}\n */\nfunction toCreasedNormals( geometry, creaseAngle = Math.PI / 3 /* 60 degrees */ ) {\n\n\tconst creaseDot = Math.cos( creaseAngle );\n\tconst hashMultiplier = ( 1 + 1e-10 ) * 1e2;\n\n\t// reusable vectors\n\tconst verts = [ new Vector3(), new Vector3(), new Vector3() ];\n\tconst tempVec1 = new Vector3();\n\tconst tempVec2 = new Vector3();\n\tconst tempNorm = new Vector3();\n\tconst tempNorm2 = new Vector3();\n\n\t// hashes a vector\n\tfunction hashVertex( v ) {\n\n\t\tconst x = ~ ~ ( v.x * hashMultiplier );\n\t\tconst y = ~ ~ ( v.y * hashMultiplier );\n\t\tconst z = ~ ~ ( v.z * hashMultiplier );\n\t\treturn `${x},${y},${z}`;\n\n\t}\n\n\t// BufferGeometry.toNonIndexed() warns if the geometry is non-indexed\n\t// and returns the original geometry\n\tconst resultGeometry = geometry.index ? geometry.toNonIndexed() : geometry;\n\tconst posAttr = resultGeometry.attributes.position;\n\tconst vertexMap = {};\n\n\t// find all the normals shared by commonly located vertices\n\tfor ( let i = 0, l = posAttr.count / 3; i < l; i ++ ) {\n\n\t\tconst i3 = 3 * i;\n\t\tconst a = verts[ 0 ].fromBufferAttribute( posAttr, i3 + 0 );\n\t\tconst b = verts[ 1 ].fromBufferAttribute( posAttr, i3 + 1 );\n\t\tconst c = verts[ 2 ].fromBufferAttribute( posAttr, i3 + 2 );\n\n\t\ttempVec1.subVectors( c, b );\n\t\ttempVec2.subVectors( a, b );\n\n\t\t// add the normal to the map for all vertices\n\t\tconst normal = new Vector3().crossVectors( tempVec1, tempVec2 ).normalize();\n\t\tfor ( let n = 0; n < 3; n ++ ) {\n\n\t\t\tconst vert = verts[ n ];\n\t\t\tconst hash = hashVertex( vert );\n\t\t\tif ( ! ( hash in vertexMap ) ) {\n\n\t\t\t\tvertexMap[ hash ] = [];\n\n\t\t\t}\n\n\t\t\tvertexMap[ hash ].push( normal );\n\n\t\t}\n\n\t}\n\n\t// average normals from all vertices that share a common location if they are within the\n\t// provided crease threshold\n\tconst normalArray = new Float32Array( posAttr.count * 3 );\n\tconst normAttr = new BufferAttribute( normalArray, 3, false );\n\tfor ( let i = 0, l = posAttr.count / 3; i < l; i ++ ) {\n\n\t\t// get the face normal for this vertex\n\t\tconst i3 = 3 * i;\n\t\tconst a = verts[ 0 ].fromBufferAttribute( posAttr, i3 + 0 );\n\t\tconst b = verts[ 1 ].fromBufferAttribute( posAttr, i3 + 1 );\n\t\tconst c = verts[ 2 ].fromBufferAttribute( posAttr, i3 + 2 );\n\n\t\ttempVec1.subVectors( c, b );\n\t\ttempVec2.subVectors( a, b );\n\n\t\ttempNorm.crossVectors( tempVec1, tempVec2 ).normalize();\n\n\t\t// average all normals that meet the threshold and set the normal value\n\t\tfor ( let n = 0; n < 3; n ++ ) {\n\n\t\t\tconst vert = verts[ n ];\n\t\t\tconst hash = hashVertex( vert );\n\t\t\tconst otherNormals = vertexMap[ hash ];\n\t\t\ttempNorm2.set( 0, 0, 0 );\n\n\t\t\tfor ( let k = 0, lk = otherNormals.length; k < lk; k ++ ) {\n\n\t\t\t\tconst otherNorm = otherNormals[ k ];\n\t\t\t\tif ( tempNorm.dot( otherNorm ) > creaseDot ) {\n\n\t\t\t\t\ttempNorm2.add( otherNorm );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttempNorm2.normalize();\n\t\t\tnormAttr.setXYZ( i3 + n, tempNorm2.x, tempNorm2.y, tempNorm2.z );\n\n\t\t}\n\n\t}\n\n\tresultGeometry.setAttribute( 'normal', normAttr );\n\treturn resultGeometry;\n\n}\n\nfunction mergeBufferGeometries( geometries, useGroups = false ) {\n\n\tconsole.warn( 'THREE.BufferGeometryUtils: mergeBufferGeometries() has been renamed to mergeGeometries().' ); // @deprecated, r151\n\treturn mergeGeometries( geometries, useGroups );\n\n}\n\nfunction mergeBufferAttributes( attributes ) {\n\n\tconsole.warn( 'THREE.BufferGeometryUtils: mergeBufferAttributes() has been renamed to mergeAttributes().' ); // @deprecated, r151\n\treturn mergeAttributes( attributes );\n\n}\n\nexport {\n\tcomputeMikkTSpaceTangents,\n\tmergeGeometries,\n\tmergeBufferGeometries,\n\tmergeAttributes,\n\tmergeBufferAttributes,\n\tinterleaveAttributes,\n\testimateBytesUsed,\n\tmergeVertices,\n\ttoTrianglesDrawMode,\n\tcomputeMorphedAttributes,\n\tmergeGroups,\n\ttoCreasedNormals\n};\n","import {\n\tAnimationClip,\n\tBone,\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tClampToEdgeWrapping,\n\tColor,\n\tColorManagement,\n\tDirectionalLight,\n\tDoubleSide,\n\tFileLoader,\n\tFrontSide,\n\tGroup,\n\tImageBitmapLoader,\n\tInstancedMesh,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tInterpolant,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLine,\n\tLineBasicMaterial,\n\tLineLoop,\n\tLineSegments,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLinearSRGBColorSpace,\n\tLoader,\n\tLoaderUtils,\n\tMaterial,\n\tMathUtils,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tMeshPhysicalMaterial,\n\tMeshStandardMaterial,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPoints,\n\tPointsMaterial,\n\tPropertyBinding,\n\tQuaternion,\n\tQuaternionKeyframeTrack,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSphere,\n\tSpotLight,\n\tTexture,\n\tTextureLoader,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tVector2,\n\tVector3,\n\tVectorKeyframeTrack,\n\tSRGBColorSpace,\n\tInstancedBufferAttribute\n} from 'three';\nimport { toTrianglesDrawMode } from '../utils/BufferGeometryUtils.js';\n\nclass GLTFLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ktx2Loader = null;\n\t\tthis.meshoptDecoder = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureWebPExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureAVIFExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSheenExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsVolumeExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIorExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsEmissiveStrengthExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSpecularExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIridescenceExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsAnisotropyExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsBumpExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFLightsExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshoptCompression( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshGpuInstancing( parser );\n\n\t\t} );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tlet resourcePath;\n\n\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\tresourcePath = this.resourcePath;\n\n\t\t} else if ( this.path !== '' ) {\n\n\t\t\t// If a base path is set, resources will be relative paths from that plus the relative path of the gltf file\n\t\t\t// Example  path = 'https://my-cnd-server.com/', url = 'assets/models/model.gltf'\n\t\t\t// resourcePath = 'https://my-cnd-server.com/assets/models/'\n\t\t\t// referenced resource 'model.bin' will be loaded from 'https://my-cnd-server.com/assets/models/model.bin'\n\t\t\t// referenced resource '../textures/texture.png' will be loaded from 'https://my-cnd-server.com/assets/textures/texture.png'\n\t\t\tconst relativeUrl = LoaderUtils.extractUrlBase( url );\n\t\t\tresourcePath = LoaderUtils.resolveURL( relativeUrl, this.path );\n\n\t\t} else {\n\n\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t}\n\n\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\tthis.manager.itemStart( url );\n\n\t\tconst _onError = function ( e ) {\n\n\t\t\tif ( onError ) {\n\n\t\t\t\tonError( e );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( e );\n\n\t\t\t}\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t};\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, function ( data ) {\n\n\t\t\ttry {\n\n\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, _onError );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\t_onError( e );\n\n\t\t\t}\n\n\t\t}, onProgress, _onError );\n\n\t}\n\n\tsetDRACOLoader( dracoLoader ) {\n\n\t\tthis.dracoLoader = dracoLoader;\n\t\treturn this;\n\n\t}\n\n\tsetDDSLoader() {\n\n\t\tthrow new Error(\n\n\t\t\t'THREE.GLTFLoader: \"MSFT_texture_dds\" no longer supported. Please update to \"KHR_texture_basisu\".'\n\n\t\t);\n\n\t}\n\n\tsetKTX2Loader( ktx2Loader ) {\n\n\t\tthis.ktx2Loader = ktx2Loader;\n\t\treturn this;\n\n\t}\n\n\tsetMeshoptDecoder( meshoptDecoder ) {\n\n\t\tthis.meshoptDecoder = meshoptDecoder;\n\t\treturn this;\n\n\t}\n\n\tregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tunregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tparse( data, path, onLoad, onError ) {\n\n\t\tlet json;\n\t\tconst extensions = {};\n\t\tconst plugins = {};\n\t\tconst textDecoder = new TextDecoder();\n\n\t\tif ( typeof data === 'string' ) {\n\n\t\t\tjson = JSON.parse( data );\n\n\t\t} else if ( data instanceof ArrayBuffer ) {\n\n\t\t\tconst magic = textDecoder.decode( new Uint8Array( data, 0, 4 ) );\n\n\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tjson = JSON.parse( extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content );\n\n\t\t\t} else {\n\n\t\t\t\tjson = JSON.parse( textDecoder.decode( data ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tjson = data;\n\n\t\t}\n\n\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst parser = new GLTFParser( json, {\n\n\t\t\tpath: path || this.resourcePath || '',\n\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\trequestHeader: this.requestHeader,\n\t\t\tmanager: this.manager,\n\t\t\tktx2Loader: this.ktx2Loader,\n\t\t\tmeshoptDecoder: this.meshoptDecoder\n\n\t\t} );\n\n\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\tfor ( let i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\tconst plugin = this.pluginCallbacks[ i ]( parser );\n\n\t\t\tif ( ! plugin.name ) console.error( 'THREE.GLTFLoader: Invalid plugin found: missing name' );\n\n\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t// Remove this workaround if we move all the existing\n\t\t\t// extension handlers to plugin system\n\t\t\textensions[ plugin.name ] = true;\n\n\t\t}\n\n\t\tif ( json.extensionsUsed ) {\n\n\t\t\tfor ( let i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\tconst extensionName = json.extensionsUsed[ i ];\n\t\t\t\tconst extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tparser.setExtensions( extensions );\n\t\tparser.setPlugins( plugins );\n\t\tparser.parse( onLoad, onError );\n\n\t}\n\n\tparseAsync( data, path ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.parse( data, path, resolve, reject );\n\n\t\t} );\n\n\t}\n\n}\n\n/* GLTFREGISTRY */\n\nfunction GLTFRegistry() {\n\n\tlet objects = {};\n\n\treturn\t{\n\n\t\tget: function ( key ) {\n\n\t\t\treturn objects[ key ];\n\n\t\t},\n\n\t\tadd: function ( key, object ) {\n\n\t\t\tobjects[ key ] = object;\n\n\t\t},\n\n\t\tremove: function ( key ) {\n\n\t\t\tdelete objects[ key ];\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\tobjects = {};\n\n\t\t}\n\n\t};\n\n}\n\n/*********************************/\n/********** EXTENSIONS ***********/\n/*********************************/\n\nconst EXTENSIONS = {\n\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\tKHR_MATERIALS_IOR: 'KHR_materials_ior',\n\tKHR_MATERIALS_SHEEN: 'KHR_materials_sheen',\n\tKHR_MATERIALS_SPECULAR: 'KHR_materials_specular',\n\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\tKHR_MATERIALS_IRIDESCENCE: 'KHR_materials_iridescence',\n\tKHR_MATERIALS_ANISOTROPY: 'KHR_materials_anisotropy',\n\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\tKHR_MATERIALS_VOLUME: 'KHR_materials_volume',\n\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\tKHR_MATERIALS_EMISSIVE_STRENGTH: 'KHR_materials_emissive_strength',\n\tEXT_MATERIALS_BUMP: 'EXT_materials_bump',\n\tEXT_TEXTURE_WEBP: 'EXT_texture_webp',\n\tEXT_TEXTURE_AVIF: 'EXT_texture_avif',\n\tEXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression',\n\tEXT_MESH_GPU_INSTANCING: 'EXT_mesh_gpu_instancing'\n};\n\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n */\nclass GLTFLightsExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t// Object3D instance caches\n\t\tthis.cache = { refs: {}, uses: {} };\n\n\t}\n\n\t_markDefs() {\n\n\t\tconst parser = this.parser;\n\t\tconst nodeDefs = this.parser.json.nodes || [];\n\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t\t&& nodeDef.extensions[ this.name ]\n\t\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\n\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_loadLight( lightIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst cacheKey = 'light:' + lightIndex;\n\t\tlet dependency = parser.cache.get( cacheKey );\n\n\t\tif ( dependency ) return dependency;\n\n\t\tconst json = parser.json;\n\t\tconst extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\n\t\tconst lightDefs = extensions.lights || [];\n\t\tconst lightDef = lightDefs[ lightIndex ];\n\t\tlet lightNode;\n\n\t\tconst color = new Color( 0xffffff );\n\n\t\tif ( lightDef.color !== undefined ) color.setRGB( lightDef.color[ 0 ], lightDef.color[ 1 ], lightDef.color[ 2 ], LinearSRGBColorSpace );\n\n\t\tconst range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type: ' + lightDef.type );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tlightNode.decay = 2;\n\n\t\tassignExtrasToUserData( lightNode, lightDef );\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\n\n\t\tdependency = Promise.resolve( lightNode );\n\n\t\tparser.cache.add( cacheKey, dependency );\n\n\t\treturn dependency;\n\n\t}\n\n\tgetDependency( type, index ) {\n\n\t\tif ( type !== 'light' ) return;\n\n\t\treturn this._loadLight( index );\n\n\t}\n\n\tcreateNodeAttachment( nodeIndex ) {\n\n\t\tconst self = this;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\t\tconst lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\n\t\tconst lightIndex = lightDef.light;\n\n\t\tif ( lightIndex === undefined ) return null;\n\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\n\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n */\nclass GLTFMaterialsUnlitExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tgetMaterialType() {\n\n\t\treturn MeshBasicMaterial;\n\n\t}\n\n\textendParams( materialParams, materialDef, parser ) {\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.setRGB( array[ 0 ], array[ 1 ], array[ 2 ], LinearSRGBColorSpace );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture, SRGBColorSpace ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Emissive Strength Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/blob/5768b3ce0ef32bc39cdf1bef10b948586635ead3/extensions/2.0/Khronos/KHR_materials_emissive_strength/README.md\n */\nclass GLTFMaterialsEmissiveStrengthExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst emissiveStrength = materialDef.extensions[ this.name ].emissiveStrength;\n\n\t\tif ( emissiveStrength !== undefined ) {\n\n\t\t\tmaterialParams.emissiveIntensity = emissiveStrength;\n\n\t\t}\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n */\nclass GLTFMaterialsClearcoatExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Iridescence Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_iridescence\n */\nclass GLTFMaterialsIridescenceExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IRIDESCENCE;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.iridescenceFactor !== undefined ) {\n\n\t\t\tmaterialParams.iridescence = extension.iridescenceFactor;\n\n\t\t}\n\n\t\tif ( extension.iridescenceTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'iridescenceMap', extension.iridescenceTexture ) );\n\n\t\t}\n\n\t\tif ( extension.iridescenceIor !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceIOR = extension.iridescenceIor;\n\n\t\t}\n\n\t\tif ( materialParams.iridescenceThicknessRange === undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange = [ 100, 400 ];\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessMinimum !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange[ 0 ] = extension.iridescenceThicknessMinimum;\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessMaximum !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange[ 1 ] = extension.iridescenceThicknessMaximum;\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'iridescenceThicknessMap', extension.iridescenceThicknessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Sheen Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen\n */\nclass GLTFMaterialsSheenExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SHEEN;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.sheenColor = new Color( 0, 0, 0 );\n\t\tmaterialParams.sheenRoughness = 0;\n\t\tmaterialParams.sheen = 1;\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.sheenColorFactor !== undefined ) {\n\n\t\t\tconst colorFactor = extension.sheenColorFactor;\n\t\t\tmaterialParams.sheenColor.setRGB( colorFactor[ 0 ], colorFactor[ 1 ], colorFactor[ 2 ], LinearSRGBColorSpace );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.sheenRoughness = extension.sheenRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.sheenColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenColorMap', extension.sheenColorTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenRoughnessMap', extension.sheenRoughnessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n */\nclass GLTFMaterialsTransmissionExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n */\nclass GLTFMaterialsVolumeExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_VOLUME;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.thickness = extension.thicknessFactor !== undefined ? extension.thicknessFactor : 0;\n\n\t\tif ( extension.thicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'thicknessMap', extension.thicknessTexture ) );\n\n\t\t}\n\n\t\tmaterialParams.attenuationDistance = extension.attenuationDistance || Infinity;\n\n\t\tconst colorArray = extension.attenuationColor || [ 1, 1, 1 ];\n\t\tmaterialParams.attenuationColor = new Color().setRGB( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ], LinearSRGBColorSpace );\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials ior Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_ior\n */\nclass GLTFMaterialsIorExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IOR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.ior = extension.ior !== undefined ? extension.ior : 1.5;\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Materials specular Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_specular\n */\nclass GLTFMaterialsSpecularExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SPECULAR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.specularIntensity = extension.specularFactor !== undefined ? extension.specularFactor : 1.0;\n\n\t\tif ( extension.specularTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularIntensityMap', extension.specularTexture ) );\n\n\t\t}\n\n\t\tconst colorArray = extension.specularColorFactor || [ 1, 1, 1 ];\n\t\tmaterialParams.specularColor = new Color().setRGB( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ], LinearSRGBColorSpace );\n\n\t\tif ( extension.specularColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularColorMap', extension.specularColorTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n\n/**\n * Materials bump Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/EXT_materials_bump\n */\nclass GLTFMaterialsBumpExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_MATERIALS_BUMP;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.bumpScale = extension.bumpFactor !== undefined ? extension.bumpFactor : 1.0;\n\n\t\tif ( extension.bumpTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'bumpMap', extension.bumpTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials anisotropy Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_anisotropy\n */\nclass GLTFMaterialsAnisotropyExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_ANISOTROPY;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.anisotropyStrength !== undefined ) {\n\n\t\t\tmaterialParams.anisotropy = extension.anisotropyStrength;\n\n\t\t}\n\n\t\tif ( extension.anisotropyRotation !== undefined ) {\n\n\t\t\tmaterialParams.anisotropyRotation = extension.anisotropyRotation;\n\n\t\t}\n\n\t\tif ( extension.anisotropyTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'anisotropyMap', extension.anisotropyTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * BasisU Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n */\nclass GLTFTextureBasisUExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ this.name ];\n\t\tconst loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t\t} else {\n\n\t\t\t\t// Assumes that the extension is optional and that a fallback texture is present\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t}\n\n}\n\n/**\n * WebP Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n */\nclass GLTFTextureWebPExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n\t\tthis.isSupported = null;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.detectSupport().then( function ( isSupported ) {\n\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: WebP required by asset but unsupported.' );\n\n\t\t\t}\n\n\t\t\t// Fall back to PNG or JPEG.\n\t\t\treturn parser.loadTexture( textureIndex );\n\n\t\t} );\n\n\t}\n\n\tdetectSupport() {\n\n\t\tif ( ! this.isSupported ) {\n\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\n\n\t\t\t\tconst image = new Image();\n\n\t\t\t\t// Lossy test image. Support for lossy images doesn't guarantee support for all\n\t\t\t\t// WebP images, unfortunately.\n\t\t\t\timage.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\n\n\t\t\t\timage.onload = image.onerror = function () {\n\n\t\t\t\t\tresolve( image.height === 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn this.isSupported;\n\n\t}\n\n}\n\n/**\n * AVIF Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_avif\n */\nclass GLTFTextureAVIFExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_AVIF;\n\t\tthis.isSupported = null;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.detectSupport().then( function ( isSupported ) {\n\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: AVIF required by asset but unsupported.' );\n\n\t\t\t}\n\n\t\t\t// Fall back to PNG or JPEG.\n\t\t\treturn parser.loadTexture( textureIndex );\n\n\t\t} );\n\n\t}\n\n\tdetectSupport() {\n\n\t\tif ( ! this.isSupported ) {\n\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\n\n\t\t\t\tconst image = new Image();\n\n\t\t\t\t// Lossy test image.\n\t\t\t\timage.src = 'data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=';\n\t\t\t\timage.onload = image.onerror = function () {\n\n\t\t\t\t\tresolve( image.height === 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn this.isSupported;\n\n\t}\n\n}\n\n/**\n * meshopt BufferView Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n */\nclass GLTFMeshoptCompression {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n\t\tthis.parser = parser;\n\n\t}\n\n\tloadBufferView( index ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst bufferView = json.bufferViews[ index ];\n\n\t\tif ( bufferView.extensions && bufferView.extensions[ this.name ] ) {\n\n\t\t\tconst extensionDef = bufferView.extensions[ this.name ];\n\n\t\t\tconst buffer = this.parser.getDependency( 'buffer', extensionDef.buffer );\n\t\t\tconst decoder = this.parser.options.meshoptDecoder;\n\n\t\t\tif ( ! decoder || ! decoder.supported ) {\n\n\t\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Assumes that the extension is optional and that fallback buffer data is present\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn buffer.then( function ( res ) {\n\n\t\t\t\tconst byteOffset = extensionDef.byteOffset || 0;\n\t\t\t\tconst byteLength = extensionDef.byteLength || 0;\n\n\t\t\t\tconst count = extensionDef.count;\n\t\t\t\tconst stride = extensionDef.byteStride;\n\n\t\t\t\tconst source = new Uint8Array( res, byteOffset, byteLength );\n\n\t\t\t\tif ( decoder.decodeGltfBufferAsync ) {\n\n\t\t\t\t\treturn decoder.decodeGltfBufferAsync( count, stride, source, extensionDef.mode, extensionDef.filter ).then( function ( res ) {\n\n\t\t\t\t\t\treturn res.buffer;\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Support for MeshoptDecoder 0.18 or earlier, without decodeGltfBufferAsync\n\t\t\t\t\treturn decoder.ready.then( function () {\n\n\t\t\t\t\t\tconst result = new ArrayBuffer( count * stride );\n\t\t\t\t\t\tdecoder.decodeGltfBuffer( new Uint8Array( result ), count, stride, source, extensionDef.mode, extensionDef.filter );\n\t\t\t\t\t\treturn result;\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * GPU Instancing Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_mesh_gpu_instancing\n *\n */\nclass GLTFMeshGpuInstancing {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESH_GPU_INSTANCING;\n\t\tthis.parser = parser;\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( ! nodeDef.extensions || ! nodeDef.extensions[ this.name ] ||\n\t\t\tnodeDef.mesh === undefined ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst meshDef = json.meshes[ nodeDef.mesh ];\n\n\t\t// No Points or Lines + Instancing support yet\n\n\t\tfor ( const primitive of meshDef.primitives ) {\n\n\t\t\tif ( primitive.mode !== WEBGL_CONSTANTS.TRIANGLES &&\n\t\t\t\t primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_STRIP &&\n\t\t\t\t primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_FAN &&\n\t\t\t\t primitive.mode !== undefined ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst extensionDef = nodeDef.extensions[ this.name ];\n\t\tconst attributesDef = extensionDef.attributes;\n\n\t\t// @TODO: Can we support InstancedMesh + SkinnedMesh?\n\n\t\tconst pending = [];\n\t\tconst attributes = {};\n\n\t\tfor ( const key in attributesDef ) {\n\n\t\t\tpending.push( this.parser.getDependency( 'accessor', attributesDef[ key ] ).then( accessor => {\n\n\t\t\t\tattributes[ key ] = accessor;\n\t\t\t\treturn attributes[ key ];\n\n\t\t\t} ) );\n\n\t\t}\n\n\t\tif ( pending.length < 1 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tpending.push( this.parser.createNodeMesh( nodeIndex ) );\n\n\t\treturn Promise.all( pending ).then( results => {\n\n\t\t\tconst nodeObject = results.pop();\n\t\t\tconst meshes = nodeObject.isGroup ? nodeObject.children : [ nodeObject ];\n\t\t\tconst count = results[ 0 ].count; // All attribute counts should be same\n\t\t\tconst instancedMeshes = [];\n\n\t\t\tfor ( const mesh of meshes ) {\n\n\t\t\t\t// Temporal variables\n\t\t\t\tconst m = new Matrix4();\n\t\t\t\tconst p = new Vector3();\n\t\t\t\tconst q = new Quaternion();\n\t\t\t\tconst s = new Vector3( 1, 1, 1 );\n\n\t\t\t\tconst instancedMesh = new InstancedMesh( mesh.geometry, mesh.material, count );\n\n\t\t\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\t\t\tif ( attributes.TRANSLATION ) {\n\n\t\t\t\t\t\tp.fromBufferAttribute( attributes.TRANSLATION, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.ROTATION ) {\n\n\t\t\t\t\t\tq.fromBufferAttribute( attributes.ROTATION, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.SCALE ) {\n\n\t\t\t\t\t\ts.fromBufferAttribute( attributes.SCALE, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tinstancedMesh.setMatrixAt( i, m.compose( p, q, s ) );\n\n\t\t\t\t}\n\n\t\t\t\t// Add instance attributes to the geometry, excluding TRS.\n\t\t\t\tfor ( const attributeName in attributes ) {\n\n\t\t\t\t\tif ( attributeName === '_COLOR_0' ) {\n\n\t\t\t\t\t\tconst attr = attributes[ attributeName ];\n\t\t\t\t\t\tinstancedMesh.instanceColor = new InstancedBufferAttribute( attr.array, attr.itemSize, attr.normalized );\n\n\t\t\t\t\t} else if ( attributeName !== 'TRANSLATION' &&\n\t\t\t\t\t\t attributeName !== 'ROTATION' &&\n\t\t\t\t\t\t attributeName !== 'SCALE' ) {\n\n\t\t\t\t\t\tmesh.geometry.setAttribute( attributeName, attributes[ attributeName ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Just in case\n\t\t\t\tObject3D.prototype.copy.call( instancedMesh, mesh );\n\n\t\t\t\tthis.parser.assignFinalMaterial( instancedMesh );\n\n\t\t\t\tinstancedMeshes.push( instancedMesh );\n\n\t\t\t}\n\n\t\t\tif ( nodeObject.isGroup ) {\n\n\t\t\t\tnodeObject.clear();\n\n\t\t\t\tnodeObject.add( ... instancedMeshes );\n\n\t\t\t\treturn nodeObject;\n\n\t\t\t}\n\n\t\t\treturn instancedMeshes[ 0 ];\n\n\t\t} );\n\n\t}\n\n}\n\n/* BINARY EXTENSION */\nconst BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nconst BINARY_EXTENSION_HEADER_LENGTH = 12;\nconst BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\nclass GLTFBinaryExtension {\n\n\tconstructor( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tconst headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tconst textDecoder = new TextDecoder();\n\n\t\tthis.header = {\n\t\t\tmagic: textDecoder.decode( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tconst chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n\t\tconst chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tlet chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkContentsLength ) {\n\n\t\t\tconst chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tconst chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tconst contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = textDecoder.decode( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tconst byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * DRACO Mesh Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n */\nclass GLTFDracoMeshCompressionExtension {\n\n\tconstructor( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tdecodePrimitive( primitive, parser ) {\n\n\t\tconst json = this.json;\n\t\tconst dracoLoader = this.dracoLoader;\n\t\tconst bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tconst gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tconst threeAttributeMap = {};\n\t\tconst attributeNormalizedMap = {};\n\t\tconst attributeTypeMap = {};\n\n\t\tfor ( const attributeName in gltfAttributeMap ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( const attributeName in primitive.attributes ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tconst accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tconst componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType.name;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( const attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tconst attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tconst normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap, LinearSRGBColorSpace, reject );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Texture Transform Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n */\nclass GLTFTextureTransformExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\textendTexture( texture, transform ) {\n\n\t\tif ( ( transform.texCoord === undefined || transform.texCoord === texture.channel )\n\t\t\t&& transform.offset === undefined\n\t\t\t&& transform.rotation === undefined\n\t\t\t&& transform.scale === undefined ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21819.\n\t\t\treturn texture;\n\n\t\t}\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\ttexture.channel = transform.texCoord;\n\n\t\t}\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * Mesh Quantization Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n */\nclass GLTFMeshQuantizationExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n}\n\n/*********************************/\n/********** INTERPOLATION ********/\n/*********************************/\n\n// Spline Interpolation\n// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\nclass GLTFCubicSplineInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tcopySampleValue_( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( let i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer;\n\t\tconst values = this.sampleValues;\n\t\tconst stride = this.valueSize;\n\n\t\tconst stride2 = stride * 2;\n\t\tconst stride3 = stride * 3;\n\n\t\tconst td = t1 - t0;\n\n\t\tconst p = ( t - t0 ) / td;\n\t\tconst pp = p * p;\n\t\tconst ppp = pp * p;\n\n\t\tconst offset1 = i1 * stride3;\n\t\tconst offset0 = offset1 - stride3;\n\n\t\tconst s2 = - 2 * ppp + 3 * pp;\n\t\tconst s3 = ppp - pp;\n\t\tconst s0 = 1 - s2;\n\t\tconst s1 = s3 - pp + p;\n\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\tfor ( let i = 0; i !== stride; i ++ ) {\n\n\t\t\tconst p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\t\tconst m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\tconst p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\t\tconst m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\nconst _q = new Quaternion();\n\nclass GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant {\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = super.interpolate_( i1, t0, t, t1 );\n\n\t\t_q.fromArray( result ).normalize().toArray( result );\n\n\t\treturn result;\n\n\t}\n\n}\n\n\n/*********************************/\n/********** INTERNALS ************/\n/*********************************/\n\n/* CONSTANTS */\n\nconst WEBGL_CONSTANTS = {\n\tFLOAT: 5126,\n\t//FLOAT_MAT2: 35674,\n\tFLOAT_MAT3: 35675,\n\tFLOAT_MAT4: 35676,\n\tFLOAT_VEC2: 35664,\n\tFLOAT_VEC3: 35665,\n\tFLOAT_VEC4: 35666,\n\tLINEAR: 9729,\n\tREPEAT: 10497,\n\tSAMPLER_2D: 35678,\n\tPOINTS: 0,\n\tLINES: 1,\n\tLINE_LOOP: 2,\n\tLINE_STRIP: 3,\n\tTRIANGLES: 4,\n\tTRIANGLE_STRIP: 5,\n\tTRIANGLE_FAN: 6,\n\tUNSIGNED_BYTE: 5121,\n\tUNSIGNED_SHORT: 5123\n};\n\nconst WEBGL_COMPONENT_TYPES = {\n\t5120: Int8Array,\n\t5121: Uint8Array,\n\t5122: Int16Array,\n\t5123: Uint16Array,\n\t5125: Uint32Array,\n\t5126: Float32Array\n};\n\nconst WEBGL_FILTERS = {\n\t9728: NearestFilter,\n\t9729: LinearFilter,\n\t9984: NearestMipmapNearestFilter,\n\t9985: LinearMipmapNearestFilter,\n\t9986: NearestMipmapLinearFilter,\n\t9987: LinearMipmapLinearFilter\n};\n\nconst WEBGL_WRAPPINGS = {\n\t33071: ClampToEdgeWrapping,\n\t33648: MirroredRepeatWrapping,\n\t10497: RepeatWrapping\n};\n\nconst WEBGL_TYPE_SIZES = {\n\t'SCALAR': 1,\n\t'VEC2': 2,\n\t'VEC3': 3,\n\t'VEC4': 4,\n\t'MAT2': 4,\n\t'MAT3': 9,\n\t'MAT4': 16\n};\n\nconst ATTRIBUTES = {\n\tPOSITION: 'position',\n\tNORMAL: 'normal',\n\tTANGENT: 'tangent',\n\tTEXCOORD_0: 'uv',\n\tTEXCOORD_1: 'uv1',\n\tTEXCOORD_2: 'uv2',\n\tTEXCOORD_3: 'uv3',\n\tCOLOR_0: 'color',\n\tWEIGHTS_0: 'skinWeight',\n\tJOINTS_0: 'skinIndex',\n};\n\nconst PATH_PROPERTIES = {\n\tscale: 'scale',\n\ttranslation: 'position',\n\trotation: 'quaternion',\n\tweights: 'morphTargetInfluences'\n};\n\nconst INTERPOLATION = {\n\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\tLINEAR: InterpolateLinear,\n\tSTEP: InterpolateDiscrete\n};\n\nconst ALPHA_MODES = {\n\tOPAQUE: 'OPAQUE',\n\tMASK: 'MASK',\n\tBLEND: 'BLEND'\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n */\nfunction createDefaultMaterial( cache ) {\n\n\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\tcolor: 0xFFFFFF,\n\t\t\temissive: 0x000000,\n\t\t\tmetalness: 1,\n\t\t\troughness: 1,\n\t\t\ttransparent: false,\n\t\t\tdepthTest: true,\n\t\t\tside: FrontSide\n\t\t} );\n\n\t}\n\n\treturn cache[ 'DefaultMaterial' ];\n\n}\n\nfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t// Add unknown glTF extensions to an object's userData.\n\n\tfor ( const name in objectDef.extensions ) {\n\n\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @param {Object3D|Material|BufferGeometry} object\n * @param {GLTF.definition} gltfDef\n */\nfunction assignExtrasToUserData( object, gltfDef ) {\n\n\tif ( gltfDef.extras !== undefined ) {\n\n\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n *\n * @param {BufferGeometry} geometry\n * @param {Array<GLTF.Target>} targets\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addMorphTargets( geometry, targets, parser ) {\n\n\tlet hasMorphPosition = false;\n\tlet hasMorphNormal = false;\n\tlet hasMorphColor = false;\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\t\tif ( target.COLOR_0 !== undefined ) hasMorphColor = true;\n\n\t\tif ( hasMorphPosition && hasMorphNormal && hasMorphColor ) break;\n\n\t}\n\n\tif ( ! hasMorphPosition && ! hasMorphNormal && ! hasMorphColor ) return Promise.resolve( geometry );\n\n\tconst pendingPositionAccessors = [];\n\tconst pendingNormalAccessors = [];\n\tconst pendingColorAccessors = [];\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( hasMorphPosition ) {\n\n\t\t\tconst pendingAccessor = target.POSITION !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t: geometry.attributes.position;\n\n\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphNormal ) {\n\n\t\t\tconst pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t: geometry.attributes.normal;\n\n\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphColor ) {\n\n\t\t\tconst pendingAccessor = target.COLOR_0 !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.COLOR_0 )\n\t\t\t\t: geometry.attributes.color;\n\n\t\t\tpendingColorAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t}\n\n\treturn Promise.all( [\n\t\tPromise.all( pendingPositionAccessors ),\n\t\tPromise.all( pendingNormalAccessors ),\n\t\tPromise.all( pendingColorAccessors )\n\t] ).then( function ( accessors ) {\n\n\t\tconst morphPositions = accessors[ 0 ];\n\t\tconst morphNormals = accessors[ 1 ];\n\t\tconst morphColors = accessors[ 2 ];\n\n\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\tif ( hasMorphColor ) geometry.morphAttributes.color = morphColors;\n\t\tgeometry.morphTargetsRelative = true;\n\n\t\treturn geometry;\n\n\t} );\n\n}\n\n/**\n * @param {Mesh} mesh\n * @param {GLTF.Mesh} meshDef\n */\nfunction updateMorphTargets( mesh, meshDef ) {\n\n\tmesh.updateMorphTargets();\n\n\tif ( meshDef.weights !== undefined ) {\n\n\t\tfor ( let i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t}\n\n\t}\n\n\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\tconst targetNames = meshDef.extras.targetNames;\n\n\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\tfor ( let i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t}\n\n\t}\n\n}\n\nfunction createPrimitiveKey( primitiveDef ) {\n\n\tlet geometryKey;\n\n\tconst dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\n\tif ( dracoExtension ) {\n\n\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t} else {\n\n\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t}\n\n\tif ( primitiveDef.targets !== undefined ) {\n\n\t\tfor ( let i = 0, il = primitiveDef.targets.length; i < il; i ++ ) {\n\n\t\t\tgeometryKey += ':' + createAttributesKey( primitiveDef.targets[ i ] );\n\n\t\t}\n\n\t}\n\n\treturn geometryKey;\n\n}\n\nfunction createAttributesKey( attributes ) {\n\n\tlet attributesKey = '';\n\n\tconst keys = Object.keys( attributes ).sort();\n\n\tfor ( let i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t}\n\n\treturn attributesKey;\n\n}\n\nfunction getNormalizedComponentScale( constructor ) {\n\n\t// Reference:\n\t// https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\n\n\tswitch ( constructor ) {\n\n\t\tcase Int8Array:\n\t\t\treturn 1 / 127;\n\n\t\tcase Uint8Array:\n\t\t\treturn 1 / 255;\n\n\t\tcase Int16Array:\n\t\t\treturn 1 / 32767;\n\n\t\tcase Uint16Array:\n\t\t\treturn 1 / 65535;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported normalized accessor component type.' );\n\n\t}\n\n}\n\nfunction getImageURIMimeType( uri ) {\n\n\tif ( uri.search( /\\.jpe?g($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/jpeg/ ) === 0 ) return 'image/jpeg';\n\tif ( uri.search( /\\.webp($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/webp/ ) === 0 ) return 'image/webp';\n\n\treturn 'image/png';\n\n}\n\nconst _identityMatrix = new Matrix4();\n\n/* GLTF PARSER */\n\nclass GLTFParser {\n\n\tconstructor( json = {}, options = {} ) {\n\n\t\tthis.json = json;\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options;\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Node cache\n\t\tthis.nodeCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\tthis.sourceCache = {};\n\t\tthis.textureCache = {};\n\n\t\t// Track node names, to ensure no duplicates\n\t\tthis.nodeNamesUsed = {};\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\n\t\tlet isSafari = false;\n\t\tlet isFirefox = false;\n\t\tlet firefoxVersion = - 1;\n\n\t\tif ( typeof navigator !== 'undefined' ) {\n\n\t\t\tisSafari = /^((?!chrome|android).)*safari/i.test( navigator.userAgent ) === true;\n\t\t\tisFirefox = navigator.userAgent.indexOf( 'Firefox' ) > - 1;\n\t\t\tfirefoxVersion = isFirefox ? navigator.userAgent.match( /Firefox\\/([0-9]+)\\./ )[ 1 ] : - 1;\n\n\t\t}\n\n\t\tif ( typeof createImageBitmap === 'undefined' || isSafari || ( isFirefox && firefoxVersion < 98 ) ) {\n\n\t\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new ImageBitmapLoader( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\t\tthis.textureLoader.setRequestHeader( this.options.requestHeader );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tsetExtensions( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t}\n\n\tsetPlugins( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t}\n\n\tparse( onLoad, onError ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\t\tthis.nodeCache = {};\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\treturn ext._markDefs && ext._markDefs();\n\n\t\t} );\n\n\t\tPromise.all( this._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.beforeRoot && ext.beforeRoot();\n\n\t\t} ) ).then( function () {\n\n\t\t\treturn Promise.all( [\n\n\t\t\t\tparser.getDependencies( 'scene' ),\n\t\t\t\tparser.getDependencies( 'animation' ),\n\t\t\t\tparser.getDependencies( 'camera' ),\n\n\t\t\t] );\n\n\t\t} ).then( function ( dependencies ) {\n\n\t\t\tconst result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\treturn Promise.all( parser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.afterRoot && ext.afterRoot( result );\n\n\t\t\t} ) ).then( function () {\n\n\t\t\t\tonLoad( result );\n\n\t\t\t} );\n\n\t\t} ).catch( onError );\n\n\t}\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\t_markDefs() {\n\n\t\tconst nodeDefs = this.json.nodes || [];\n\t\tconst skinDefs = this.json.skins || [];\n\t\tconst meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( let skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tconst joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( let i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t */\n\t_addNodeRef( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t}\n\n\t/** Returns a reference to a shared resource, cloning it if necessary. */\n\t_getNodeRef( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tconst ref = object.clone();\n\n\t\t// Propagates mappings to the cloned object, prevents mappings on the\n\t\t// original object from being lost.\n\t\tconst updateMappings = ( original, clone ) => {\n\n\t\t\tconst mappings = this.associations.get( original );\n\t\t\tif ( mappings != null ) {\n\n\t\t\t\tthis.associations.set( clone, mappings );\n\n\t\t\t}\n\n\t\t\tfor ( const [ i, child ] of original.children.entries() ) {\n\n\t\t\t\tupdateMappings( child, clone.children[ i ] );\n\n\t\t\t}\n\n\t\t};\n\n\t\tupdateMappings( object, ref );\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t}\n\n\t_invokeOne( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t_invokeAll( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) pending.push( result );\n\n\t\t}\n\n\t\treturn pending;\n\n\t}\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tgetDependency( type, index ) {\n\n\t\tconst cacheKey = type + ':' + index;\n\t\tlet dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadNode && ext.loadNode( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadAnimation && ext.loadAnimation( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext != this && ext.getDependency && ext.getDependency( type, index );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\tif ( ! dependency ) {\n\n\t\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t}\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tgetDependencies( type ) {\n\n\t\tlet dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tconst parser = this;\n\t\t\tconst defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBuffer( bufferIndex ) {\n\n\t\tconst bufferDef = this.json.buffers[ bufferIndex ];\n\t\tconst loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tconst options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( LoaderUtils.resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBufferView( bufferViewIndex ) {\n\n\t\tconst bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tconst byteLength = bufferViewDef.byteLength || 0;\n\t\t\tconst byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tloadAccessor( accessorIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\t\t\tconst normalized = accessorDef.normalized === true;\n\n\t\t\tconst array = new TypedArray( accessorDef.count * itemSize );\n\t\t\treturn Promise.resolve( new BufferAttribute( array, itemSize, normalized ) );\n\n\t\t}\n\n\t\tconst pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tconst bufferView = bufferViews[ 0 ];\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tconst elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tconst itemBytes = elementBytes * itemSize;\n\t\t\tconst byteOffset = accessorDef.byteOffset || 0;\n\t\t\tconst byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tconst normalized = accessorDef.normalized === true;\n\t\t\tlet array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tconst ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tconst ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tlet ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tconst itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tconst TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tconst byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tconst byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tconst sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tconst sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture|null>}\n\t */\n\tloadTexture( textureIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst sourceIndex = textureDef.source;\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tlet loader = this.textureLoader;\n\n\t\tif ( sourceDef.uri ) {\n\n\t\t\tconst handler = options.manager.getHandler( sourceDef.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, sourceIndex, loader );\n\n\t}\n\n\tloadTextureImage( textureIndex, sourceIndex, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tconst cacheKey = ( sourceDef.uri || sourceDef.bufferView ) + ':' + textureDef.sampler;\n\n\t\tif ( this.textureCache[ cacheKey ] ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21559.\n\t\t\treturn this.textureCache[ cacheKey ];\n\n\t\t}\n\n\t\tconst promise = this.loadImageSource( sourceIndex, loader ).then( function ( texture ) {\n\n\t\t\ttexture.flipY = false;\n\n\t\t\ttexture.name = textureDef.name || sourceDef.name || '';\n\n\t\t\tif ( texture.name === '' && typeof sourceDef.uri === 'string' && sourceDef.uri.startsWith( 'data:image/' ) === false ) {\n\n\t\t\t\ttexture.name = sourceDef.uri;\n\n\t\t\t}\n\n\t\t\tconst samplers = json.samplers || {};\n\t\t\tconst sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\n\t\t\tparser.associations.set( texture, { textures: textureIndex } );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function () {\n\n\t\t\treturn null;\n\n\t\t} );\n\n\t\tthis.textureCache[ cacheKey ] = promise;\n\n\t\treturn promise;\n\n\t}\n\n\tloadImageSource( sourceIndex, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\n\t\tif ( this.sourceCache[ sourceIndex ] !== undefined ) {\n\n\t\t\treturn this.sourceCache[ sourceIndex ].then( ( texture ) => texture.clone() );\n\n\t\t}\n\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tconst URL = self.URL || self.webkitURL;\n\n\t\tlet sourceURI = sourceDef.uri || '';\n\t\tlet isObjectURL = false;\n\n\t\tif ( sourceDef.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', sourceDef.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tconst blob = new Blob( [ bufferView ], { type: sourceDef.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t} else if ( sourceDef.uri === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Image ' + sourceIndex + ' is missing URI and bufferView' );\n\n\t\t}\n\n\t\tconst promise = Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tlet onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tconst texture = new Texture( imageBitmap );\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\t\tresolve( texture );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( LoaderUtils.resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\ttexture.userData.mimeType = sourceDef.mimeType || getImageURIMimeType( sourceDef.uri );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function ( error ) {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader: Couldn\\'t load texture', sourceURI );\n\t\t\tthrow error;\n\n\t\t} );\n\n\t\tthis.sourceCache[ sourceIndex ] = promise;\n\t\treturn promise;\n\n\t}\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @return {Promise<Texture>}\n\t */\n\tassignTexture( materialParams, mapName, mapDef, colorSpace ) {\n\n\t\tconst parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\tif ( ! texture ) return null;\n\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord > 0 ) {\n\n\t\t\t\ttexture = texture.clone();\n\t\t\t\ttexture.channel = mapDef.texCoord;\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tconst transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tconst gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( colorSpace !== undefined ) {\n\n\t\t\t\ttexture.colorSpace = colorSpace;\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accommodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tassignFinalMaterial( mesh ) {\n\n\t\tconst geometry = mesh.geometry;\n\t\tlet material = mesh.material;\n\n\t\tconst useDerivativeTangents = geometry.attributes.tangent === undefined;\n\t\tconst useVertexColors = geometry.attributes.color !== undefined;\n\t\tconst useFlatShading = geometry.attributes.normal === undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tconst cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tlet pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tconst cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tlet lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\t\t\t\tlineMaterial.map = material.map;\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useDerivativeTangents || useVertexColors || useFlatShading ) {\n\n\t\t\tlet cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( useDerivativeTangents ) cacheKey += 'derivative-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\n\t\t\tlet cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\n\t\t\t\tif ( useDerivativeTangents ) {\n\n\t\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\t\tif ( cachedMaterial.normalScale ) cachedMaterial.normalScale.y *= - 1;\n\t\t\t\t\tif ( cachedMaterial.clearcoatNormalScale ) cachedMaterial.clearcoatNormalScale.y *= - 1;\n\n\t\t\t\t}\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t}\n\n\tgetMaterialType( /* materialIndex */ ) {\n\n\t\treturn MeshStandardMaterial;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tloadMaterial( materialIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst materialDef = json.materials[ materialIndex ];\n\n\t\tlet materialType;\n\t\tconst materialParams = {};\n\t\tconst materialExtensions = materialDef.extensions || {};\n\n\t\tconst pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tconst kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.setRGB( array[ 0 ], array[ 1 ], array[ 2 ], LinearSRGBColorSpace );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture, SRGBColorSpace ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tconst alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = materialDef.normalTexture.scale;\n\n\t\t\t\tmaterialParams.normalScale.set( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tconst emissiveFactor = materialDef.emissiveFactor;\n\t\t\tmaterialParams.emissive = new Color().setRGB( emissiveFactor[ 0 ], emissiveFactor[ 1 ], emissiveFactor[ 2 ], LinearSRGBColorSpace );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tconst material = new materialType( materialParams );\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { materials: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t}\n\n\t/** When Object3D instances are targeted by animation, they need unique names. */\n\tcreateUniqueName( originalName ) {\n\n\t\tconst sanitizedName = PropertyBinding.sanitizeNodeName( originalName || '' );\n\n\t\tif ( sanitizedName in this.nodeNamesUsed ) {\n\n\t\t\treturn sanitizedName + '_' + ( ++ this.nodeNamesUsed[ sanitizedName ] );\n\n\t\t} else {\n\n\t\t\tthis.nodeNamesUsed[ sanitizedName ] = 0;\n\n\t\t\treturn sanitizedName;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tloadGeometries( primitives ) {\n\n\t\tconst parser = this;\n\t\tconst extensions = this.extensions;\n\t\tconst cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst primitive = primitives[ i ];\n\t\t\tconst cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tconst cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tlet geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tloadMesh( meshIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\tconst meshDef = json.meshes[ meshIndex ];\n\t\tconst primitives = meshDef.primitives;\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst materials = results.slice( 0, results.length - 1 );\n\t\t\tconst geometries = results[ results.length - 1 ];\n\n\t\t\tconst meshes = [];\n\n\t\t\tfor ( let i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tconst geometry = geometries[ i ];\n\t\t\t\tconst primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tlet mesh;\n\n\t\t\t\tconst material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true ) {\n\n\t\t\t\t\t\t// normalize skin weights to fix malformed assets (see #15319)\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tif ( primitive.extensions ) addUnknownExtensionsToUserData( extensions, mesh, primitive );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tparser.associations.set( meshes[ i ], {\n\t\t\t\t\tmeshes: meshIndex,\n\t\t\t\t\tprimitives: i\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\tif ( meshDef.extensions ) addUnknownExtensionsToUserData( extensions, meshes[ 0 ], meshDef );\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tconst group = new Group();\n\n\t\t\tif ( meshDef.extensions ) addUnknownExtensionsToUserData( extensions, group, meshDef );\n\n\t\t\tparser.associations.set( group, { meshes: meshIndex } );\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tloadCamera( cameraIndex ) {\n\n\t\tlet camera;\n\t\tconst cameraDef = this.json.cameras[ cameraIndex ];\n\t\tconst params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Skeleton>}\n\t */\n\tloadSkin( skinIndex ) {\n\n\t\tconst skinDef = this.json.skins[ skinIndex ];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = skinDef.joints.length; i < il; i ++ ) {\n\n\t\t\tpending.push( this._loadNodeShallow( skinDef.joints[ i ] ) );\n\n\t\t}\n\n\t\tif ( skinDef.inverseBindMatrices !== undefined ) {\n\n\t\t\tpending.push( this.getDependency( 'accessor', skinDef.inverseBindMatrices ) );\n\n\t\t} else {\n\n\t\t\tpending.push( null );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst inverseBindMatrices = results.pop();\n\t\t\tconst jointNodes = results;\n\n\t\t\t// Note that bones (joint nodes) may or may not be in the\n\t\t\t// scene graph at this time.\n\n\t\t\tconst bones = [];\n\t\t\tconst boneInverses = [];\n\n\t\t\tfor ( let i = 0, il = jointNodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst jointNode = jointNodes[ i ];\n\n\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\tconst mat = new Matrix4();\n\n\t\t\t\t\tif ( inverseBindMatrices !== null ) {\n\n\t\t\t\t\t\tmat.fromArray( inverseBindMatrices.array, i * 16 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinDef.joints[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new Skeleton( bones, boneInverses );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tloadAnimation( animationIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\n\t\tconst animationDef = json.animations[ animationIndex ];\n\t\tconst animationName = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\tconst pendingNodes = [];\n\t\tconst pendingInputAccessors = [];\n\t\tconst pendingOutputAccessors = [];\n\t\tconst pendingSamplers = [];\n\t\tconst pendingTargets = [];\n\n\t\tfor ( let i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tconst channel = animationDef.channels[ i ];\n\t\t\tconst sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tconst target = channel.target;\n\t\t\tconst name = target.node;\n\t\t\tconst input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tconst output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tif ( target.node === undefined ) continue;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tconst nodes = dependencies[ 0 ];\n\t\t\tconst inputAccessors = dependencies[ 1 ];\n\t\t\tconst outputAccessors = dependencies[ 2 ];\n\t\t\tconst samplers = dependencies[ 3 ];\n\t\t\tconst targets = dependencies[ 4 ];\n\n\t\t\tconst tracks = [];\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst node = nodes[ i ];\n\t\t\t\tconst inputAccessor = inputAccessors[ i ];\n\t\t\t\tconst outputAccessor = outputAccessors[ i ];\n\t\t\t\tconst sampler = samplers[ i ];\n\t\t\t\tconst target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tif ( node.updateMatrix ) {\n\n\t\t\t\t\tnode.updateMatrix();\n\n\t\t\t\t}\n\n\t\t\t\tconst createdTracks = parser._createAnimationTracks( node, inputAccessor, outputAccessor, sampler, target );\n\n\t\t\t\tif ( createdTracks ) {\n\n\t\t\t\t\tfor ( let k = 0; k < createdTracks.length; k ++ ) {\n\n\t\t\t\t\t\ttracks.push( createdTracks[ k ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new AnimationClip( animationName, undefined, tracks );\n\n\t\t} );\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( nodeDef.mesh === undefined ) return null;\n\n\t\treturn parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\tconst node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\tfor ( let i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tloadNode( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tconst nodePending = parser._loadNodeShallow( nodeIndex );\n\n\t\tconst childPending = [];\n\t\tconst childrenDef = nodeDef.children || [];\n\n\t\tfor ( let i = 0, il = childrenDef.length; i < il; i ++ ) {\n\n\t\t\tchildPending.push( parser.getDependency( 'node', childrenDef[ i ] ) );\n\n\t\t}\n\n\t\tconst skeletonPending = nodeDef.skin === undefined\n\t\t\t? Promise.resolve( null )\n\t\t\t: parser.getDependency( 'skin', nodeDef.skin );\n\n\t\treturn Promise.all( [\n\t\t\tnodePending,\n\t\t\tPromise.all( childPending ),\n\t\t\tskeletonPending\n\t\t] ).then( function ( results ) {\n\n\t\t\tconst node = results[ 0 ];\n\t\t\tconst children = results[ 1 ];\n\t\t\tconst skeleton = results[ 2 ];\n\n\t\t\tif ( skeleton !== null ) {\n\n\t\t\t\t// This full traverse should be fine because\n\t\t\t\t// child glTF nodes have not been added to this node yet.\n\t\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\t\tif ( ! mesh.isSkinnedMesh ) return;\n\n\t\t\t\t\tmesh.bind( skeleton, _identityMatrix );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\tnode.add( children[ i ] );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t// ._loadNodeShallow() parses a single node.\n\t// skin and child nodes are created and added in .loadNode() (no '_' prefix).\n\t_loadNodeShallow( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst parser = this;\n\n\t\t// This method is called from .loadNode() and .loadSkin().\n\t\t// Cache a node to avoid duplication.\n\n\t\tif ( this.nodeCache[ nodeIndex ] !== undefined ) {\n\n\t\t\treturn this.nodeCache[ nodeIndex ];\n\n\t\t}\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\n\t\tconst nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\n\n\t\tconst pending = [];\n\n\t\tconst meshPromise = parser._invokeOne( function ( ext ) {\n\n\t\t\treturn ext.createNodeMesh && ext.createNodeMesh( nodeIndex );\n\n\t\t} );\n\n\t\tif ( meshPromise ) {\n\n\t\t\tpending.push( meshPromise );\n\n\t\t}\n\n\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t} ) );\n\n\t\t}\n\n\t\tparser._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\n\n\t\t} ).forEach( function ( promise ) {\n\n\t\t\tpending.push( promise );\n\n\t\t} );\n\n\t\tthis.nodeCache[ nodeIndex ] = Promise.all( pending ).then( function ( objects ) {\n\n\t\t\tlet node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( let i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = nodeName;\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tconst matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ! parser.associations.has( node ) ) {\n\n\t\t\t\tparser.associations.set( node, {} );\n\n\t\t\t}\n\n\t\t\tparser.associations.get( node ).nodes = nodeIndex;\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t\treturn this.nodeCache[ nodeIndex ];\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tloadScene( sceneIndex ) {\n\n\t\tconst extensions = this.extensions;\n\t\tconst sceneDef = this.json.scenes[ sceneIndex ];\n\t\tconst parser = this;\n\n\t\t// Loader returns Group, not Scene.\n\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\tconst scene = new Group();\n\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\n\n\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\tconst nodeIds = sceneDef.nodes || [];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\tpending.push( parser.getDependency( 'node', nodeIds[ i ] ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function ( nodes ) {\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tscene.add( nodes[ i ] );\n\n\t\t\t}\n\n\t\t\t// Removes dangling associations, associations that reference a node that\n\t\t\t// didn't make it into the scene.\n\t\t\tconst reduceAssociations = ( node ) => {\n\n\t\t\t\tconst reducedAssociations = new Map();\n\n\t\t\t\tfor ( const [ key, value ] of parser.associations ) {\n\n\t\t\t\t\tif ( key instanceof Material || key instanceof Texture ) {\n\n\t\t\t\t\t\treducedAssociations.set( key, value );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tnode.traverse( ( node ) => {\n\n\t\t\t\t\tconst mappings = parser.associations.get( node );\n\n\t\t\t\t\tif ( mappings != null ) {\n\n\t\t\t\t\t\treducedAssociations.set( node, mappings );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\treturn reducedAssociations;\n\n\t\t\t};\n\n\t\t\tparser.associations = reduceAssociations( scene );\n\n\t\t\treturn scene;\n\n\t\t} );\n\n\t}\n\n\t_createAnimationTracks( node, inputAccessor, outputAccessor, sampler, target ) {\n\n\t\tconst tracks = [];\n\n\t\tconst targetName = node.name ? node.name : node.uuid;\n\t\tconst targetNames = [];\n\n\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\tif ( object.morphTargetInfluences ) {\n\n\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\ttargetNames.push( targetName );\n\n\t\t}\n\n\t\tlet TypedKeyframeTrack;\n\n\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tcase PATH_PROPERTIES.position:\n\t\t\tcase PATH_PROPERTIES.scale:\n\n\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tswitch ( outputAccessor.itemSize ) {\n\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\tcase 3:\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tconst interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\n\t\tconst outputArray = this._getArrayFromAccessor( outputAccessor );\n\n\t\tfor ( let j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\tconst track = new TypedKeyframeTrack(\n\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\tinputAccessor.array,\n\t\t\t\toutputArray,\n\t\t\t\tinterpolation\n\t\t\t);\n\n\t\t\t// Override interpolation with custom factory method.\n\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\tthis._createCubicSplineTrackInterpolant( track );\n\n\t\t\t}\n\n\t\t\ttracks.push( track );\n\n\t\t}\n\n\t\treturn tracks;\n\n\t}\n\n\t_getArrayFromAccessor( accessor ) {\n\n\t\tlet outputArray = accessor.array;\n\n\t\tif ( accessor.normalized ) {\n\n\t\t\tconst scale = getNormalizedComponentScale( outputArray.constructor );\n\t\t\tconst scaled = new Float32Array( outputArray.length );\n\n\t\t\tfor ( let j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t}\n\n\t\t\toutputArray = scaled;\n\n\t\t}\n\n\t\treturn outputArray;\n\n\t}\n\n\t_createCubicSplineTrackInterpolant( track ) {\n\n\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\tconst interpolantType = ( this instanceof QuaternionKeyframeTrack ) ? GLTFCubicSplineQuaternionInterpolant : GLTFCubicSplineInterpolant;\n\n\t\t\treturn new interpolantType( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t};\n\n\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t}\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n */\nfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst box = new Box3();\n\n\tif ( attributes.POSITION !== undefined ) {\n\n\t\tconst accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\tconst min = accessor.min;\n\t\tconst max = accessor.max;\n\n\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\tbox.set(\n\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] )\n\t\t\t);\n\n\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\tbox.min.multiplyScalar( boxScale );\n\t\t\t\tbox.max.multiplyScalar( boxScale );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\treturn;\n\n\t\t}\n\n\t} else {\n\n\t\treturn;\n\n\t}\n\n\tconst targets = primitiveDef.targets;\n\n\tif ( targets !== undefined ) {\n\n\t\tconst maxDisplacement = new Vector3();\n\t\tconst vector = new Vector3();\n\n\t\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tconst target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\tconst accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\tconst min = accessor.min;\n\t\t\t\tconst max = accessor.max;\n\n\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\n\t\t\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\t\t\tvector.multiplyScalar( boxScale );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\tbox.expandByVector( maxDisplacement );\n\n\t}\n\n\tgeometry.boundingBox = box;\n\n\tconst sphere = new Sphere();\n\n\tbox.getCenter( sphere.center );\n\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\tgeometry.boundingSphere = sphere;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst pending = [];\n\n\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t.then( function ( accessor ) {\n\n\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t} );\n\n\t}\n\n\tfor ( const gltfAttributeName in attributes ) {\n\n\t\tconst threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t}\n\n\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\tconst accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\tgeometry.setIndex( accessor );\n\n\t\t} );\n\n\t\tpending.push( accessor );\n\n\t}\n\n\tif ( ColorManagement.workingColorSpace !== LinearSRGBColorSpace && 'COLOR_0' in attributes ) {\n\n\t\tconsole.warn( `THREE.GLTFLoader: Converting vertex colors from \"srgb-linear\" to \"${ColorManagement.workingColorSpace}\" not supported.` );\n\n\t}\n\n\tassignExtrasToUserData( geometry, primitiveDef );\n\n\tcomputeBounds( geometry, primitiveDef, parser );\n\n\treturn Promise.all( pending ).then( function () {\n\n\t\treturn primitiveDef.targets !== undefined\n\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t: geometry;\n\n\t} );\n\n}\n\nexport { GLTFLoader };\n","import * as React from 'react';\r\n\r\nimport * as three from 'three';\r\nimport { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';\r\n\r\nfunction setupScene() {\r\n  const VIEWPORT_WIDTH = 250;\r\n  const VIEWPORT_HEIGHT = 200;\r\n\r\n  const scene = new three.Scene();\r\n  const camera = new three.PerspectiveCamera(45, VIEWPORT_WIDTH / VIEWPORT_HEIGHT,\r\n      0.1, 1000);\r\n\r\n  const renderer = new three.WebGLRenderer();\r\n  renderer.setClearColor(new three.Color(0x191919));\r\n  renderer.setSize(VIEWPORT_WIDTH, VIEWPORT_HEIGHT);\r\n  renderer.shadowMap.enabled = true;\r\n  renderer.shadowMap.type = three.PCFSoftShadowMap\r\n\r\n  const spotLight = new three.SpotLight(0xFFFFFF);\r\n  spotLight.position.set(0, 10, 2);\r\n  spotLight.angle = Math.PI / 3;\r\n  spotLight.castShadow = true;\r\n  spotLight.intensity = 200;\r\n  spotLight.distance = 15;\r\n  spotLight.penumbra = 0.2;\r\n  spotLight.shadow.mapSize = new three.Vector2(1024, 1024);\r\n  scene.add(spotLight);\r\n\r\n  const ambientLight = new three.AmbientLight(0x353535);\r\n  scene.add(ambientLight);\r\n\r\n  const planeGeometry = new three.PlaneGeometry(60, 20);\r\n  const planeMaterial = new three.MeshLambertMaterial({\r\n          color:0x353535\r\n      });\r\n  const plane = new three.Mesh(planeGeometry,planeMaterial);\r\n  plane.position.set(0,0,0);\r\n  scene.add(plane);\r\n\r\n  const loader = new GLTFLoader();\r\n  new Promise((resolve, reject) => {\r\n      loader.load(\r\n          'sytwc-threejs/torus_final.glb',\r\n          gltf => {\r\n            resolve();\r\n            const torus = gltf.scene.getObjectByName('TorusFinalWithText');\r\n            torus.position.set(0, 5, 0);\r\n            spotLight.target = torus;\r\n            scene.add(gltf.scene.children[0]);\r\n            camera.position.set(0, 8.2, 0);\r\n            camera.lookAt(torus.position);\r\n            camera.rotation.z = Math.PI / 2;\r\n\r\n            const mixer = new three.AnimationMixer(torus);\r\n            gltf.animations.forEach(clip => mixer.clipAction(clip).play());\r\n            const clock = new three.Clock();\r\n            animate();\r\n            async function animate() {\r\n              requestAnimationFrame(animate);\r\n              var delta = clock.getDelta();\r\n              if (mixer) mixer.update(delta);\r\n              renderer.render(scene, camera);\r\n            }\r\n\r\n            // clear container first\r\n            const container = document.querySelector('.mainAnimDiv');\r\n            if (container.children.length > 0) {\r\n              for (const child of container.children) {\r\n                child.remove();\r\n              }\r\n            }\r\n            container.appendChild(renderer.domElement);\r\n\r\n            renderer.render(scene, camera);\r\n          },\r\n          undefined,\r\n          (error) => reject(error)\r\n        );\r\n      });\r\n}\r\n\r\nconst MainAnimation = () => {\r\n  React.useEffect(setupScene, []);\r\n\r\n  return (\r\n    <div className='mainAnimDiv'>\r\n      {/* setupScene function attaches the renderer as child of this node */}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MainAnimation\r\n","import * as React from 'react';\r\n\r\nconst ContentAndSidebar = ({sidebarContent, children}) => {\r\n  return (\r\n    <div className='contentAndSidebar'>\r\n      <div className='content'>\r\n        {children}\r\n      </div>\r\n      <div className='sidebar'>\r\n        {sidebarContent}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ContentAndSidebar\r\n","export const fetchInnerHTML = `\r\n<div>\r\n  <h1>Descargas</h1>\r\n  <a href=\"/sytwc-threejs/fetch_box.glb\">Descargar el modelo fetch_box</a>\r\n  <a href=\"/sytwc-threejs/animation1_emission.glb\">Descargar la escena entera</a>\r\n  <hr>\r\n  <h1>Nivel de experiencia de los empleados con la herramienta/tecnologa</h1>\r\n  <ul>\r\n      <li>n. de personas que la han utilizado</li>\r\n      <li>n. de proyectos que la empresa ha realizado previamente con esa herramienta/tecnologa y su nivel de xito.</li>\r\n      <li>aos de experiencia totales en el equipo.</li>\r\n      <li>Existencia de otras tecnologas.</li>\r\n  </ul>\r\n\r\n  <h1>Desarrollo tecnolgico de las herramientas y libreras</h1>\r\n  <ul>\r\n      <li>n. de cambios de versin/periodo de tiempo</li>\r\n      <li>nmero de bugs pendientes por resolver</li>\r\n      <li>n. de contribuciones (cdigo abierto)</li>\r\n      <li>n de bsquedas a diario</li>\r\n      <ul>\r\n          <li>xito de otros proyectos con herramientas similares</li>\r\n          <li>cantidad de proyectos relevantes que lo utilizan y han tenido xito</li>\r\n      </ul>\r\n      <li>Apoyo de comunidad de las herramientas y libreras</li>\r\n      <ul>\r\n          <li>n. y calidad de discusiones en internet</li>\r\n          <li>nivel de documentacin</li>\r\n          <li>n. de empresas que utilizan o apoyan la tecnologa.</li>\r\n          <li>n. de empresas que estn buscando trabajadores con experiencia en dicha herramienta.</li>\r\n      </ul>\r\n      <li>Costes de licencias</li>\r\n      <ul>\r\n          <li>Es cdigo abierto?</li>\r\n          <li>Pago periodico o solo una vez?</li>\r\n      </ul>\r\n      <li>Decisiones opinionadas realizadas</li>\r\n      <ul>\r\n          <li>Ventajas/desventajas de cara al proyecto del cliente?</li>\r\n      </ul>\r\n      <li>Facilidad de uso</li>\r\n      <ul>\r\n          <li>encuestas al usuario</li>\r\n          <li>n. de quejas</li>\r\n      </ul>\r\n  </ul>\r\n\r\n  <h1>Nivel de satisfaccin de clientes</h1>\r\n  <ul>\r\n      <li>Encuestas</li>\r\n      <li>Nivel de xito del cliente</li>\r\n  </ul>\r\n\r\n  <h1>Niveles de xito en proyectos que utilizan esas tecnologas</h1>\r\n  <ul>\r\n      <li>Nmero de ventas</li>\r\n      <li>Beneficio cuatrimestral de la empresa.</li>\r\n      <li>Nmero de descargas.</li>\r\n  </ul>\r\n\r\n  <h1>Mercado</h1>\r\n  <ul>\r\n      <li>Ofertas de tecnologas</li>\r\n      <li>N. de ofertas de trabajo</li>\r\n      <li>Menciones de tecnologas concretas.</li>\r\n  </ul>\r\n<div/>\r\n`;","export const modelInnerHTML = `\r\n<div>\r\n  <h1>Descargas</h1>\r\n  <a href=\"/sytwc-threejs/model_box.glb\">Descargar el modelo model_box</a>\r\n  <a href=\"sytwc-threejs/animation1_emission.glb\"><a href=\"/animation1_emission.glb\">Descargar la escena entera</a></a>\r\n  <hr>\r\n  <h1>Estructura de los Datos</h1>\r\n\r\n  <h2>Dimensiones</h2>\r\n\r\n  <h3>Employee</h3>\r\n  <ul>\r\n      <li>Employee id.</li>\r\n      <li>Name</li>\r\n      <li>Title</li>\r\n      <li>Department</li>\r\n  </ul>\r\n\r\n  <h3>Tool</h3>\r\n  <ul>\r\n      <li>Tool id.</li>\r\n      <li>Name</li>\r\n      <li>AuthorCompany</li>\r\n      <li>Type</li>\r\n      <li>Specialization</li>\r\n  </ul>\r\n\r\n  <h3>Date</h3>\r\n  <ul>\r\n      <li>Date id.</li>\r\n      <li>Date</li>\r\n  </ul>\r\n\r\n  <h3>Community</h3>\r\n  <ul>\r\n      <li>Community id.</li>\r\n      <li>Name</li>\r\n      <li>Type</li>\r\n  </ul>\r\n\r\n  <h3>Company</h3>\r\n  <ul>\r\n      <li>Company id.</li>\r\n      <li>Name</li>\r\n      <li>EmployeeAmount</li>\r\n      <li>AmountOfSearches</li>\r\n  </ul>\r\n\r\n  <h3>Project</h3>\r\n  <ul>\r\n      <li>Project id.</li>\r\n      <li>Project name</li>\r\n      <li>AmountOfContributors</li>\r\n      <li>Downloads</li>\r\n      <li>Searches</li>\r\n  </ul>\r\n\r\n  <h3>Market</h3>\r\n  <ul>\r\n      <li>Market id.</li>\r\n  </ul>\r\n\r\n  <h2>Mapa Dato - Tabla</h2>\r\n  <h3>Nivel de experiencia del equipo</h3>\r\n\r\n  <p>Aos de experiencia.</p>\r\n\r\n  <h3>Employee - Tool</h3>\r\n  <p>Valoracin de usuarios de la facilidad de aprendizaje de una herramienta.</p>\r\n\r\n  <h3>Tool</h3>\r\n  <p>Existencia de otras tecnologas</p>\r\n\r\n  <p>Desarrollo tecnolgico de las herramientas y libreras</p>\r\n\r\n  <p>nmero de bsquedas</p>\r\n\r\n  <h3>Tool - Date</h3>\r\n  <p>nmero de bugs pendientes por resolver.</p>\r\n\r\n  <h3>Community - Tool</h3>\r\n  <p>n. de contribuciones (cdigo abierto) que el proyecto recibe.</p>\r\n\r\n  <h3>Community - Tool</h3>\r\n  <p>Apoyo de comunidad de las herramientas y libreras</p>\r\n\r\n  <p>n. y calidad de discusiones en internet.</p>\r\n\r\n  <h3>community - tool - date</h3>\r\n  <p>nivel de documentacin.</p>\r\n\r\n  <h3>community - tool</h3>\r\n  <p>n. de empresas que utilizan o apoyan la tecnologa.</p>\r\n\r\n  <h3>Tool - Project - Company</h3>\r\n  <p>Valoracin de herramienta en un ranking de herramientas.</p>\r\n\r\n  <h3>Community - Tool - Date</h3>\r\n  <p>Costes de licencias</p>\r\n\r\n  <p>Es cdigo abierto?</p>\r\n\r\n  <h3>Tool</h3>\r\n  <p>De pago?</p>\r\n\r\n  <h3>Tool</h3>\r\n  <p>Pago periodico o solo una vez?</p>\r\n\r\n  <h3>Tool</h3>\r\n  <p>Coste monetario.</p>\r\n\r\n  <h3>Tool</h3>\r\n  <p>Niveles de xito de proyectos que utilizan la herramienta.</p>\r\n\r\n  <h3>Company - Date</h3>\r\n  <p>Beneficios cuatrimestrales de la empresa.</p>\r\n\r\n  <h3>Company</h3>\r\n  <p>Nivel de importancia de la empresa que la utiliza en la industria (efecto de la reputacin, cmo de popular es).</p>\r\n\r\n  <h3>Tool - project - company</h3>\r\n  <p>Cantidad de proyectos que utilizan la herramienta.</p>\r\n\r\n  <h3>Project</h3>\r\n  <p>Nmero de descargas. (nivel de xito de proyecto)</p>\r\n\r\n  <h3>Project</h3>\r\n  <p>Nmero de bsquedas.</p>\r\n\r\n  <h3>Tool</h3>\r\n  <p>Niveles de xito de la herramienta.</p>\r\n\r\n  <p>Nmero de descargas.</p>\r\n\r\n  <h3>Tool</h3>\r\n  <p>Nmero de bsquedas</p>\r\n\r\n  <h3>Tool</h3>\r\n  <p>Mercado</p>\r\n\r\n  <p>N de menciones de tecnologa en ofertas de trabajo.</p>\r\n\r\n  <h3>Market - Tool - Date</h3>\r\n  <p>N. de ofertas de trabajo.</p>\r\n\r\n  <h3>Market - Date</h3>\r\n  <p>(...)</p>\r\n  \r\n  <h2>Facts</h2>\r\n\r\n  <h3>Employee - Tool</h3>\r\n  <ul>\r\n      <li>Employee id.</li>\r\n      <li>Tool id.</li>\r\n      <li>YearsOfExperience</li>\r\n  </ul>\r\n\r\n  <h3>Project - Tool</h3>\r\n  <ul>\r\n      <li>Project id.</li>\r\n      <li>Tool id.</li>\r\n  </ul>\r\n\r\n  <h3>Project - Company</h3>\r\n  <ul>\r\n      <li>Project id.</li>\r\n      <li>Company id.</li>\r\n      <li>AmountOfEmployeesAssigned</li>\r\n  </ul>\r\n\r\n  <h3>Tool - Date</h3>\r\n  <ul>\r\n      <li>Tool id.</li>\r\n      <li>Date</li>\r\n      <li>Versin</li>\r\n      <li>Nivel de inters</li>\r\n      <li>TipoDeCambio</li>\r\n  </ul>\r\n\r\n  <h3>Community - Tool</h3>\r\n  <ul>\r\n      <li>Community Id.</li>\r\n      <li>Tool id.</li>\r\n      <li>AmountOfBugsReported</li>\r\n      <li>AmounOfBugsSolved</li>\r\n      <li>AmountOfChangesCommited</li>\r\n      <li>AmountOfDiscussions</li>\r\n  </ul>\r\n\r\n  <h3>Tool - Project - Company</h3>\r\n  <ul>\r\n      <li>Tool id.</li>\r\n      <li>Project id.</li>\r\n      <li>Company id.</li>\r\n  </ul>\r\n\r\n  <h3>Community - Tool - Date</h3>\r\n  <ul>\r\n      <li>Community id.</li>\r\n      <li>Tool id.</li>\r\n      <li>Date id.</li>\r\n      <li>Valoracin(0-10)</li>\r\n      <li>PuestoEnRanking</li>\r\n  </ul>\r\n\r\n  <h3>Company - Date</h3>\r\n  <ul>\r\n      <li>Company id.</li>\r\n      <li>Year</li>\r\n      <li>Quarter</li>\r\n      <li>Benefit</li>\r\n  </ul>\r\n\r\n  <h3>Market - Date</h3>\r\n  <ul>\r\n      <li>Market id.</li>\r\n      <li>Date id.</li>\r\n      <li>TotalAmountOfOffers</li>\r\n  </ul>\r\n\r\n  <p>(...)</p>\r\n</div>\r\n`;","import * as React from 'react';\r\n\r\nimport ContentAndSidebar from './content-and-sidebar';\r\n\r\nimport * as three from 'three';\r\nimport { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';\r\n\r\nimport { fetchInnerHTML } from '../../static/sytwc-threejs/fetch_innerhtml';\r\nimport { modelInnerHTML } from '../../static/sytwc-threejs/model_innerhtml';\r\n\r\nfunction setupScene() {\r\n  const VIEWPORT_WIDTH = 500;\r\n  const VIEWPORT_HEIGHT = 400;\r\n\r\n  const scene = new three.Scene();\r\n  const camera = new three.PerspectiveCamera(45, VIEWPORT_WIDTH / VIEWPORT_HEIGHT,\r\n      0.1, 1000);\r\n\r\n  const renderer = new three.WebGLRenderer({ antialias: true });\r\n  renderer.setClearColor(new three.Color(0x232323));\r\n  renderer.setSize(VIEWPORT_WIDTH, VIEWPORT_HEIGHT);\r\n  renderer.shadowMap.enabled = true;\r\n\r\n  const ambientLight = new three.AmbientLight(0x373737);\r\n  scene.add(ambientLight);\r\n\r\n  const loader = new GLTFLoader();\r\n  new Promise((resolve, reject) => {\r\n      loader.load(\r\n          '/sytwc-threejs/animation1_emission.glb',\r\n          gltf => {\r\n            resolve();\r\n            scene.add(gltf.scene);\r\n            gltf.scene.traverse(object => {\r\n                  object.castShadow = true;\r\n                  object.receiveShadow = true;\r\n                });\r\n\r\n            const centerCube =\r\n                  gltf.scene.getObjectByName('Cube007');\r\n            const spotLight = new three.SpotLight(0xFFFFFF);\r\n            spotLight.position.set(4, 4, 0);\r\n            spotLight.angle = Math.PI / 4.5;\r\n            spotLight.target = centerCube;\r\n            spotLight.castShadow = true;\r\n            spotLight.shadow.bias = -0.0005;\r\n            scene.add(spotLight);\r\n\r\n            camera.rotation.z = Math.PI / 2;\r\n            camera.position.set(7.8, 5, 0);\r\n            const center = new three.Vector3(scene.position.x,\r\n                  scene.position.y + 4, scene.position.z);\r\n            camera.lookAt(center);\r\n\r\n            const mixer = new three.AnimationMixer(gltf.scene);\r\n            gltf.animations.forEach(clip => mixer.clipAction(clip).play());\r\n            const clock = new three.Clock();\r\n\r\n            // clear container first\r\n            const container = document.querySelector('.glBlock');\r\n            if (container.children.length > 0) {\r\n              for (const child of container.children) {\r\n                child.remove();\r\n              }\r\n            }\r\n            container.appendChild(renderer.domElement);\r\n\r\n            const modelCube = scene.children[1].getObjectByName('Model_cube');\r\n            modelCube.scale.set(0.9, 0.9, 0.9);\r\n            const fetchCube = scene.children[1].getObjectByName('Fetch_cube');\r\n            fetchCube.scale.set(0.9, 0.9, 0.9)\r\n\r\n            let mousePosition = new three.Vector2();\r\n            window.addEventListener('pointermove', (event) => {\r\n              const rect = renderer.domElement.getBoundingClientRect();\r\n              mousePosition.x =\r\n                  ((event.clientX - rect.left) / (rect.right - rect.left)) * 2 - 1;\r\n              mousePosition.y =\r\n                  - ((event.clientY - rect.top) / (rect.bottom - rect.top)) * 2 + 1;\r\n            });\r\n\r\n            function gameloop() {\r\n              const delta = clock.getDelta();\r\n              if (mixer) {\r\n                mixer.update(delta);\r\n              }\r\n              update(scene, camera, mousePosition);\r\n              renderer.render(scene, camera);\r\n              requestAnimationFrame(gameloop);\r\n            }\r\n            gameloop();\r\n          },\r\n          undefined,\r\n          (error) => reject(error)\r\n        );\r\n      });\r\n}\r\n\r\nfunction update(scene, camera, mousePosition) {\r\n  document.body.style.cursor = \"auto\";\r\n  const fetchCube = scene.children[1].getObjectByName('Fetch_cube');\r\n  fetchCube.scale.set(0.9, 0.9, 0.9);\r\n  const modelCube = scene.children[1].getObjectByName('Model_cube');\r\n  modelCube.scale.set(0.9, 0.9, 0.9);\r\n  window.removeEventListener('click', setFetchContent);\r\n  window.removeEventListener('click', setModelContent);\r\n\r\n  const raycaster = new three.Raycaster();\r\n  raycaster.setFromCamera(mousePosition, camera);\r\n  const intersects = raycaster.intersectObjects(scene.children);\r\n  for (let i = 0; i < intersects.length; i++) {\r\n    if (intersects[i].object.id === fetchCube.id) {\r\n      fetchCube.scale.set(0.7, 0.7, 0.7);\r\n      window.addEventListener('click', setFetchContent, { once: true });\r\n      document.body.style.cursor = \"pointer\";\r\n    } else if (intersects[i].object.id === modelCube.id) {\r\n      modelCube.scale.set(0.7, 0.7, 0.7);\r\n      window.addEventListener('click', setModelContent, { once: true });\r\n      document.body.style.cursor = \"pointer\";\r\n    }\r\n  }\r\n}\r\n\r\n// meant for event listener click on the fetch box\r\nfunction setFetchContent() {\r\n  const sidebarDOMNode = document.querySelector('.sidebar');\r\n  if (sidebarDOMNode) {\r\n    for (const child of sidebarDOMNode.children) {\r\n      child.remove();\r\n    }\r\n    const fetchTabContainer = document.createElement('div');\r\n    fetchTabContainer.style.color = 'white';\r\n    fetchTabContainer.innerHTML = fetchInnerHTML;\r\n    sidebarDOMNode.append(fetchTabContainer);\r\n  }\r\n}\r\n\r\n// meant for event listener click on the mode box\r\nfunction setModelContent() {\r\n  const sidebarDOMNode = document.querySelector('.sidebar');\r\n  if (sidebarDOMNode) {\r\n    for (const child of sidebarDOMNode.children) {\r\n      child.remove();\r\n    }\r\n    const fetchTabContainer = document.createElement('div');\r\n    fetchTabContainer.style.color = 'white';\r\n    fetchTabContainer.innerHTML = modelInnerHTML;\r\n    sidebarDOMNode.append(fetchTabContainer);\r\n  }\r\n}\r\n\r\nconst FirstGLBlock = () => {\r\n  React.useEffect(setupScene, []);\r\n\r\n  return (\r\n    <ContentAndSidebar\r\n        key='content1'\r\n        sidebarContent={<p style={{color: 'white'}}>Click any box to view it's information.</p>}>\r\n      <div className='glBlock'>\r\n        {/* The canvas is attached here */}\r\n      </div>\r\n    </ContentAndSidebar>\r\n  );\r\n}\r\n\r\nexport default FirstGLBlock\r\n","import {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3,\n\tPlane,\n\tRay,\n\tMathUtils\n} from 'three';\n\n// OrbitControls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nconst _changeEvent = { type: 'change' };\nconst _startEvent = { type: 'start' };\nconst _endEvent = { type: 'end' };\nconst _ray = new Ray();\nconst _plane = new Plane();\nconst TILT_LIMIT = Math.cos( 70 * MathUtils.DEG2RAD );\n\nclass OrbitControls extends EventDispatcher {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper();\n\n\t\tthis.object = object;\n\t\tthis.domElement = domElement;\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\tthis.target = new Vector3();\n\n\t\t// Sets the 3D cursor (similar to Blender), from which the maxTargetRadius takes effect\n\t\tthis.cursor = new Vector3();\n\n\t\t// How far you can dolly in and out ( PerspectiveCamera only )\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\t// How far you can zoom in and out ( OrthographicCamera only )\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\t// Limit camera target within a spherical area around the cursor\n\t\tthis.minTargetRadius = 0;\n\t\tthis.maxTargetRadius = Infinity;\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.05;\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true;\n\t\tthis.panSpeed = 1.0;\n\t\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\t\tthis.zoomToCursor = false;\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\n\n\t\t// The four arrow keys\n\t\tthis.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t// Touch fingers\n\t\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t\t// for reset\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// the target DOM element for key events\n\t\tthis._domElementKeyEvents = null;\n\n\t\t//\n\t\t// public methods\n\t\t//\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\treturn spherical.phi;\n\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\treturn spherical.theta;\n\n\t\t};\n\n\t\tthis.getDistance = function () {\n\n\t\t\treturn this.object.position.distanceTo( this.target );\n\n\t\t};\n\n\t\tthis.listenToKeyEvents = function ( domElement ) {\n\n\t\t\tdomElement.addEventListener( 'keydown', onKeyDown );\n\t\t\tthis._domElementKeyEvents = domElement;\n\n\t\t};\n\n\t\tthis.stopListenToKeyEvents = function () {\n\n\t\t\tthis._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\n\t\t\tthis._domElementKeyEvents = null;\n\n\t\t};\n\n\t\tthis.saveState = function () {\n\n\t\t\tscope.target0.copy( scope.target );\n\t\t\tscope.position0.copy( scope.object.position );\n\t\t\tscope.zoom0 = scope.object.zoom;\n\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\tscope.target.copy( scope.target0 );\n\t\t\tscope.object.position.copy( scope.position0 );\n\t\t\tscope.object.zoom = scope.zoom0;\n\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\tscope.update();\n\n\t\t\tstate = STATE.NONE;\n\n\t\t};\n\n\t\t// this method is exposed, but perhaps it would be better if we can make it private...\n\t\tthis.update = function () {\n\n\t\t\tconst offset = new Vector3();\n\n\t\t\t// so camera.up is the orbit axis\n\t\t\tconst quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\t\tconst quatInverse = quat.clone().invert();\n\n\t\t\tconst lastPosition = new Vector3();\n\t\t\tconst lastQuaternion = new Quaternion();\n\t\t\tconst lastTargetPosition = new Vector3();\n\n\t\t\tconst twoPI = 2 * Math.PI;\n\n\t\t\treturn function update( deltaTime = null ) {\n\n\t\t\t\tconst position = scope.object.position;\n\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t\t// angle from z-axis around y-axis\n\t\t\t\tspherical.setFromVector3( offset );\n\n\t\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\t\trotateLeft( getAutoRotationAngle( deltaTime ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t\t}\n\n\t\t\t\t// restrict theta to be between desired limits\n\n\t\t\t\tlet min = scope.minAzimuthAngle;\n\t\t\t\tlet max = scope.maxAzimuthAngle;\n\n\t\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\n\n\t\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\n\n\t\t\t\t\tif ( min <= max ) {\n\n\t\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\t\t\tMath.max( min, spherical.theta ) :\n\t\t\t\t\t\t\tMath.min( max, spherical.theta );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\t\tspherical.makeSafe();\n\n\n\t\t\t\t// move target to panned location\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t\t}\n\n\t\t\t\t// Limit the target distance from the cursor to create a sphere around the center of interest\n\t\t\t\tscope.target.sub( scope.cursor );\n\t\t\t\tscope.target.clampLength( scope.minTargetRadius, scope.maxTargetRadius );\n\t\t\t\tscope.target.add( scope.cursor );\n\n\t\t\t\t// adjust the camera position based on zoom only if we're not zooming to the cursor or if it's an ortho camera\n\t\t\t\t// we adjust zoom later in these cases\n\t\t\t\tif ( scope.zoomToCursor && performCursorZoom || scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\tspherical.radius = clampDistance( spherical.radius );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.radius = clampDistance( spherical.radius * scale );\n\n\t\t\t\t}\n\n\t\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t\t// adjust camera position\n\t\t\t\tlet zoomChanged = false;\n\t\t\t\tif ( scope.zoomToCursor && performCursorZoom ) {\n\n\t\t\t\t\tlet newRadius = null;\n\t\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t\t// move the camera down the pointer ray\n\t\t\t\t\t\t// this method avoids floating point error\n\t\t\t\t\t\tconst prevRadius = offset.length();\n\t\t\t\t\t\tnewRadius = clampDistance( prevRadius * scale );\n\n\t\t\t\t\t\tconst radiusDelta = prevRadius - newRadius;\n\t\t\t\t\t\tscope.object.position.addScaledVector( dollyDirection, radiusDelta );\n\t\t\t\t\t\tscope.object.updateMatrixWorld();\n\n\t\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t\t// adjust the ortho camera position based on zoom changes\n\t\t\t\t\t\tconst mouseBefore = new Vector3( mouse.x, mouse.y, 0 );\n\t\t\t\t\t\tmouseBefore.unproject( scope.object );\n\n\t\t\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / scale ) );\n\t\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\t\tzoomChanged = true;\n\n\t\t\t\t\t\tconst mouseAfter = new Vector3( mouse.x, mouse.y, 0 );\n\t\t\t\t\t\tmouseAfter.unproject( scope.object );\n\n\t\t\t\t\t\tscope.object.position.sub( mouseAfter ).add( mouseBefore );\n\t\t\t\t\t\tscope.object.updateMatrixWorld();\n\n\t\t\t\t\t\tnewRadius = offset.length();\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled.' );\n\t\t\t\t\t\tscope.zoomToCursor = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// handle the placement of the target\n\t\t\t\t\tif ( newRadius !== null ) {\n\n\t\t\t\t\t\tif ( this.screenSpacePanning ) {\n\n\t\t\t\t\t\t\t// position the orbit target in front of the new camera position\n\t\t\t\t\t\t\tscope.target.set( 0, 0, - 1 )\n\t\t\t\t\t\t\t\t.transformDirection( scope.object.matrix )\n\t\t\t\t\t\t\t\t.multiplyScalar( newRadius )\n\t\t\t\t\t\t\t\t.add( scope.object.position );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// get the ray and translation plane to compute target\n\t\t\t\t\t\t\t_ray.origin.copy( scope.object.position );\n\t\t\t\t\t\t\t_ray.direction.set( 0, 0, - 1 ).transformDirection( scope.object.matrix );\n\n\t\t\t\t\t\t\t// if the camera is 20 degrees above the horizon then don't adjust the focus target to avoid\n\t\t\t\t\t\t\t// extremely large values\n\t\t\t\t\t\t\tif ( Math.abs( scope.object.up.dot( _ray.direction ) ) < TILT_LIMIT ) {\n\n\t\t\t\t\t\t\t\tobject.lookAt( scope.target );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t_plane.setFromNormalAndCoplanarPoint( scope.object.up, scope.target );\n\t\t\t\t\t\t\t\t_ray.intersectPlane( _plane, scope.target );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / scale ) );\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\tzoomChanged = true;\n\n\t\t\t\t}\n\n\t\t\t\tscale = 1;\n\t\t\t\tperformCursorZoom = false;\n\n\t\t\t\t// update condition is:\n\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\t\tif ( zoomChanged ||\n\t\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ||\n\t\t\t\t\tlastTargetPosition.distanceToSquared( scope.target ) > 0 ) {\n\n\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\t\tlastTargetPosition.copy( scope.target );\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t};\n\n\t\t}();\n\n\t\tthis.dispose = function () {\n\n\t\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu );\n\n\t\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\t\tscope.domElement.removeEventListener( 'pointercancel', onPointerUp );\n\t\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\n\n\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\n\t\t\tif ( scope._domElementKeyEvents !== null ) {\n\n\t\t\t\tscope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\n\t\t\t\tscope._domElementKeyEvents = null;\n\n\t\t\t}\n\n\t\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t\t};\n\n\t\t//\n\t\t// internals\n\t\t//\n\n\t\tconst scope = this;\n\n\t\tconst STATE = {\n\t\t\tNONE: - 1,\n\t\t\tROTATE: 0,\n\t\t\tDOLLY: 1,\n\t\t\tPAN: 2,\n\t\t\tTOUCH_ROTATE: 3,\n\t\t\tTOUCH_PAN: 4,\n\t\t\tTOUCH_DOLLY_PAN: 5,\n\t\t\tTOUCH_DOLLY_ROTATE: 6\n\t\t};\n\n\t\tlet state = STATE.NONE;\n\n\t\tconst EPS = 0.000001;\n\n\t\t// current position in spherical coordinates\n\t\tconst spherical = new Spherical();\n\t\tconst sphericalDelta = new Spherical();\n\n\t\tlet scale = 1;\n\t\tconst panOffset = new Vector3();\n\n\t\tconst rotateStart = new Vector2();\n\t\tconst rotateEnd = new Vector2();\n\t\tconst rotateDelta = new Vector2();\n\n\t\tconst panStart = new Vector2();\n\t\tconst panEnd = new Vector2();\n\t\tconst panDelta = new Vector2();\n\n\t\tconst dollyStart = new Vector2();\n\t\tconst dollyEnd = new Vector2();\n\t\tconst dollyDelta = new Vector2();\n\n\t\tconst dollyDirection = new Vector3();\n\t\tconst mouse = new Vector2();\n\t\tlet performCursorZoom = false;\n\n\t\tconst pointers = [];\n\t\tconst pointerPositions = {};\n\n\t\tfunction getAutoRotationAngle( deltaTime ) {\n\n\t\t\tif ( deltaTime !== null ) {\n\n\t\t\t\treturn ( 2 * Math.PI / 60 * scope.autoRotateSpeed ) * deltaTime;\n\n\t\t\t} else {\n\n\t\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction getZoomScale( delta ) {\n\n\t\t\tconst normalized_delta = Math.abs( delta ) / ( 100 * ( window.devicePixelRatio | 0 ) );\n\t\t\treturn Math.pow( 0.95, scope.zoomSpeed * normalized_delta );\n\n\t\t}\n\n\t\tfunction rotateLeft( angle ) {\n\n\t\t\tsphericalDelta.theta -= angle;\n\n\t\t}\n\n\t\tfunction rotateUp( angle ) {\n\n\t\t\tsphericalDelta.phi -= angle;\n\n\t\t}\n\n\t\tconst panLeft = function () {\n\n\t\t\tconst v = new Vector3();\n\n\t\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\t\tv.multiplyScalar( - distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\tconst panUp = function () {\n\n\t\t\tconst v = new Vector3();\n\n\t\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t\t}\n\n\t\t\t\tv.multiplyScalar( distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\t// deltaX and deltaY are in pixels; right and down are positive\n\t\tconst pan = function () {\n\n\t\t\tconst offset = new Vector3();\n\n\t\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\t\tconst element = scope.domElement;\n\n\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t// perspective\n\t\t\t\t\tconst position = scope.object.position;\n\t\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\t\tlet targetDistance = offset.length();\n\n\t\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t// orthographic\n\t\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\t\tscope.enablePan = false;\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}();\n\n\t\tfunction dollyOut( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera || scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscale /= dollyScale;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction dollyIn( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera || scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscale *= dollyScale;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction updateZoomParameters( x, y ) {\n\n\t\t\tif ( ! scope.zoomToCursor ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tperformCursorZoom = true;\n\n\t\t\tconst rect = scope.domElement.getBoundingClientRect();\n\t\t\tconst dx = x - rect.left;\n\t\t\tconst dy = y - rect.top;\n\t\t\tconst w = rect.width;\n\t\t\tconst h = rect.height;\n\n\t\t\tmouse.x = ( dx / w ) * 2 - 1;\n\t\t\tmouse.y = - ( dy / h ) * 2 + 1;\n\n\t\t\tdollyDirection.set( mouse.x, mouse.y, 1 ).unproject( scope.object ).sub( scope.object.position ).normalize();\n\n\t\t}\n\n\t\tfunction clampDistance( dist ) {\n\n\t\t\treturn Math.max( scope.minDistance, Math.min( scope.maxDistance, dist ) );\n\n\t\t}\n\n\t\t//\n\t\t// event callbacks - update the object state\n\t\t//\n\n\t\tfunction handleMouseDownRotate( event ) {\n\n\t\t\trotateStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownDolly( event ) {\n\n\t\t\tupdateZoomParameters( event.clientX, event.clientX );\n\t\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownPan( event ) {\n\n\t\t\tpanStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseMoveRotate( event ) {\n\n\t\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMoveDolly( event ) {\n\n\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale( dollyDelta.y ) );\n\n\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale( dollyDelta.y ) );\n\n\t\t\t}\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMovePan( event ) {\n\n\t\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseWheel( event ) {\n\n\t\t\tupdateZoomParameters( event.clientX, event.clientY );\n\n\t\t\tif ( event.deltaY < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale( event.deltaY ) );\n\n\t\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale( event.deltaY ) );\n\n\t\t\t}\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleKeyDown( event ) {\n\n\t\t\tlet needsUpdate = false;\n\n\t\t\tswitch ( event.code ) {\n\n\t\t\t\tcase scope.keys.UP:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\trotateUp( 2 * Math.PI * scope.rotateSpeed / scope.domElement.clientHeight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpan( 0, scope.keyPanSpeed );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.BOTTOM:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\trotateUp( - 2 * Math.PI * scope.rotateSpeed / scope.domElement.clientHeight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.LEFT:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\trotateLeft( 2 * Math.PI * scope.rotateSpeed / scope.domElement.clientHeight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.RIGHT:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\trotateLeft( - 2 * Math.PI * scope.rotateSpeed / scope.domElement.clientHeight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( needsUpdate ) {\n\n\t\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tscope.update();\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tfunction handleTouchStartRotate( event ) {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\trotateStart.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\trotateStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartPan( event ) {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\tpanStart.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\tpanStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartDolly( event ) {\n\n\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\tconst dx = event.pageX - position.x;\n\t\t\tconst dy = event.pageY - position.y;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyStart.set( 0, distance );\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyPan( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\t\tif ( scope.enablePan ) handleTouchStartPan( event );\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyRotate( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\t\tif ( scope.enableRotate ) handleTouchStartRotate( event );\n\n\t\t}\n\n\t\tfunction handleTouchMoveRotate( event ) {\n\n\t\t\tif ( pointers.length == 1 ) {\n\n\t\t\t\trotateEnd.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\trotateEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMovePan( event ) {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\tpanEnd.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\tpanEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDolly( event ) {\n\n\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\tconst dx = event.pageX - position.x;\n\t\t\tconst dy = event.pageY - position.y;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyEnd.set( 0, distance );\n\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\t\tdollyOut( dollyDelta.y );\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\tconst centerX = ( event.pageX + position.x ) * 0.5;\n\t\t\tconst centerY = ( event.pageY + position.y ) * 0.5;\n\n\t\t\tupdateZoomParameters( centerX, centerY );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t\t}\n\n\t\t//\n\t\t// event handlers - FSM: listen for events and reset state\n\t\t//\n\n\t\tfunction onPointerDown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( pointers.length === 0 ) {\n\n\t\t\t\tscope.domElement.setPointerCapture( event.pointerId );\n\n\t\t\t\tscope.domElement.addEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.addEventListener( 'pointerup', onPointerUp );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\taddPointer( event );\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchStart( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseDown( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchMove( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseMove( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerUp( event ) {\n\n\t\t\tremovePointer( event );\n\n\t\t\tif ( pointers.length === 0 ) {\n\n\t\t\t\tscope.domElement.releasePointerCapture( event.pointerId );\n\n\t\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\t\t\t}\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onMouseDown( event ) {\n\n\t\t\tlet mouseAction;\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tmouseAction = - 1;\n\n\t\t\t}\n\n\t\t\tswitch ( mouseAction ) {\n\n\t\t\t\tcase MOUSE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MOUSE.PAN:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseMove( event ) {\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseWheel( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\thandleMouseWheel( event );\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t}\n\n\t\tfunction onKeyDown( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enablePan === false ) return;\n\n\t\t\thandleKeyDown( event );\n\n\t\t}\n\n\t\tfunction onTouchStart( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( pointers.length ) {\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyRotate( event );\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onTouchMove( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onContextMenu( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t}\n\n\t\tfunction addPointer( event ) {\n\n\t\t\tpointers.push( event.pointerId );\n\n\t\t}\n\n\t\tfunction removePointer( event ) {\n\n\t\t\tdelete pointerPositions[ event.pointerId ];\n\n\t\t\tfor ( let i = 0; i < pointers.length; i ++ ) {\n\n\t\t\t\tif ( pointers[ i ] == event.pointerId ) {\n\n\t\t\t\t\tpointers.splice( i, 1 );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction trackPointer( event ) {\n\n\t\t\tlet position = pointerPositions[ event.pointerId ];\n\n\t\t\tif ( position === undefined ) {\n\n\t\t\t\tposition = new Vector2();\n\t\t\t\tpointerPositions[ event.pointerId ] = position;\n\n\t\t\t}\n\n\t\t\tposition.set( event.pageX, event.pageY );\n\n\t\t}\n\n\t\tfunction getSecondPointerPosition( event ) {\n\n\t\t\tconst pointerId = ( event.pointerId === pointers[ 0 ] ) ? pointers[ 1 ] : pointers[ 0 ];\n\n\t\t\treturn pointerPositions[ pointerId ];\n\n\t\t}\n\n\t\t//\n\n\t\tscope.domElement.addEventListener( 'contextmenu', onContextMenu );\n\n\t\tscope.domElement.addEventListener( 'pointerdown', onPointerDown );\n\t\tscope.domElement.addEventListener( 'pointercancel', onPointerUp );\n\t\tscope.domElement.addEventListener( 'wheel', onMouseWheel, { passive: false } );\n\n\t\t// force an update at start\n\n\t\tthis.update();\n\n\t}\n\n}\n\nexport { OrbitControls };\n","import * as React from 'react';\r\n\r\nimport ContentAndSidebar from './content-and-sidebar';\r\n\r\nimport * as three from 'three';\r\nimport { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';\r\nimport { OrbitControls } from 'three/addons/controls/OrbitControls.js';\r\n\r\nimport { kpiInnerHTML } from '../../static/sytwc-threejs/kpi_innerhtml';\r\n\r\nfunction setupScene() {\r\n  const VIEWPORT_WIDTH = 500;\r\n  const VIEWPORT_HEIGHT = 400;\r\n\r\n  const scene = new three.Scene();\r\n  const camera = new three.PerspectiveCamera(45, VIEWPORT_WIDTH / VIEWPORT_HEIGHT,\r\n      0.1, 1000);\r\n\r\n  const renderer = new three.WebGLRenderer({ antialias: true });\r\n  renderer.setClearColor(new three.Color(0x191919));\r\n  renderer.setSize(VIEWPORT_WIDTH, VIEWPORT_HEIGHT);\r\n  renderer.shadowMap.enabled = true;\r\n\r\n  const ambientLight = new three.AmbientLight(0x373737);\r\n  scene.add(ambientLight);\r\n\r\n  const controls = new OrbitControls( camera, renderer.domElement );\r\n  controls.update();\r\n\r\n  const loader = new GLTFLoader();\r\n  new Promise((resolve, reject) => {\r\n      loader.load(\r\n          '/sytwc-threejs/DamagedHelmet.glb',\r\n          gltf => {\r\n            resolve();\r\n            scene.add(gltf.scene);\r\n\r\n            camera.rotation.z = Math.PI / 2;\r\n            camera.position.set(1.5, 0, 2);\r\n            const center = new three.Vector3(scene.position.x,\r\n              scene.position.y - 0.15, scene.position.z);\r\n            camera.lookAt(center);\r\n\r\n            // clear container first\r\n            const container = document.querySelector('.glBlock2');\r\n            if (container.children.length > 0) {\r\n              for (const child of container.children) {\r\n                child.remove();\r\n              }\r\n            }\r\n            container.appendChild(renderer.domElement);\r\n\r\n            function gameloop() {\r\n              renderer.render(scene, camera);\r\n              requestAnimationFrame(gameloop);\r\n            }\r\n            gameloop();\r\n          },\r\n          undefined,\r\n          (error) => reject(error)\r\n        );\r\n      });\r\n}\r\n\r\nconst SecondGLBlock = () => {\r\n  React.useEffect(setupScene, []);\r\n\r\n  React.useEffect(() => {\r\n        const sidebarContentDiv =\r\n            document.querySelector('.sidebarContent2');\r\n        sidebarContentDiv.innerHTML = kpiInnerHTML;\r\n      }, []);\r\n\r\n  return (\r\n    <ContentAndSidebar\r\n        key='content2'\r\n        sidebarContent={\r\n            <div className='sidebarContent2'>\r\n              {/* The content is inserted here by JS */}\r\n            </div>\r\n          }>\r\n      <div className='glBlock2'>\r\n        {/* The canvas is attached here */}\r\n      </div>\r\n    </ContentAndSidebar>\r\n  );\r\n}\r\n\r\nexport default SecondGLBlock\r\n","export const kpiInnerHTML = `\r\n<h1>Descargas</h1>\r\n<a href=\"/sytwc-threejs/DamagedHelmet.glb\">Descargar el modelo de casco.</a> (autor del modelo: KhronosGroup).\r\n<hr>\r\n<h1>Mtricas</h1>\r\n\r\n<ul>\r\n    <li>Nmero de retrasos en entregables.</li>\r\n    <li>El resultado de valoracin en encuestas de otros desarrolladores sobre su propio desempeo.</li>\r\n    <li>Nmero de cambios drsticos de diseo.</li>\r\n    <li>Estimacin valor de persona-da ideal para la tarjeta.</li>\r\n    <li>Nmero de tarjetas completadas en un sprint.</li>\r\n    <li>Nmero de retrasos en las tarjetas.</li>\r\n    <li>Nmero de quejas del equipo directivo.</li>\r\n    <li>Nmero de intervenciones necesarias para que un empleado nuevo se adapte.</li>\r\n    <li>Nmero de empleados que van a las sesiones de formacin.</li>\r\n    <li>Tasa de rotacin de empleados.</li>\r\n    <li>Nivel de satisfaccin de los empleados desarrolladores.</li>\r\n</ul>\r\n`;\r\n","import * as React from 'react';\n\nimport Tabs from '../templates/tabs';\n\nimport '../styles/main.scss';\nimport { StaticImage } from 'gatsby-plugin-image';\nimport MainAnimation from '../templates/main-animation';\nimport FirstGLBlock from '../templates/first-gl-block';\nimport SecondGLBlock from '../templates/second-gl-block';\n\nconst IndexPage = () => {\n  const tabsContent = [\n        {\n          title: '1. Obtencin de informacin y modelado',\n          content: <FirstGLBlock key='ap1'/>\n        },\n        {\n          title: '2. Key Performance Indicator (KPI)',\n          content: <SecondGLBlock key='ap2'/>\n        },\n      ];\n\n  return (\n    <div className='mainDiv'>\n      <div className='logoDiv'>\n          <StaticImage src={'../images/ull.png'} alt='Gastby logo' width={200} height={100}/>\n          <div style={{display: 'flex', justifyContent: 'center', marginLeft: 20}}>\n            <p>Marcos Barrios Lorenzo, alu0101056944, 24/12/2023</p>\n          </div>\n      </div>\n\n      <h1 className='mainTitle'>\n        Sistema de Business Intelligence para la seleccin de herramientas de proyecto\n      </h1>\n\n      <div className='animationDiv'>\n        <MainAnimation>dasda</MainAnimation>\n      </div>\n\n      <Tabs allContent={tabsContent}/>\n    </div>\n  );\n}\n\nexport default IndexPage;\n"],"names":["UPPERCASE","LOWERCASE","LEADING_CAPITAL","IDENTIFIER","SEPARATORS","LEADING_SEPARATORS","RegExp","source","SEPARATORS_AND_IDENTIFIER","NUMBERS_AND_IDENTIFIER","camelCase","input","options","Array","isArray","TypeError","pascalCase","preserveConsecutiveUppercase","map","x","trim","filter","length","join","toLowerCase","locale","string","toLocaleLowerCase","toUpperCase","toLocaleUpperCase","isLastCharLower","isLastCharUpper","isLastLastCharUpper","i","character","test","slice","preserveCamelCase","replace","lastIndex","m1","charAt","_","identifier","m","postProcess","module","exports","W","hasNativeLazyLoadSupport","HTMLImageElement","prototype","z","e","t","a","s","width","height","className","style","P","h","loading","shouldLoad","opacity","A","r","n","o","l","backgroundColor","position","top","left","bottom","right","objectFit","objectPosition","d","transition","H","F","_ref5","layout","paddingTop","maxWidth","display","alt","role","src","G","children","u","V","B","U","srcSet","decoding","Y","fallback","sources","sizes","_ref6","media","type","key","X","propTypes","isRequired","displayName","J","Z","Error","K","Q","ee","te","ae","_len","arguments","_key","c","apply","concat","ie","image","se","re","ne","Set","oe","le","de","as","class","g","onStartLoad","p","onLoad","onError","f","w","y","b","v","E","k","S","M","N","$","JSON","stringify","images","I","then","_ref7","renderImageToString","swapPlaceholderImage","current","querySelector","complete","wasCached","setTimeout","removeAttribute","addEventListener","removeEventListener","add","has","_ref8","innerHTML","isLoading","isLoaded","requestAnimationFrame","cancelAnimationFrame","ref","dangerouslySetInnerHTML","__html","suppressHydrationWarning","ce","he","ue","__imageData","__error","console","warn","ge","imgClassName","imgStyle","placeholder","pe","_len2","_key2","me","fe","we","Tabs","_ref","allContent","title","nameOfActiveTab","setNameOfActiveTab","useState","buttonAmount","React","content","index","onClick","toTrianglesDrawMode","geometry","drawMode","getIndex","indices","getAttribute","undefined","error","count","push","setIndex","numberOfTriangles","newIndices","getX","newGeometry","clone","clearGroups","GLTFLoader","constructor","manager","super","this","dracoLoader","ktx2Loader","meshoptDecoder","pluginCallbacks","register","parser","GLTFMaterialsClearcoatExtension","GLTFTextureBasisUExtension","GLTFTextureWebPExtension","GLTFTextureAVIFExtension","GLTFMaterialsSheenExtension","GLTFMaterialsTransmissionExtension","GLTFMaterialsVolumeExtension","GLTFMaterialsIorExtension","GLTFMaterialsEmissiveStrengthExtension","GLTFMaterialsSpecularExtension","GLTFMaterialsIridescenceExtension","GLTFMaterialsAnisotropyExtension","GLTFMaterialsBumpExtension","GLTFLightsExtension","GLTFMeshoptCompression","GLTFMeshGpuInstancing","load","url","onProgress","scope","resourcePath","path","relativeUrl","extractUrlBase","resolveURL","itemStart","_onError","itemError","itemEnd","loader","setPath","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","data","parse","gltf","setDRACOLoader","setDDSLoader","setKTX2Loader","setMeshoptDecoder","callback","indexOf","unregister","splice","json","extensions","plugins","textDecoder","TextDecoder","ArrayBuffer","decode","Uint8Array","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","asset","version","GLTFParser","crossOrigin","fileLoader","plugin","name","extensionsUsed","extensionName","extensionsRequired","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","setExtensions","setPlugins","parseAsync","Promise","resolve","reject","GLTFRegistry","objects","get","object","remove","removeAll","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_IOR","KHR_MATERIALS_SHEEN","KHR_MATERIALS_SPECULAR","KHR_MATERIALS_TRANSMISSION","KHR_MATERIALS_IRIDESCENCE","KHR_MATERIALS_ANISOTROPY","KHR_MATERIALS_VOLUME","KHR_TEXTURE_BASISU","KHR_MATERIALS_EMISSIVE_STRENGTH","EXT_MATERIALS_BUMP","EXT_TEXTURE_WEBP","EXT_TEXTURE_AVIF","EXT_MESHOPT_COMPRESSION","EXT_MESH_GPU_INSTANCING","cache","refs","uses","_markDefs","nodeDefs","nodes","nodeIndex","nodeLength","nodeDef","light","_addNodeRef","_loadLight","lightIndex","cacheKey","dependency","lightDef","lights","lightNode","color","setRGB","range","target","set","distance","spot","innerConeAngle","outerConeAngle","Math","PI","angle","penumbra","decay","assignExtrasToUserData","intensity","createUniqueName","getDependency","createNodeAttachment","self","_getNodeRef","getMaterialType","extendParams","materialParams","materialDef","pending","metallicRoughness","pbrMetallicRoughness","baseColorFactor","array","baseColorTexture","assignTexture","all","extendMaterialParams","materialIndex","materials","emissiveStrength","emissiveIntensity","extension","clearcoatFactor","clearcoat","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughness","clearcoatRoughnessTexture","clearcoatNormalTexture","scale","clearcoatNormalScale","iridescenceFactor","iridescence","iridescenceTexture","iridescenceIor","iridescenceIOR","iridescenceThicknessRange","iridescenceThicknessMinimum","iridescenceThicknessMaximum","iridescenceThicknessTexture","sheenColor","sheenRoughness","sheen","sheenColorFactor","colorFactor","sheenRoughnessFactor","sheenColorTexture","sheenRoughnessTexture","transmissionFactor","transmission","transmissionTexture","thickness","thicknessFactor","thicknessTexture","attenuationDistance","Infinity","colorArray","attenuationColor","ior","specularIntensity","specularFactor","specularTexture","specularColorFactor","specularColor","specularColorTexture","bumpScale","bumpFactor","bumpTexture","anisotropyStrength","anisotropy","anisotropyRotation","anisotropyTexture","loadTexture","textureIndex","textureDef","textures","loadTextureImage","isSupported","textureLoader","uri","handler","getHandler","detectSupport","Image","onload","onerror","loadBufferView","bufferView","bufferViews","extensionDef","buffer","decoder","supported","res","byteOffset","byteLength","stride","byteStride","decodeGltfBufferAsync","mode","ready","result","decodeGltfBuffer","createNodeMesh","mesh","meshDef","meshes","primitive","primitives","WEBGL_CONSTANTS","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","attributesDef","attributes","accessor","results","nodeObject","pop","isGroup","instancedMeshes","q","instancedMesh","material","TRANSLATION","fromBufferAttribute","ROTATION","SCALE","setMatrixAt","compose","attributeName","attr","instanceColor","itemSize","normalized","setAttribute","copy","call","assignFinalMaterial","clear","BINARY_EXTENSION_CHUNK_TYPES","body","headerView","DataView","header","magic","getUint32","chunkContentsLength","chunkView","chunkIndex","chunkLength","chunkType","contentArray","preload","decodePrimitive","bufferViewIndex","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","threeAttributeName","ATTRIBUTES","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","decodeDracoFile","attribute","extendTexture","texture","transform","texCoord","channel","offset","rotation","fromArray","repeat","needsUpdate","GLTFCubicSplineInterpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","copySampleValue_","values","valueSize","interpolate_","i1","t0","t1","stride2","stride3","td","pp","ppp","offset1","offset0","s2","s3","s0","s1","p0","m0","p1","_q","GLTFCubicSplineQuaternionInterpolant","normalize","toArray","FLOAT","FLOAT_MAT3","FLOAT_MAT4","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","LINEAR","REPEAT","SAMPLER_2D","POINTS","LINES","LINE_LOOP","LINE_STRIP","UNSIGNED_BYTE","UNSIGNED_SHORT","Int8Array","Int16Array","Uint16Array","Uint32Array","Float32Array","WEBGL_FILTERS","WEBGL_WRAPPINGS","WEBGL_TYPE_SIZES","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","TEXCOORD_2","TEXCOORD_3","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","STEP","ALPHA_MODES","addUnknownExtensionsToUserData","knownExtensions","objectDef","userData","gltfExtensions","gltfDef","extras","Object","assign","updateMorphTargets","il","morphTargetInfluences","targetNames","morphTargetDictionary","createPrimitiveKey","primitiveDef","geometryKey","dracoExtension","createAttributesKey","targets","attributesKey","keys","sort","getNormalizedComponentScale","_identityMatrix","associations","Map","primitiveCache","nodeCache","meshCache","cameraCache","lightCache","sourceCache","textureCache","nodeNamesUsed","isSafari","isFirefox","firefoxVersion","navigator","userAgent","match","createImageBitmap","setCrossOrigin","_invokeAll","ext","beforeRoot","getDependencies","dependencies","scene","scenes","animations","cameras","afterRoot","catch","skinDefs","skins","meshDefs","skinIndex","skinLength","joints","isBone","skin","isSkinnedMesh","camera","updateMappings","original","mappings","child","entries","_invokeOne","func","unshift","loadScene","loadNode","loadMesh","loadAccessor","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","buffers","bufferViewDef","accessorIndex","sparse","TypedArray","pendingBufferViews","elementBytes","BYTES_PER_ELEMENT","itemBytes","bufferAttribute","ibSlice","floor","ibCacheKey","ib","itemSizeIndices","SCALAR","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setX","setY","setZ","setW","sourceIndex","sourceDef","sampler","promise","loadImageSource","flipY","startsWith","samplers","magFilter","minFilter","wrapS","wrapT","URL","webkitURL","sourceURI","isObjectURL","blob","Blob","mimeType","createObjectURL","isImageBitmapLoader","imageBitmap","revokeObjectURL","search","mapName","mapDef","colorSpace","gltfReference","useDerivativeTangents","tangent","useVertexColors","useFlatShading","normal","isPoints","uuid","pointsMaterial","sizeAttenuation","isLine","lineMaterial","cachedMaterial","vertexColors","flatShading","normalScale","materialType","kmuExtension","metalness","metallicFactor","roughness","roughnessFactor","metallicRoughnessTexture","doubleSided","side","alphaMode","transparent","depthWrite","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","aoMapIntensity","emissiveFactor","emissive","emissiveTexture","originalName","sanitizedName","sanitizeNodeName","loadGeometries","createDracoPrimitive","addPrimitiveAttributes","cached","geometryPromise","meshIndex","depthTest","geometries","normalizeSkinWeights","morphAttributes","group","cameraIndex","cameraDef","params","radToDeg","yfov","aspectRatio","znear","zfar","xmag","ymag","skinDef","_loadNodeShallow","inverseBindMatrices","jointNodes","bones","boneInverses","jointNode","mat","animationIndex","animationDef","animationName","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","node","parameters","output","inputAccessors","outputAccessors","tracks","inputAccessor","outputAccessor","updateMatrix","createdTracks","_createAnimationTracks","traverse","isMesh","nodePending","childPending","childrenDef","skeletonPending","skeleton","bind","nodeName","meshPromise","forEach","matrix","applyMatrix4","quaternion","sceneIndex","sceneDef","nodeIds","reducedAssociations","value","reduceAssociations","targetName","TypedKeyframeTrack","interpolation","outputArray","_getArrayFromAccessor","j","jl","track","_createCubicSplineTrackInterpolant","scaled","createInterpolant","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","assignAttributeAccessor","gltfAttributeName","workingColorSpace","box","min","max","boxScale","multiplyScalar","maxDisplacement","vector","abs","expandByVector","boundingBox","sphere","getCenter","center","radius","distanceTo","boundingSphere","computeBounds","hasMorphPosition","hasMorphNormal","hasMorphColor","pendingPositionAccessors","pendingNormalAccessors","pendingColorAccessors","pendingAccessor","morphPositions","morphNormals","morphColors","morphTargetsRelative","addMorphTargets","setupScene","three","VIEWPORT_WIDTH","renderer","setClearColor","setSize","shadowMap","enabled","spotLight","castShadow","shadow","mapSize","ambientLight","planeGeometry","planeMaterial","plane","torus","getObjectByName","lookAt","mixer","clip","clipAction","play","clock","async","animate","delta","getDelta","update","render","container","document","appendChild","domElement","MainAnimation","sidebarContent","fetchInnerHTML","modelInnerHTML","antialias","receiveShadow","centerCube","bias","mousePosition","window","event","rect","getBoundingClientRect","clientX","clientY","gameloop","cursor","fetchCube","modelCube","setFetchContent","setModelContent","raycaster","setFromCamera","intersects","intersectObjects","id","once","sidebarDOMNode","fetchTabContainer","createElement","append","FirstGLBlock","ContentAndSidebar","_changeEvent","_startEvent","_endEvent","_ray","_plane","TILT_LIMIT","cos","DEG2RAD","OrbitControls","touchAction","minDistance","maxDistance","minZoom","maxZoom","minTargetRadius","maxTargetRadius","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","zoomToCursor","autoRotate","autoRotateSpeed","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TWO","DOLLY_PAN","target0","position0","zoom0","zoom","_domElementKeyEvents","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","getDistance","listenToKeyEvents","onKeyDown","stopListenToKeyEvents","saveState","reset","updateProjectionMatrix","dispatchEvent","state","STATE","NONE","quat","setFromUnitVectors","up","quatInverse","invert","lastPosition","lastQuaternion","lastTargetPosition","twoPI","deltaTime","sub","applyQuaternion","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","isFinite","makeSafe","addScaledVector","panOffset","clampLength","performCursorZoom","isOrthographicCamera","clampDistance","setFromSpherical","zoomChanged","newRadius","isPerspectiveCamera","prevRadius","radiusDelta","dollyDirection","updateMatrixWorld","mouseBefore","mouse","unproject","mouseAfter","transformDirection","origin","direction","dot","setFromNormalAndCoplanarPoint","intersectPlane","distanceToSquared","EPS","dispose","onContextMenu","onPointerDown","onPointerUp","onMouseWheel","onPointerMove","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","pointers","pointerPositions","getZoomScale","normalized_delta","devicePixelRatio","pow","rotateUp","panLeft","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","targetDistance","tan","fov","clientHeight","clientWidth","dollyOut","dollyScale","dollyIn","updateZoomParameters","dx","dy","dist","handleMouseDownRotate","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","getSecondPointerPosition","handleTouchStartPan","handleTouchStartDolly","sqrt","handleTouchMoveRotate","subVectors","handleTouchMovePan","handleTouchMoveDolly","setPointerCapture","pointerId","addPointer","pointerType","trackPointer","handleTouchStartDollyPan","DOLLY_ROTATE","handleTouchStartDollyRotate","onTouchStart","mouseAction","button","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","onMouseDown","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","onTouchMove","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","onMouseMove","removePointer","releasePointerCapture","preventDefault","handleMouseWheel","code","handleKeyDown","passive","SecondGLBlock","IndexPage","tabsContent","StaticImage","require","justifyContent","marginLeft"],"sourceRoot":""}